{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/event-emitter/src/index.ts"],"sourcesContent":["interface EventType {\n  readonly callback: Function;\n  readonly once: boolean;\n}\n\ntype EventsType = Record<string, EventType[]>;\n\nconst WILDCARD = '*';\n\n/* event-emitter */\nexport default class EventEmitter {\n  private _events: EventsType = {};\n\n  /**\n   * 监听一个事件\n   * @param evt\n   * @param callback\n   * @param once\n   */\n  on(evt: string, callback: Function, once?: boolean) {\n    if (!this._events[evt]) {\n      this._events[evt] = [];\n    }\n    this._events[evt].push({\n      callback,\n      once: !!once,\n    });\n    return this;\n  }\n\n  /**\n   * 监听一个事件一次\n   * @param evt\n   * @param callback\n   */\n  once(evt: string, callback: Function) {\n    return this.on(evt, callback, true);\n  }\n\n  /**\n   * 触发一个事件\n   * @param evt\n   * @param args\n   */\n  emit(evt: string, ...args: any[]) {\n    const events = this._events[evt] || [];\n    const wildcardEvents = this._events[WILDCARD] || [];\n\n    // 实际的处理 emit 方法\n    const doEmit = (es: EventType[]) => {\n      let length = es.length;\n      for (let i = 0; i < length; i++) {\n        if (!es[i]) {\n          continue;\n        }\n        const { callback, once } = es[i];\n\n        if (once) {\n          es.splice(i, 1);\n\n          if (es.length === 0) {\n            delete this._events[evt];\n          }\n\n          length--;\n          i--;\n        }\n\n        callback.apply(this, args);\n      }\n    };\n\n    doEmit(events);\n    doEmit(wildcardEvents);\n  }\n\n  /**\n   * 取消监听一个事件，或者一个channel\n   * @param evt\n   * @param callback\n   */\n  off(evt?: string, callback?: Function) {\n    if (!evt) {\n      // evt 为空全部清除\n      this._events = {};\n    } else {\n      if (!callback) {\n        // evt 存在，callback 为空，清除事件所有方法\n        delete this._events[evt];\n      } else {\n        // evt 存在，callback 存在，清除匹配的\n        const events = this._events[evt] || [];\n\n        let length = events.length;\n        for (let i = 0; i < length; i++) {\n          if (events[i].callback === callback) {\n            events.splice(i, 1);\n            length--;\n            i--;\n          }\n        }\n\n        if (events.length === 0) {\n          delete this._events[evt];\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /* 当前所有的事件 */\n  getEvents() {\n    return this._events;\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/vendor/es/d3-hierarchy.mjs"],"sourcesContent":["\n// `@antv/vendor/d3-hierarchy` (ESM)\n// See upstream license: https://github.com/d3/d3-hierarchy/blob/main/LICENSE\n//\n// Our ESM package uses the underlying installed dependencies of `node_modules/d3-hierarchy`\nexport * from \"d3-hierarchy\";\n"],"names":[],"mappings":"AACA,oCAAoC;AACpC,6EAA6E;AAC7E,EAAE;AACF,4FAA4F","ignoreList":[0]}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/vendor/es/d3-array.mjs"],"sourcesContent":["\n// `@antv/vendor/d3-array` (ESM)\n// See upstream license: https://github.com/d3/d3-array/blob/main/LICENSE\n//\n// Our ESM package uses the underlying installed dependencies of `node_modules/d3-array`\nexport * from \"d3-array\";\n"],"names":[],"mappings":"AACA,gCAAgC;AAChC,yEAAyE;AACzE,EAAE;AACF,wFAAwF","ignoreList":[0]}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/vendor/es/d3-format.mjs"],"sourcesContent":["\n// `@antv/vendor/d3-format` (ESM)\n// See upstream license: https://github.com/d3/d3-format/blob/main/LICENSE\n//\n// Our ESM package uses the underlying installed dependencies of `node_modules/d3-format`\nexport * from \"d3-format\";\n"],"names":[],"mappings":"AACA,iCAAiC;AACjC,0EAA0E;AAC1E,EAAE;AACF,yFAAyF","ignoreList":[0]}},
    {"offset": {"line": 212, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/vendor/es/d3-path.mjs"],"sourcesContent":["\n// `@antv/vendor/d3-path` (ESM)\n// See upstream license: https://github.com/d3/d3-path/blob/main/LICENSE\n//\n// Our ESM package uses the underlying installed dependencies of `node_modules/d3-path`\nexport * from \"d3-path\";\n"],"names":[],"mappings":"AACA,+BAA+B;AAC/B,wEAAwE;AACxE,EAAE;AACF,uFAAuF","ignoreList":[0]}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/vendor/es/d3-shape.mjs"],"sourcesContent":["\n// `@antv/vendor/d3-shape` (ESM)\n// See upstream license: https://github.com/d3/d3-shape/blob/main/LICENSE\n//\n// Our ESM package uses the underlying installed dependencies of `node_modules/d3-shape`\nexport * from \"d3-shape\";\n"],"names":[],"mappings":"AACA,gCAAgC;AAChC,yEAAyE;AACzE,EAAE;AACF,wFAAwF","ignoreList":[0]}},
    {"offset": {"line": 252, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/vendor/es/d3-scale-chromatic.mjs"],"sourcesContent":["\n// `@antv/vendor/d3-scale-chromatic` (ESM)\n// See upstream license: https://github.com/d3/d3-scale-chromatic/blob/main/LICENSE\n//\n// Our ESM package uses the underlying installed dependencies of `node_modules/d3-scale-chromatic`\nexport * from \"d3-scale-chromatic\";\n"],"names":[],"mappings":"AACA,0CAA0C;AAC1C,mFAAmF;AACnF,EAAE;AACF,kGAAkG","ignoreList":[0]}},
    {"offset": {"line": 272, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 458, "column": 0}, "map": {"version":3,"sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/vendor/es/d3-geo.mjs"],"sourcesContent":["\n// `@antv/vendor/d3-geo` (ESM)\n// See upstream license: https://github.com/d3/d3-geo/blob/main/LICENSE\n//\n// Our ESM package uses the underlying installed dependencies of `node_modules/d3-geo`\nexport * from \"d3-geo\";\n"],"names":[],"mappings":"AACA,8BAA8B;AAC9B,uEAAuE;AACvE,EAAE;AACF,sFAAsF","ignoreList":[0]}},
    {"offset": {"line": 464, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/vendor/es/d3-force.mjs"],"sourcesContent":["\n// `@antv/vendor/d3-force` (ESM)\n// See upstream license: https://github.com/d3/d3-force/blob/main/LICENSE\n//\n// Our ESM package uses the underlying installed dependencies of `node_modules/d3-force`\nexport * from \"d3-force\";\n"],"names":[],"mappings":"AACA,gCAAgC;AAChC,yEAAyE;AACzE,EAAE;AACF,wFAAwF","ignoreList":[0]}},
    {"offset": {"line": 484, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 498, "column": 0}, "map": {"version":3,"sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/vendor/es/d3-dsv.mjs"],"sourcesContent":["\n// `@antv/vendor/d3-dsv` (ESM)\n// See upstream license: https://github.com/d3/d3-dsv/blob/main/LICENSE\n//\n// Our ESM package uses the underlying installed dependencies of `node_modules/d3-dsv`\nexport * from \"d3-dsv\";\n"],"names":[],"mappings":"AACA,8BAA8B;AAC9B,uEAAuE;AACvE,EAAE;AACF,sFAAsF","ignoreList":[0]}},
    {"offset": {"line": 504, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 518, "column": 0}, "map": {"version":3,"file":"partition.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g2-extension-plot/esm/utils/hierarchy/src/utils/hierarchy/partition.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/g2-extension-plot/esm/utils/hierarchy/src/utils/hierarchy/partition.ts"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 662, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 668, "column": 0}, "map": {"version":3,"file":"sunburst.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g2-extension-plot/esm/mark/src/mark/sunburst.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/g2-extension-plot/esm/mark/src/mark/sunburst.ts"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 833, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 839, "column": 0}, "map": {"version":3,"file":"drillDown.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g2-extension-plot/esm/interaction/src/interaction/drillDown.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/g2-extension-plot/esm/interaction/src/interaction/drillDown.ts"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1109, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1115, "column": 0}, "map": {"version":3,"file":"lib.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g2-extension-plot/esm/src/lib.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/g2-extension-plot/esm/src/lib.ts"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AAC3C,OAAO,EAAE,SAAS,EAAE,MAAM,yBAAyB,CAAC;;;AAE9C,SAAU,OAAO;IACrB,OAAO;QACL,uBAAuB,uLAAE,YAAS;QAClC,eAAe,+KAAE,WAAQ;KACjB,CAAC;AACb,CAAC","ignoreList":[0]}},
    {"offset": {"line": 1128, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1134, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g2-extension-plot/esm/mark/src/mark/index.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/g2-extension-plot/esm/mark/src/mark/index.ts"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 1137, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1152, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g2-extension-plot/esm/interaction/src/interaction/index.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/g2-extension-plot/esm/interaction/src/interaction/index.ts"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 1155, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1170, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g2-extension-plot/esm/src/index.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/g2-extension-plot/esm/src/index.ts"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 1175, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1192, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-math/src/util.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-math/src/ellipse.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-math/src/arc.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-math/src/bezier.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-math/src/line.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-math/src/cubic.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-math/src/segments.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-math/src/polyline.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-math/src/polygon.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-math/src/quadratic.ts"],"sourcesContent":["import type { BBox } from './types';\n\nexport function distance(x1: number, y1: number, x2: number, y2: number) {\n  const dx = x1 - x2;\n  const dy = y1 - y2;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function getBBoxByArray(xArr: number[], yArr: number[]): BBox {\n  const minX = Math.min(...xArr);\n  const minY = Math.min(...yArr);\n  const maxX = Math.max(...xArr);\n  const maxY = Math.max(...yArr);\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n}\n\nexport function getBBoxRange(x1: number, y1: number, x2: number, y2: number) {\n  return {\n    minX: Math.min(x1, x2),\n    maxX: Math.max(x1, x2),\n    minY: Math.min(y1, y2),\n    maxY: Math.max(y1, y2),\n  };\n}\n\nexport function piMod(angle: number) {\n  return (angle + Math.PI * 2) % (Math.PI * 2);\n}\n","import type { BBox, Point } from './types';\nimport { distance, piMod } from './util';\n\nfunction copysign(v1: number, v2: number) {\n  const absv = Math.abs(v1);\n  return v2 > 0 ? absv : absv * -1;\n}\n\nexport function box(x: number, y: number, rx: number, ry: number): BBox {\n  return {\n    x: x - rx,\n    y: y - ry,\n    width: rx * 2,\n    height: ry * 2,\n  };\n}\nexport function length(x: number, y: number, rx: number, ry: number) {\n  return Math.PI * (3 * (rx + ry) - Math.sqrt((3 * rx + ry) * (rx + 3 * ry)));\n}\nexport function nearestPoint(\n  x: number,\n  y: number,\n  rx: number,\n  ry: number,\n  x0: number,\n  y0: number,\n) {\n  const a = rx;\n  const b = ry;\n  // 假如椭圆半径为0则返回圆心\n  if (a === 0 || b === 0) {\n    return {\n      x,\n      y,\n    };\n  }\n  // 转换成 0， 0 为中心的椭圆计算\n  const relativeX = x0 - x;\n  const relativeY = y0 - y;\n  const px = Math.abs(relativeX);\n  const py = Math.abs(relativeY);\n  const squareA = a * a;\n  const squareB = b * b;\n  // const angle0 = Math.atan2(relativeY, relativeX);\n  let t = Math.PI / 4;\n  let nearestX = 0; // 椭圆上的任一点\n  let nearestY = 0;\n  // 迭代 4 次\n  for (let i = 0; i < 4; i++) {\n    nearestX = a * Math.cos(t);\n    nearestY = b * Math.sin(t);\n\n    const ex = ((squareA - squareB) * Math.cos(t) ** 3) / a;\n    const ey = ((squareB - squareA) * Math.sin(t) ** 3) / b;\n    const rx1 = nearestX - ex;\n    const ry1 = nearestY - ey;\n\n    const qx = px - ex;\n    const qy = py - ey;\n    const r = Math.hypot(ry1, rx1);\n    const q = Math.hypot(qy, qx);\n\n    const delta_c = r * Math.asin((rx1 * qy - ry1 * qx) / (r * q));\n    const delta_t =\n      delta_c /\n      Math.sqrt(squareA + squareB - nearestX * nearestX - nearestY * nearestY);\n\n    t += delta_t;\n    t = Math.min(Math.PI / 2, Math.max(0, t));\n  }\n\n  return {\n    x: x + copysign(nearestX, relativeX),\n    y: y + copysign(nearestY, relativeY),\n  };\n}\nexport function pointDistance(\n  x: number,\n  y: number,\n  rx: number,\n  ry: number,\n  x0: number,\n  y0: number,\n) {\n  const np = nearestPoint(x, y, rx, ry, x0, y0);\n  return distance(np.x, np.y, x0, y0);\n}\nexport function pointAt(\n  x: number,\n  y: number,\n  rx: number,\n  ry: number,\n  t: number,\n): Point {\n  const angle = 2 * Math.PI * t; // 按照角度进行计算，而不按照周长计算\n  return {\n    x: x + rx * Math.cos(angle),\n    y: y + ry * Math.sin(angle),\n  };\n}\nexport function tangentAngle(\n  x: number,\n  y: number,\n  rx: number,\n  ry: number,\n  t: number,\n) {\n  const angle = 2 * Math.PI * t; // 按照角度进行计算，而不按照周长计算\n  // 直接使用 x,y 的导数计算， x' = -rx * sin(t); y' = ry * cos(t);\n  const tangentAngle = Math.atan2(ry * Math.cos(angle), -rx * Math.sin(angle));\n  // 也可以使用指定点的切线方程计算，成本有些高\n  // const point = this.pointAt(0, 0, rx, ry, t); // 椭圆的切线同椭圆的中心不相关\n  // let tangentAngle = -1 * Math.atan((ry * ry * point.x) / (rx * rx * point.y));\n  // if (angle >= 0 && angle <= Math.PI) {\n  //   tangentAngle += Math.PI;\n  // }\n\n  return piMod(tangentAngle);\n}\n","import { nearestPoint as ellipseNearestPoint } from './ellipse';\nimport type { BBox, Point } from './types';\nimport { distance, piMod } from './util';\n\n// 偏导数 x\nfunction derivativeXAt(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  angle: number,\n) {\n  return (\n    -1 * rx * Math.cos(xRotation) * Math.sin(angle) -\n    ry * Math.sin(xRotation) * Math.cos(angle)\n  );\n}\n\n// 偏导数 y\nfunction derivativeYAt(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  angle: number,\n) {\n  return (\n    -1 * rx * Math.sin(xRotation) * Math.sin(angle) +\n    ry * Math.cos(xRotation) * Math.cos(angle)\n  );\n}\n\n// x 的极值\nfunction xExtrema(rx: number, ry: number, xRotation: number) {\n  return Math.atan((-ry / rx) * Math.tan(xRotation));\n}\n\n// y 的极值\nfunction yExtrema(rx: number, ry: number, xRotation: number) {\n  return Math.atan(ry / (rx * Math.tan(xRotation)));\n}\n\n// 根据角度求 x 坐标\nfunction xAt(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  angle: number,\n) {\n  return (\n    rx * Math.cos(xRotation) * Math.cos(angle) -\n    ry * Math.sin(xRotation) * Math.sin(angle) +\n    cx\n  );\n}\n\n// 根据角度求 y 坐标\nfunction yAt(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  angle: number,\n) {\n  return (\n    rx * Math.sin(xRotation) * Math.cos(angle) +\n    ry * Math.cos(xRotation) * Math.sin(angle) +\n    cy\n  );\n}\n\n// 获取点在椭圆上的角度\nfunction getAngle(rx: number, ry: number, x0: number, y0: number) {\n  const angle = Math.atan2(y0 * rx, x0 * ry);\n  // 转换到 0 - 2PI 内\n  return (angle + Math.PI * 2) % (Math.PI * 2);\n}\n\n// 根据角度获取，x,y\nfunction getPoint(rx: number, ry: number, angle: number): Point {\n  return {\n    x: rx * Math.cos(angle),\n    y: ry * Math.sin(angle),\n  };\n}\n\n// 旋转\nfunction rotate(x: number, y: number, angle: number) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return [x * cos - y * sin, x * sin + y * cos];\n}\n\nexport function box(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n): BBox {\n  const xDim = xExtrema(rx, ry, xRotation);\n  let minX = Infinity;\n  let maxX = -Infinity;\n  const xs = [startAngle, endAngle];\n  for (let i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {\n    const xAngle = xDim + i;\n    if (startAngle < endAngle) {\n      if (startAngle < xAngle && xAngle < endAngle) {\n        xs.push(xAngle);\n      }\n    } else if (endAngle < xAngle && xAngle < startAngle) {\n      xs.push(xAngle);\n    }\n  }\n\n  for (let i = 0; i < xs.length; i++) {\n    const x = xAt(cx, cy, rx, ry, xRotation, xs[i]);\n    if (x < minX) {\n      minX = x;\n    }\n    if (x > maxX) {\n      maxX = x;\n    }\n  }\n\n  const yDim = yExtrema(rx, ry, xRotation);\n  let minY = Infinity;\n  let maxY = -Infinity;\n  const ys = [startAngle, endAngle];\n  for (let i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {\n    const yAngle = yDim + i;\n    if (startAngle < endAngle) {\n      if (startAngle < yAngle && yAngle < endAngle) {\n        ys.push(yAngle);\n      }\n    } else if (endAngle < yAngle && yAngle < startAngle) {\n      ys.push(yAngle);\n    }\n  }\n\n  for (let i = 0; i < ys.length; i++) {\n    const y = yAt(cx, cy, rx, ry, xRotation, ys[i]);\n    if (y < minY) {\n      minY = y;\n    }\n    if (y > maxY) {\n      maxY = y;\n    }\n  }\n\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n}\n\nexport function nearestPoint(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  x0: number,\n  y0: number,\n) {\n  // 将最近距离问题转换成到椭圆中心 0,0 没有旋转的椭圆问题\n  const relativeVector = rotate(x0 - cx, y0 - cy, -xRotation);\n  const [x1, y1] = relativeVector;\n  // 计算点到椭圆的最近的点\n  let relativePoint = ellipseNearestPoint(0, 0, rx, ry, x1, y1);\n  // 获取点在椭圆上的角度\n  const angle = getAngle(rx, ry, relativePoint.x, relativePoint.y);\n  // 点没有在圆弧上\n  if (angle < startAngle) {\n    // 小于起始圆弧\n    relativePoint = getPoint(rx, ry, startAngle);\n  } else if (angle > endAngle) {\n    // 大于结束圆弧\n    relativePoint = getPoint(rx, ry, endAngle);\n  }\n  // 旋转到 xRotation 的角度\n  const vector = rotate(relativePoint.x, relativePoint.y, xRotation);\n  return {\n    x: vector[0] + cx,\n    y: vector[1] + cy,\n  };\n}\n\nexport function pointDistance(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  x0: number,\n  y0: number,\n) {\n  const np = nearestPoint(\n    cx,\n    cy,\n    rx,\n    ry,\n    xRotation,\n    startAngle,\n    endAngle,\n    x0,\n    y0,\n  );\n  return distance(np.x, np.y, x0, y0);\n}\n\nexport function pointAt(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  t: number,\n): Point {\n  const angle = (endAngle - startAngle) * t + startAngle;\n  return {\n    x: xAt(cx, cy, rx, ry, xRotation, angle),\n    y: yAt(cx, cy, rx, ry, xRotation, angle),\n  };\n}\n\nexport function tangentAngle(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  t: number,\n) {\n  const angle = (endAngle - startAngle) * t + startAngle;\n  const dx = derivativeXAt(\n    cx,\n    cy,\n    rx,\n    ry,\n    xRotation,\n    startAngle,\n    endAngle,\n    angle,\n  );\n  const dy = derivativeYAt(\n    cx,\n    cy,\n    rx,\n    ry,\n    xRotation,\n    startAngle,\n    endAngle,\n    angle,\n  );\n  return piMod(Math.atan2(dy, dx));\n}\n","import { distance } from './util';\nimport type { Point, PointTuple } from './types';\n\nconst EPSILON = 0.0001;\n/**\n * 使用牛顿切割法求最近的点\n * @param {number[]} xArr      点的 x 数组\n * @param {number[]} yArr      点的 y 数组\n * @param {number}   x         指定的点 x\n * @param {number}   y         指定的点 y\n * @param {Function} tCallback 差值函数\n */\nexport function nearestPoint(\n  xArr: number[],\n  yArr: number[],\n  x: number,\n  y: number,\n  tCallback: (...arr: number[]) => number,\n  length?: number,\n): Point {\n  let t = -1;\n  let d = Infinity;\n  const v0: PointTuple = [x, y];\n\n  let segNum = 20;\n  if (length && length > 200) {\n    segNum = length / 10;\n  }\n  const increaseRate = 1 / segNum;\n\n  let interval = increaseRate / 10;\n\n  for (let i = 0; i <= segNum; i++) {\n    const _t = i * increaseRate;\n    const v1: PointTuple = [\n      tCallback(...xArr.concat([_t])),\n      tCallback(...yArr.concat([_t])),\n    ];\n\n    const d1 = distance(v0[0], v0[1], v1[0], v1[1]);\n    if (d1 < d) {\n      t = _t;\n      d = d1;\n    }\n  }\n  // 提前终止\n  if (t === 0) {\n    return {\n      x: xArr[0],\n      y: yArr[0],\n    };\n  }\n  if (t === 1) {\n    const count = xArr.length;\n    return {\n      x: xArr[count - 1],\n      y: yArr[count - 1],\n    };\n  }\n  d = Infinity;\n\n  for (let i = 0; i < 32; i++) {\n    if (interval < EPSILON) {\n      break;\n    }\n\n    const prev = t - interval;\n    const next = t + interval;\n\n    const v1 = [\n      tCallback(...xArr.concat([prev])),\n      tCallback(...yArr.concat([prev])),\n    ];\n\n    const d1 = distance(v0[0], v0[1], v1[0], v1[1]);\n    if (prev >= 0 && d1 < d) {\n      t = prev;\n      d = d1;\n    } else {\n      const v2 = [\n        tCallback(...xArr.concat([next])),\n        tCallback(...yArr.concat([next])),\n      ];\n      const d2 = distance(v0[0], v0[1], v2[0], v2[1]);\n      if (next <= 1 && d2 < d) {\n        t = next;\n        d = d2;\n      } else {\n        interval *= 0.5;\n      }\n    }\n  }\n\n  return {\n    x: tCallback(...xArr.concat([t])),\n    y: tCallback(...yArr.concat([t])),\n  };\n}\n\n// 近似求解 https://community.khronos.org/t/3d-cubic-bezier-segment-length/62363/2\nexport function snapLength(xArr: number[], yArr: number[]) {\n  let totalLength = 0;\n  const count = xArr.length;\n  for (let i = 0; i < count; i++) {\n    const x = xArr[i];\n    const y = yArr[i];\n    const nextX = xArr[(i + 1) % count];\n    const nextY = yArr[(i + 1) % count];\n    totalLength += distance(x, y, nextX, nextY);\n  }\n  return totalLength / 2;\n}\n","import { vec2 } from 'gl-matrix';\nimport type { BBox, Point } from './types';\nimport { distance, getBBoxByArray } from './util';\n\nexport function box(x1: number, y1: number, x2: number, y2: number): BBox {\n  return getBBoxByArray([x1, x2], [y1, y2]);\n}\n\nexport function length(x1: number, y1: number, x2: number, y2: number) {\n  return distance(x1, y1, x2, y2);\n}\n\nexport function pointAt(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  t: number,\n): Point {\n  return {\n    x: (1 - t) * x1 + t * x2,\n    y: (1 - t) * y1 + t * y2,\n  };\n}\n\nexport function pointDistance(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x: number,\n  y: number,\n): number {\n  // 投影距离 x1, y1 的向量，假设 p, p1, p2 三个点，投影点为 a\n  // p1a = p1p.p1p2/|p1p2| * (p1p 的单位向量)\n  const cross = (x2 - x1) * (x - x1) + (y2 - y1) * (y - y1);\n  if (cross < 0) {\n    return distance(x1, y1, x, y);\n  }\n  const lengthSquare = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\n  if (cross > lengthSquare) {\n    return distance(x2, y2, x, y);\n  }\n  return pointToLine(x1, y1, x2, y2, x, y);\n}\n\nexport function pointToLine(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x: number,\n  y: number,\n) {\n  const d: [number, number] = [x2 - x1, y2 - y1];\n  // 如果端点相等，则判定点到点的距离\n  if (vec2.exactEquals(d, [0, 0])) {\n    return Math.sqrt((x - x1) * (x - x1) + (y - y1) * (y - y1));\n  }\n  const u: [number, number] = [-d[1], d[0]];\n  vec2.normalize(u, u);\n  const a: [number, number] = [x - x1, y - y1];\n  return Math.abs(vec2.dot(a, u));\n}\n\nexport function tangentAngle(x1: number, y1: number, x2: number, y2: number) {\n  return Math.atan2(y2 - y1, x2 - x1);\n}\n","import { isNumberEqual } from '@antv/util';\nimport { nearestPoint as bezierNearestPoint, snapLength } from './bezier';\nimport { pointAt as linePointAt } from './line';\nimport type { Point } from './types';\nimport { distance, getBBoxByArray, piMod } from './util';\n\nfunction cubicAt(p0: number, p1: number, p2: number, p3: number, t: number) {\n  const onet = 1 - t; // t * t * t 的性能大概是 Math.pow(t, 3) 的三倍\n  return (\n    onet * onet * onet * p0 +\n    3 * p1 * t * onet * onet +\n    3 * p2 * t * t * onet +\n    p3 * t * t * t\n  );\n}\n\nfunction derivativeAt(\n  p0: number,\n  p1: number,\n  p2: number,\n  p3: number,\n  t: number,\n) {\n  const onet = 1 - t;\n  return (\n    3 * (onet * onet * (p1 - p0) + 2 * onet * t * (p2 - p1) + t * t * (p3 - p2))\n  );\n}\n\nfunction extrema(p0: number, p1: number, p2: number, p3: number) {\n  const a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;\n  const b = 6 * p0 - 12 * p1 + 6 * p2;\n  const c = 3 * p1 - 3 * p0;\n  const extremas = [];\n  let t1: number;\n  let t2: number;\n  let discSqrt: number;\n\n  if (isNumberEqual(a, 0)) {\n    if (!isNumberEqual(b, 0)) {\n      t1 = -c / b;\n      if (t1 >= 0 && t1 <= 1) {\n        extremas.push(t1);\n      }\n    }\n  } else {\n    const disc = b * b - 4 * a * c;\n    if (isNumberEqual(disc, 0)) {\n      extremas.push(-b / (2 * a));\n    } else if (disc > 0) {\n      discSqrt = Math.sqrt(disc);\n      t1 = (-b + discSqrt) / (2 * a);\n      t2 = (-b - discSqrt) / (2 * a);\n      if (t1 >= 0 && t1 <= 1) {\n        extremas.push(t1);\n      }\n      if (t2 >= 0 && t2 <= 1) {\n        extremas.push(t2);\n      }\n    }\n  }\n  return extremas;\n}\n\n// 分割贝塞尔曲线\nfunction divideCubic(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  t: number,\n): [number, number, number, number, number, number, number, number][] {\n  // 划分点\n  const xt = cubicAt(x1, x2, x3, x4, t);\n  const yt = cubicAt(y1, y2, y3, y4, t);\n  // 计算两点之间的差值点\n  const c1 = linePointAt(x1, y1, x2, y2, t);\n  const c2 = linePointAt(x2, y2, x3, y3, t);\n  const c3 = linePointAt(x3, y3, x4, y4, t);\n  const c12 = linePointAt(c1.x, c1.y, c2.x, c2.y, t);\n  const c23 = linePointAt(c2.x, c2.y, c3.x, c3.y, t);\n  return [\n    [x1, y1, c1.x, c1.y, c12.x, c12.y, xt, yt],\n    [xt, yt, c23.x, c23.y, c3.x, c3.y, x4, y4],\n  ];\n}\n\n// 使用迭代法取贝塞尔曲线的长度，二阶和三阶分开写，更清晰和便于调试\nfunction cubicLength(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  iterationCount: number,\n): number {\n  if (iterationCount === 0) {\n    return snapLength([x1, x2, x3, x4], [y1, y2, y3, y4]);\n  }\n  const cubics = divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, 0.5);\n  const left: [\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n  ] = [...cubics[0], iterationCount - 1];\n  const right: [\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n  ] = [...cubics[1], iterationCount - 1];\n  return cubicLength(...left) + cubicLength(...right);\n}\n\nexport function box(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n) {\n  const xArr = [x1, x4];\n  const yArr = [y1, y4];\n  const xExtrema = extrema(x1, x2, x3, x4);\n  const yExtrema = extrema(y1, y2, y3, y4);\n  for (let i = 0; i < xExtrema.length; i++) {\n    xArr.push(cubicAt(x1, x2, x3, x4, xExtrema[i]));\n  }\n  for (let i = 0; i < yExtrema.length; i++) {\n    yArr.push(cubicAt(y1, y2, y3, y4, yExtrema[i]));\n  }\n  return getBBoxByArray(xArr, yArr);\n}\n\nexport function length(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n) {\n  // 迭代三次，划分成 8 段求长度\n  return cubicLength(x1, y1, x2, y2, x3, y3, x4, y4, 3);\n}\n\nexport function nearestPoint(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  x0: number,\n  y0: number,\n  length?: number,\n) {\n  return bezierNearestPoint(\n    [x1, x2, x3, x4],\n    [y1, y2, y3, y4],\n    x0,\n    y0,\n    cubicAt,\n    length,\n  );\n}\n\nexport function pointDistance(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  x0: number,\n  y0: number,\n  length?: number,\n) {\n  const point = nearestPoint(x1, y1, x2, y2, x3, y3, x4, y4, x0, y0, length);\n  return distance(point.x, point.y, x0, y0);\n}\n\nexport function pointAt(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  t: number,\n): Point {\n  return {\n    x: cubicAt(x1, x2, x3, x4, t),\n    y: cubicAt(y1, y2, y3, y4, t),\n  };\n}\n\nexport function divide(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  t: number,\n) {\n  return divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, t);\n}\n\nexport function tangentAngle(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  t: number,\n) {\n  const dx = derivativeAt(x1, x2, x3, x4, t);\n  const dy = derivativeAt(y1, y2, y3, y4, t);\n  return piMod(Math.atan2(dy, dx));\n}\n","import { pointAt, pointDistance } from './line';\nimport type { Point, PointTuple, Segment } from './types';\nimport { distance } from './util';\n\nfunction analyzePoints(points: PointTuple[]) {\n  // 计算每段的长度和总的长度\n  let totalLength = 0;\n  const segments: Segment[] = [];\n  for (let i = 0; i < points.length - 1; i++) {\n    const from = points[i];\n    const to = points[i + 1];\n    const length = distance(from[0], from[1], to[0], to[1]);\n    const seg = {\n      from,\n      to,\n      length,\n    };\n    segments.push(seg);\n    totalLength += length;\n  }\n  return { segments, totalLength };\n}\n\nexport function lengthOfSegment(points: PointTuple[]) {\n  if (points.length < 2) {\n    return 0;\n  }\n  let totalLength = 0;\n  for (let i = 0; i < points.length - 1; i++) {\n    const from = points[i];\n    const to = points[i + 1];\n    totalLength += distance(from[0], from[1], to[0], to[1]);\n  }\n  return totalLength;\n}\n\n/**\n * 按照比例在数据片段中获取点\n * @param {array} points 点的集合\n * @param {number} t 百分比 0-1\n * @return {object} 点的坐标\n */\nexport function pointAtSegments(points: PointTuple[], t: number): Point | null {\n  // 边界判断\n  if (t > 1 || t < 0 || points.length < 2) {\n    return null;\n  }\n  const { segments, totalLength } = analyzePoints(points);\n  // 多个点有可能重合\n  if (totalLength === 0) {\n    return {\n      x: points[0][0],\n      y: points[0][1],\n    };\n  }\n  // 计算比例\n  let startRatio = 0;\n  let point = null;\n  for (let i = 0; i < segments.length; i++) {\n    const seg = segments[i];\n    const { from, to } = seg;\n    const currentRatio = seg.length / totalLength;\n    if (t >= startRatio && t <= startRatio + currentRatio) {\n      const localRatio = (t - startRatio) / currentRatio;\n      point = pointAt(from[0], from[1], to[0], to[1], localRatio);\n      break;\n    }\n    startRatio += currentRatio;\n  }\n  return point;\n}\n\n/**\n * 按照比例在数据片段中获取切线的角度\n * @param {array} points 点的集合\n * @param {number} t 百分比 0-1\n */\nexport function angleAtSegments(points: PointTuple[], t: number) {\n  // 边界判断\n  if (t > 1 || t < 0 || points.length < 2) {\n    return 0;\n  }\n  const { segments, totalLength } = analyzePoints(points);\n  // 计算比例\n  let startRatio = 0;\n  let angle = 0;\n  for (let i = 0; i < segments.length; i++) {\n    const seg = segments[i];\n    const { from, to } = seg;\n    const currentRatio = seg.length / totalLength;\n    if (t >= startRatio && t <= startRatio + currentRatio) {\n      angle = Math.atan2(to[1] - from[1], to[0] - from[0]);\n      break;\n    }\n    startRatio += currentRatio;\n  }\n  return angle;\n}\n\nexport function distanceAtSegment(points: PointTuple[], x: number, y: number) {\n  let minDistance = Infinity;\n  for (let i = 0; i < points.length - 1; i++) {\n    const point = points[i];\n    const nextPoint = points[i + 1];\n    const distance = pointDistance(\n      point[0],\n      point[1],\n      nextPoint[0],\n      nextPoint[1],\n      x,\n      y,\n    );\n    if (distance < minDistance) {\n      minDistance = distance;\n    }\n  }\n  return minDistance;\n}\n","import {\n  angleAtSegments,\n  distanceAtSegment,\n  lengthOfSegment,\n  pointAtSegments,\n} from './segments';\nimport type { BBox, PointTuple } from './types';\nimport { getBBoxByArray } from './util';\n\nexport function box(points: PointTuple[]): BBox {\n  const xArr = [];\n  const yArr = [];\n  for (let i = 0; i < points.length; i++) {\n    const point = points[i];\n    xArr.push(point[0]);\n    yArr.push(point[1]);\n  }\n  return getBBoxByArray(xArr, yArr);\n}\nexport function length(points: PointTuple[]) {\n  return lengthOfSegment(points);\n}\nexport function pointAt(points: PointTuple[], t: number) {\n  return pointAtSegments(points, t);\n}\nexport function pointDistance(points: PointTuple[], x: number, y: number) {\n  return distanceAtSegment(points, x, y);\n}\nexport function tangentAngle(points: PointTuple[], t: number) {\n  return angleAtSegments(points, t);\n}\n","import { box as polylineBox } from './polyline';\nimport {\n  angleAtSegments,\n  distanceAtSegment,\n  lengthOfSegment,\n  pointAtSegments,\n} from './segments';\nimport type { PointTuple } from './types';\n\nfunction getAllPoints(points: PointTuple[]) {\n  const tmp = points.slice(0);\n  if (points.length) {\n    tmp.push(points[0]);\n  }\n  return tmp;\n}\n\nexport function box(points: PointTuple[]) {\n  return polylineBox(points);\n}\nexport function length(points: PointTuple[]) {\n  return lengthOfSegment(getAllPoints(points));\n}\nexport function pointAt(points: PointTuple[], t: number) {\n  return pointAtSegments(getAllPoints(points), t);\n}\nexport function pointDistance(points: PointTuple[], x: number, y: number) {\n  return distanceAtSegment(getAllPoints(points), x, y);\n}\nexport function tangentAngle(points: PointTuple[], t: number) {\n  return angleAtSegments(getAllPoints(points), t);\n}\n","import { isNumberEqual } from '@antv/util';\nimport { nearestPoint as nearestPointBezier } from './bezier';\nimport { pointAt as linePointAt } from './line';\nimport type { Point } from './types';\nimport { distance, getBBoxByArray, piMod } from './util';\n\n// 差值公式\nfunction quadraticAt(p0: number, p1: number, p2: number, t: number) {\n  const onet = 1 - t;\n  return onet * onet * p0 + 2 * t * onet * p1 + t * t * p2;\n}\n\n// 求极值\nfunction extrema(p0: number, p1: number, p2: number) {\n  const a = p0 + p2 - 2 * p1;\n  if (isNumberEqual(a, 0)) {\n    return [0.5];\n  }\n  const rst = (p0 - p1) / a;\n  if (rst <= 1 && rst >= 0) {\n    return [rst];\n  }\n  return [];\n}\n\nfunction derivativeAt(p0: number, p1: number, p2: number, t: number) {\n  return 2 * (1 - t) * (p1 - p0) + 2 * t * (p2 - p1);\n}\n\n// 分割贝塞尔曲线\nfunction divideQuadratic(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  t: number,\n) {\n  // 划分点\n  const xt = quadraticAt(x1, x2, x3, t);\n  const yt = quadraticAt(y1, y2, y3, t);\n\n  // 分割的第一条曲线的控制点\n  const controlPoint1 = linePointAt(x1, y1, x2, y2, t);\n  // 分割的第二条曲线的控制点\n  const controlPoint2 = linePointAt(x2, y2, x3, y3, t);\n  return [\n    [x1, y1, controlPoint1.x, controlPoint1.y, xt, yt],\n    [xt, yt, controlPoint2.x, controlPoint2.y, x3, y3],\n  ];\n}\n\n// 使用迭代法取贝塞尔曲线的长度\nfunction quadraticLength(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  iterationCount: number,\n): number {\n  if (iterationCount === 0) {\n    return (\n      (distance(x1, y1, x2, y2) +\n        distance(x2, y2, x3, y3) +\n        distance(x1, y1, x3, y3)) /\n      2\n    );\n  }\n  const quadratics = divideQuadratic(x1, y1, x2, y2, x3, y3, 0.5);\n  const left = quadratics[0] as [\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n  ];\n  const right = quadratics[1] as [\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n  ];\n  left.push(iterationCount - 1);\n  right.push(iterationCount - 1);\n  return quadraticLength(...left) + quadraticLength(...right);\n}\n\nexport function box(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n) {\n  const xExtrema = extrema(x1, x2, x3)[0];\n  const yExtrema = extrema(y1, y2, y3)[0];\n  // 控制点不加入 box 的计算\n  const xArr = [x1, x3];\n  const yArr = [y1, y3];\n  if (xExtrema !== undefined) {\n    xArr.push(quadraticAt(x1, x2, x3, xExtrema));\n  }\n  if (yExtrema !== undefined) {\n    yArr.push(quadraticAt(y1, y2, y3, yExtrema));\n  }\n  return getBBoxByArray(xArr, yArr);\n}\n\nexport function length(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n) {\n  return quadraticLength(x1, y1, x2, y2, x3, y3, 3);\n}\n\nexport function nearestPoint(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x0: number,\n  y0: number,\n) {\n  return nearestPointBezier([x1, x2, x3], [y1, y2, y3], x0, y0, quadraticAt);\n}\n\nexport function pointDistance(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x0: number,\n  y0: number,\n) {\n  const point = nearestPoint(x1, y1, x2, y2, x3, y3, x0, y0);\n  return distance(point.x, point.y, x0, y0);\n}\n\n// interpolationAt: quadraticAt,\nexport function pointAt(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  t: number,\n): Point {\n  return {\n    x: quadraticAt(x1, x2, x3, t),\n    y: quadraticAt(y1, y2, y3, t),\n  };\n}\n\nexport function divide(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  t: number,\n) {\n  return divideQuadratic(x1, y1, x2, y2, x3, y3, t);\n}\n\nexport function tangentAngle(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  t: number,\n) {\n  const dx = derivativeAt(x1, x2, x3, t);\n  const dy = derivativeAt(y1, y2, y3, t);\n  const angle = Math.atan2(dy, dx);\n  return piMod(angle);\n}\n"],"names":["distance","x1","y1","x2","y2","dx","dy","Math","sqrt","getBBoxByArray","xArr","yArr","minX","min","apply","_toConsumableArray","minY","maxX","max","maxY","x","y","width","height","piMod","angle","PI","copysign","v1","v2","absv","abs","nearestPoint","rx","ry","x0","y0","a","b","relativeX","relativeY","px","py","squareA","squareB","t","nearestX","nearestY","i","cos","sin","ex","pow","ey","rx1","ry1","qx","qy","r","hypot","q","delta_c","asin","delta_t","derivativeXAt","cx","cy","xRotation","startAngle","endAngle","derivativeYAt","xExtrema","atan","tan","yExtrema","xAt","yAt","getAngle","atan2","getPoint","rotate","box","xDim","Infinity","xs","xAngle","push","length","yDim","ys","yAngle","relativeVector","_relativeVector","_slicedToArray","relativePoint","ellipseNearestPoint","vector","tangentAngle","EPSILON","tCallback","d","v0","segNum","increaseRate","interval","_t","concat","d1","count","prev","next","d2","snapLength","totalLength","nextX","nextY","pointAt","pointDistance","cross","lengthSquare","pointToLine","vec2","exactEquals","u","normalize","dot","cubicAt","p0","p1","p2","p3","onet","derivativeAt","extrema","c","extremas","t1","t2","discSqrt","isNumberEqual","disc","divideCubic","x3","y3","x4","y4","xt","yt","c1","linePointAt","c2","c3","c12","c23","cubicLength","iterationCount","cubics","left","right","bezierNearestPoint","point","analyzePoints","points","segments","from","to","seg","lengthOfSegment","pointAtSegments","_analyzePoints","startRatio","currentRatio","localRatio","angleAtSegments","_analyzePoints2","distanceAtSegment","minDistance","nextPoint","getAllPoints","tmp","slice","polylineBox","quadraticAt","rst","divideQuadratic","controlPoint1","controlPoint2","quadraticLength","quadratics","undefined","nearestPointBezier"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9]}},
    {"offset": {"line": 2007, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2013, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-camera-api/src/AdvancedCamera.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-camera-api/src/index.ts"],"sourcesContent":["import {\n  Camera,\n  CameraType,\n  getAngle,\n  createVec3,\n  deg2rad,\n  runtime,\n} from '@antv/g-lite';\nimport { isString, isNumber } from '@antv/util';\nimport { mat4, quat, vec3 } from 'gl-matrix';\nimport type { vec2 } from 'gl-matrix';\nimport type { TypeEasingFunction, Landmark } from '@antv/g-lite';\n\n/**\n * Provides camera action & animation.\n */\nexport class AdvancedCamera extends Camera {\n  /**\n   * switch between multiple landmarks\n   */\n  private landmarks: Landmark[] = [];\n  private landmarkAnimationID: number | undefined;\n\n  /**\n   * Changes the azimuth and elevation with respect to the current camera axes\n   * @param {Number} azimuth the relative azimuth\n   * @param {Number} elevation the relative elevation\n   * @param {Number} roll the relative roll\n   */\n  rotate(azimuth: number, elevation: number, roll: number) {\n    this.relElevation = getAngle(elevation);\n    this.relAzimuth = getAngle(azimuth);\n    this.relRoll = getAngle(roll);\n    this.elevation += this.relElevation;\n    this.azimuth += this.relAzimuth;\n    this.roll += this.relRoll;\n\n    if (this.type === CameraType.EXPLORING) {\n      const rotX = quat.setAxisAngle(\n        quat.create(),\n        [1, 0, 0],\n        deg2rad((this.rotateWorld ? 1 : -1) * this.relElevation),\n      );\n      const rotY = quat.setAxisAngle(\n        quat.create(),\n        [0, 1, 0],\n        deg2rad((this.rotateWorld ? 1 : -1) * this.relAzimuth),\n      );\n\n      const rotZ = quat.setAxisAngle(\n        quat.create(),\n        [0, 0, 1],\n        deg2rad(this.relRoll),\n      );\n      let rotQ = quat.multiply(quat.create(), rotY, rotX);\n      rotQ = quat.multiply(quat.create(), rotQ, rotZ);\n      const rotMatrix = mat4.fromQuat(mat4.create(), rotQ);\n      mat4.translate(this.matrix, this.matrix, [0, 0, -this.distance]);\n      mat4.multiply(this.matrix, this.matrix, rotMatrix);\n      mat4.translate(this.matrix, this.matrix, [0, 0, this.distance]);\n    } else {\n      if (Math.abs(this.elevation) > 90) {\n        return this;\n      }\n      this.computeMatrix();\n    }\n\n    this._getAxes();\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n\n    this._update();\n    return this;\n  }\n\n  /**\n   * 沿水平(right) & 垂直(up)平移相机\n   */\n  pan(tx: number, ty: number) {\n    const coords = createVec3(tx, ty, 0);\n    const pos = vec3.clone(this.position);\n\n    vec3.add(pos, pos, vec3.scale(vec3.create(), this.right, coords[0]));\n    vec3.add(pos, pos, vec3.scale(vec3.create(), this.up, coords[1]));\n\n    this._setPosition(pos);\n\n    this.triggerUpdate();\n\n    return this;\n  }\n\n  /**\n   * 沿 n 轴移动，当距离视点远时移动速度较快，离视点越近速度越慢\n   */\n  dolly(value: number) {\n    const n = this.forward;\n    const pos = vec3.clone(this.position);\n    let step = value * this.dollyingStep;\n    const updatedDistance = this.distance + value * this.dollyingStep;\n\n    // 限制视点距离范围\n    step =\n      Math.max(Math.min(updatedDistance, this.maxDistance), this.minDistance) -\n      this.distance;\n    pos[0] += step * n[0];\n    pos[1] += step * n[1];\n    pos[2] += step * n[2];\n\n    this._setPosition(pos);\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      // 重新计算视点距离\n      this._getDistance();\n    } else if (this.type === CameraType.TRACKING) {\n      // 保持视距，移动视点位置\n      vec3.add(this.focalPoint, pos, this.distanceVector);\n    }\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  cancelLandmarkAnimation() {\n    if (this.landmarkAnimationID !== undefined) {\n      this.canvas.cancelAnimationFrame(this.landmarkAnimationID);\n    }\n  }\n\n  createLandmark(\n    name: string,\n    params: Partial<{\n      position: vec3 | vec2;\n      focalPoint: vec3 | vec2;\n      zoom: number;\n      roll: number;\n    }> = {},\n  ): Landmark {\n    const {\n      position = this.position,\n      focalPoint = this.focalPoint,\n      roll,\n      zoom,\n    } = params;\n\n    const camera = new runtime.CameraContribution() as AdvancedCamera;\n    camera.setType(this.type, undefined);\n    camera.setPosition(\n      position[0],\n      position[1] ?? this.position[1],\n      position[2] ?? this.position[2],\n    );\n    camera.setFocalPoint(\n      focalPoint[0],\n      focalPoint[1] ?? this.focalPoint[1],\n      focalPoint[2] ?? this.focalPoint[2],\n    );\n    camera.setRoll(roll ?? this.roll);\n    camera.setZoom(zoom ?? this.zoom);\n\n    const landmark: Landmark = {\n      name,\n      matrix: mat4.clone(camera.getWorldTransform()),\n      right: vec3.clone(camera.right),\n      up: vec3.clone(camera.up),\n      forward: vec3.clone(camera.forward),\n      position: vec3.clone(camera.getPosition()),\n      focalPoint: vec3.clone(camera.getFocalPoint()),\n      distanceVector: vec3.clone(camera.getDistanceVector()),\n      distance: camera.getDistance(),\n      dollyingStep: camera.getDollyingStep(),\n      azimuth: camera.getAzimuth(),\n      elevation: camera.getElevation(),\n      roll: camera.getRoll(),\n      relAzimuth: camera.relAzimuth,\n      relElevation: camera.relElevation,\n      relRoll: camera.relRoll,\n      zoom: camera.getZoom(),\n    };\n\n    this.landmarks.push(landmark);\n    return landmark;\n  }\n\n  gotoLandmark(\n    name: string | Landmark,\n    options:\n      | number\n      | Partial<{\n          easing: string;\n          easingFunction: TypeEasingFunction;\n          duration: number;\n          onframe: (t: number) => void;\n          onfinish: () => void;\n        }> = {},\n  ) {\n    const landmark = isString(name)\n      ? this.landmarks.find((l) => l.name === name)\n      : name;\n    if (landmark) {\n      const {\n        easing = 'linear',\n        duration = 100,\n        easingFunction = undefined,\n        onfinish = undefined,\n        onframe = undefined,\n      } = isNumber(options) ? { duration: options } : options;\n      const epsilon = 0.01;\n\n      // cancel ongoing animation\n      this.cancelLandmarkAnimation();\n\n      const destPosition = landmark.position;\n      const destFocalPoint = landmark.focalPoint;\n      const destZoom = landmark.zoom;\n      const destRoll = landmark.roll;\n\n      const easingFunc = easingFunction || runtime.EasingFunction(easing);\n\n      let timeStart: number | undefined;\n      const end = () => {\n        this.setFocalPoint(destFocalPoint);\n        this.setPosition(destPosition);\n        this.setRoll(destRoll);\n        this.setZoom(destZoom);\n        this.computeMatrix();\n        this.triggerUpdate();\n        onfinish?.();\n      };\n\n      if (duration === 0) return end();\n\n      const animate = (timestamp: number) => {\n        if (timeStart === undefined) {\n          timeStart = timestamp;\n        }\n        const elapsed = timestamp - timeStart;\n\n        if (elapsed >= duration) {\n          end();\n          return;\n        }\n        // use the same ease function in animation system\n        const t = easingFunc(elapsed / duration);\n\n        const interFocalPoint = vec3.create();\n        const interPosition = vec3.create();\n        let interZoom = 1;\n        let interRoll = 0;\n\n        vec3.lerp(interFocalPoint, this.focalPoint, destFocalPoint, t);\n        vec3.lerp(interPosition, this.position, destPosition, t);\n        interRoll = this.roll * (1 - t) + destRoll * t;\n        interZoom = this.zoom * (1 - t) + destZoom * t;\n\n        this.setFocalPoint(interFocalPoint);\n        this.setPosition(interPosition);\n        this.setRoll(interRoll);\n        this.setZoom(interZoom);\n\n        const dist =\n          vec3.dist(interFocalPoint, destFocalPoint) +\n          vec3.dist(interPosition, destPosition);\n        if (\n          dist <= epsilon &&\n          destZoom === undefined &&\n          destRoll === undefined\n        ) {\n          return end();\n        }\n\n        this.computeMatrix();\n        this.triggerUpdate();\n\n        if (elapsed < duration) {\n          onframe?.(t);\n          this.landmarkAnimationID = this.canvas.requestAnimationFrame(animate);\n        }\n      };\n\n      this.canvas.requestAnimationFrame(animate);\n    }\n  }\n\n  /**\n   * Sets the camera to a distance such that the area covered by the bounding box is viewed.\n   */\n  // shot(displayObject: DisplayObject) {\n  //   const aabb = displayObject.getBounds();\n\n  //   if (!AABB.isEmpty(aabb)) {\n  //     this.setElevation(0);\n  //     this.setAzimuth(0);\n  //     this.setRoll(0);\n\n  //     const { halfExtents, center } = aabb;\n  //     const maxDim = Math.max(halfExtents[0] * 2, halfExtents[1] * 2);\n\n  //     const cc = center.map((c: number) => Math.round(c * 1000) / 1000) as [number, number, number];\n\n  //     if (maxDim !== 0) {\n  //       const d = (1.5 * maxDim) / Math.tan(this.fov * DEG_2_RAD);\n  //       this.setPosition([cc[0], cc[1], cc[2] + d]);\n  //     }\n\n  //     this.setFocalPoint(cc);\n  //   }\n  // }\n}\n","import { runtime } from '@antv/g-lite';\nimport { AdvancedCamera } from './AdvancedCamera';\n\nexport { AdvancedCamera };\n\nruntime.CameraContribution = AdvancedCamera;\n"],"names":["AdvancedCamera","_Camera","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","landmarks","_inherits","_createClass","key","value","rotate","azimuth","elevation","roll","relElevation","getAngle","relAzimuth","relRoll","type","CameraType","EXPLORING","rotX","quat","setAxisAngle","create","deg2rad","rotateWorld","rotY","rotZ","rotQ","multiply","rotMatrix","mat4","fromQuat","translate","matrix","distance","Math","abs","computeMatrix","_getAxes","ORBITING","_getPosition","TRACKING","_getFocalPoint","_update","pan","tx","ty","coords","createVec3","pos","vec3","clone","position","add","scale","right","up","_setPosition","triggerUpdate","dolly","n","forward","step","dollyingStep","updatedDistance","max","min","maxDistance","minDistance","_getDistance","focalPoint","distanceVector","cancelLandmarkAnimation","landmarkAnimationID","undefined","canvas","cancelAnimationFrame","createLandmark","name","_position$","_position$2","_focalPoint$","_focalPoint$2","params","_params$position","_params$focalPoint","zoom","camera","runtime","CameraContribution","setType","setPosition","setFocalPoint","setRoll","setZoom","landmark","getWorldTransform","getPosition","getFocalPoint","getDistanceVector","getDistance","getDollyingStep","getAzimuth","getElevation","getRoll","getZoom","push","gotoLandmark","_this2","options","isString","find","l","_ref","isNumber","duration","_ref$easing","easing","_ref$duration","_ref$easingFunction","easingFunction","_ref$onfinish","onfinish","_ref$onframe","onframe","epsilon","destPosition","destFocalPoint","destZoom","destRoll","easingFunc","EasingFunction","timeStart","end","animate","timestamp","elapsed","t","interFocalPoint","interPosition","interZoom","interRoll","lerp","dist","requestAnimationFrame","Camera"],"mappings":"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","ignoreList":[0,1]}},
    {"offset": {"line": 2270, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2276, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-dom-mutation-observer-api/src/dom/MutationRecord.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-dom-mutation-observer-api/src/dom/MutationObserver.ts"],"sourcesContent":["import type { IElement } from '@antv/g-lite';\n\nexport class MutationRecord {\n  static copy(original: MutationRecord) {\n    const record = new MutationRecord(original.type, original.target);\n    record.addedNodes = original.addedNodes.slice();\n    record.removedNodes = original.removedNodes.slice();\n    record.previousSibling = original.previousSibling;\n    record.nextSibling = original.nextSibling;\n    record.attributeName = original.attributeName;\n    record.attributeNamespace = original.attributeNamespace;\n    record.oldValue = original.oldValue;\n    return record;\n  }\n\n  addedNodes: IElement[] = [];\n  attributeName: string = null;\n  attributeNamespace: string = null;\n  nextSibling: IElement = null;\n  oldValue: string = null;\n  previousSibling: IElement = null;\n  removedNodes: IElement[] = [];\n  constructor(\n    public type: MutationRecordType,\n    public target: IElement,\n  ) {}\n}\n","/* eslint-disable max-classes-per-file */\nimport type { DisplayObject, IElement } from '@antv/g-lite';\nimport { ElementEvent, MutationEvent, runtime } from '@antv/g-lite';\nimport { MutationRecord } from './MutationRecord';\n\nlet uidCounter = 0;\nconst registrationsTable = new WeakMap<IElement, Registration[]>();\n\nexport class Registration {\n  private transientObservedNodes = [];\n\n  constructor(\n    public observer: MutationObserver,\n    public target: IElement,\n    public options?: MutationObserverInit,\n  ) {}\n\n  enqueue(record: MutationRecord) {\n    const { records } = this.observer;\n    const { length } = records;\n\n    // There are cases where we replace the last record with the new record.\n    // For example if the record represents the same mutation we need to use\n    // the one with the oldValue. If we get same record (this can happen as we\n    // walk up the tree) we ignore the new record.\n    if (records.length > 0) {\n      const lastRecord = records[length - 1];\n      const recordToReplaceLast = selectRecord(lastRecord, record);\n      if (recordToReplaceLast) {\n        records[length - 1] = recordToReplaceLast;\n        return;\n      }\n    } else {\n      scheduleCallback(this.observer);\n    }\n\n    records[length] = record;\n  }\n\n  addListeners() {\n    this.addListeners_(this.target);\n  }\n\n  private addListeners_(node: IElement) {\n    const { options } = this;\n    if (options.attributes)\n      node.addEventListener(ElementEvent.ATTR_MODIFIED, this, true);\n\n    // if (options.characterData) node.addEventListener('DOMCharacterDataModified', this, true);\n\n    if (options.childList)\n      node.addEventListener(ElementEvent.INSERTED, this, true);\n\n    if (options.childList || options.subtree)\n      node.addEventListener(ElementEvent.REMOVED, this, true);\n  }\n\n  removeListeners() {\n    this.removeListeners_(this.target);\n  }\n\n  removeListeners_(node: IElement) {\n    const { options } = this;\n    if (options.attributes)\n      node.removeEventListener(ElementEvent.ATTR_MODIFIED, this, true);\n\n    // if (options.characterData) node.removeEventListener('DOMCharacterDataModified', this, true);\n\n    if (options.childList)\n      node.removeEventListener(ElementEvent.INSERTED, this, true);\n\n    if (options.childList || options.subtree)\n      node.removeEventListener(ElementEvent.REMOVED, this, true);\n  }\n\n  /**\n   * Adds a transient observer on node. The transient observer gets removed\n   * next time we deliver the change records.\n   */\n  // addTransientObserver(node: IElement) {\n  //   // Don't add transient observers on the target itself. We already have all\n  //   // the required listeners set up on the target.\n  //   if (node === this.target) return;\n\n  //   this.addListeners_(node);\n  //   this.transientObservedNodes.push(node);\n  //   let registrations = registrationsTable.get(node);\n  //   if (!registrations) registrationsTable.set(node, (registrations = []));\n\n  //   // We know that registrations does not contain this because we already\n  //   // checked if node === this.target.\n  //   registrations.push(this);\n  // }\n\n  removeTransientObservers() {\n    const { transientObservedNodes } = this;\n    this.transientObservedNodes = [];\n\n    transientObservedNodes.forEach(function (node) {\n      // Transient observers are never added to the target.\n      this.removeListeners_(node);\n\n      const registrations = registrationsTable.get(node);\n      for (let i = 0; i < registrations.length; i++) {\n        if (registrations[i] === this) {\n          registrations.splice(i, 1);\n          // Each node can only have one registered observer associated with\n          // this observer.\n          break;\n        }\n      }\n    }, this);\n  }\n\n  handleEvent(e: MutationEvent) {\n    // Stop propagation since we are managing the propagation manually.\n    // This means that other mutation events on the page will not work\n    // correctly but that is by design.\n    e.stopImmediatePropagation();\n\n    let record: MutationRecord;\n    let target: IElement;\n\n    switch (e.type) {\n      case ElementEvent.ATTR_MODIFIED:\n        // http://dom.spec.whatwg.org/#concept-mo-queue-attributes\n\n        const name = e.attrName;\n        // @ts-ignore\n        const namespace = e.relatedNode.namespaceURI;\n        target = e.target as IElement;\n\n        // 1.\n        record = getRecord('attributes', target);\n        record.attributeName = name;\n        record.attributeNamespace = namespace;\n\n        // 2.\n        const oldValue =\n          e.attrChange === MutationEvent.ADDITION ? null : e.prevValue;\n\n        forEachAncestorAndObserverEnqueueRecord(target, (options) => {\n          // 3.1, 4.2\n          if (!options.attributes) return;\n\n          // 3.2, 4.3\n          if (\n            options.attributeFilter &&\n            options.attributeFilter.length &&\n            options.attributeFilter.indexOf(name) === -1 &&\n            options.attributeFilter.indexOf(namespace) === -1\n          ) {\n            return;\n          }\n          // 3.3, 4.4\n          if (options.attributeOldValue) return getRecordWithOldValue(oldValue);\n\n          // 3.4, 4.5\n          return record;\n        });\n\n        break;\n\n      // case 'DOMCharacterDataModified':\n      //   // http://dom.spec.whatwg.org/#concept-mo-queue-characterdata\n      //   var target = e.target;\n\n      //   // 1.\n      //   var record = getRecord('characterData', target);\n\n      //   // 2.\n      //   var oldValue = e.prevValue;\n\n      //   forEachAncestorAndObserverEnqueueRecord(target, function(options) {\n      //     // 3.1, 4.2\n      //     if (!options.characterData)\n      //       return;\n\n      //     // 3.2, 4.3\n      //     if (options.characterDataOldValue)\n      //       return getRecordWithOldValue(oldValue);\n\n      //     // 3.3, 4.4\n      //     return record;\n      //   });\n\n      //   break;\n\n      case ElementEvent.REMOVED:\n      // this.addTransientObserver(e.target as IElement);\n      // Fall through.\n      case ElementEvent.INSERTED:\n        // http://dom.spec.whatwg.org/#concept-mo-queue-childlist\n        target = e.relatedNode;\n        const changedNode = e.target as IElement;\n        let addedNodes: IElement[];\n        let removedNodes: IElement[];\n        if (e.type === ElementEvent.INSERTED) {\n          addedNodes = [changedNode];\n          removedNodes = [];\n        } else {\n          addedNodes = [];\n          removedNodes = [changedNode];\n        }\n        const { previousSibling } = changedNode;\n        const { nextSibling } = changedNode;\n\n        // 1.\n        record = getRecord('childList', target);\n        record.addedNodes = addedNodes;\n        record.removedNodes = removedNodes;\n        record.previousSibling = previousSibling as IElement;\n        record.nextSibling = nextSibling as IElement;\n\n        forEachAncestorAndObserverEnqueueRecord(target, function (options) {\n          // 2.1, 3.2\n          if (!options.childList) return;\n\n          // 2.2, 3.3\n          return record;\n        });\n    }\n\n    clearRecords();\n  }\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n * @see https://github.com/googlearchive/MutationObservers/blob/master/MutationObserver.js\n */\nexport class MutationObserver {\n  nodes: IElement[] = [];\n  records: MutationRecord[] = [];\n  uid = uidCounter++;\n\n  constructor(public callback: MutationCallback) {}\n\n  observe(target: DisplayObject, options?: MutationObserverInit) {\n    // 1.1\n    if (\n      (!options.childList && !options.attributes && !options.characterData) ||\n      // 1.2\n      (options.attributeOldValue && !options.attributes) ||\n      // 1.3\n      (options.attributeFilter &&\n        options.attributeFilter.length &&\n        !options.attributes) ||\n      // 1.4\n      (options.characterDataOldValue && !options.characterData)\n    ) {\n      throw new SyntaxError();\n    }\n\n    let registrations = registrationsTable.get(target);\n    if (!registrations) registrationsTable.set(target, (registrations = []));\n\n    // 2\n    // If target's list of registered observers already includes a registered\n    // observer associated with the context object, replace that registered\n    // observer's options with options.\n    let registration: Registration;\n    for (let i = 0; i < registrations.length; i++) {\n      if (registrations[i].observer === this) {\n        registration = registrations[i];\n        registration.removeListeners();\n        registration.options = options;\n        break;\n      }\n    }\n\n    // 3.\n    // Otherwise, add a new registered observer to target's list of registered\n    // observers with the context object as the observer and options as the\n    // options, and add target to context object's list of nodes on which it\n    // is registered.\n    if (!registration) {\n      registration = new Registration(this, target, options);\n      registrations.push(registration);\n      this.nodes.push(target);\n    }\n\n    registration.addListeners();\n  }\n\n  disconnect() {\n    this.nodes.forEach((node) => {\n      const registrations = registrationsTable.get(node);\n      for (let i = 0; i < registrations.length; i++) {\n        const registration = registrations[i];\n        if (registration.observer === this) {\n          registration.removeListeners();\n          registrations.splice(i, 1);\n          // Each node can only have one registered observer associated with\n          // this observer.\n          break;\n        }\n      }\n    }, this);\n    this.records = [];\n  }\n\n  takeRecords() {\n    const copyOfRecords = this.records;\n    this.records = [];\n    return copyOfRecords;\n  }\n}\n\n// We keep track of the two (possibly one) records used in a single mutation.\nlet currentRecord: MutationRecord;\nlet recordWithOldValue;\n\n/**\n * Creates a record without |oldValue| and caches it as |currentRecord| for\n * later use.\n */\nfunction getRecord(type: MutationRecordType, target: IElement) {\n  return (currentRecord = new MutationRecord(type, target));\n}\n\n/**\n * Gets or creates a record with |oldValue| based in the |currentRecord|\n */\nfunction getRecordWithOldValue(oldValue: any) {\n  if (recordWithOldValue) return recordWithOldValue;\n  recordWithOldValue = MutationRecord.copy(currentRecord);\n  recordWithOldValue.oldValue = oldValue;\n  return recordWithOldValue;\n}\n\nfunction clearRecords() {\n  currentRecord = recordWithOldValue = undefined;\n}\n\n/**\n * Whether the record represents a record from the current\n * mutation event.\n */\nfunction recordRepresentsCurrentMutation(record: MutationRecord) {\n  return record === recordWithOldValue || record === currentRecord;\n}\n\n/**\n * Selects which record, if any, to replace the last record in the queue.\n * This returns |null| if no record should be replaced.\n */\nfunction selectRecord(lastRecord: MutationRecord, newRecord: MutationRecord) {\n  if (lastRecord === newRecord) return lastRecord;\n\n  // Check if the the record we are adding represents the same record. If\n  // so, we keep the one with the oldValue in it.\n  if (recordWithOldValue && recordRepresentsCurrentMutation(lastRecord))\n    return recordWithOldValue;\n\n  return null;\n}\n\nfunction removeTransientObserversFor(observer: MutationObserver) {\n  observer.nodes.forEach((node) => {\n    const registrations = registrationsTable.get(node);\n    if (!registrations) return;\n    registrations.forEach(function (registration) {\n      if (registration.observer === observer)\n        registration.removeTransientObservers();\n    });\n  });\n}\n\n/**\n * This function is used for the \"For each registered observer observer (with\n * observer's options as options) in target's list of registered observers,\n * run these substeps:\" and the \"For each ancestor ancestor of target, and for\n * each registered observer observer (with options options) in ancestor's list\n * of registered observers, run these substeps:\" part of the algorithms. The\n * |options.subtree| is checked to ensure that the callback is called\n * correctly.\n *\n * @param {Node} target\n * @param {function(MutationObserverInit):MutationRecord} callback\n */\nfunction forEachAncestorAndObserverEnqueueRecord(target: IElement, callback) {\n  for (let node = target; node; node = node.parentNode as IElement) {\n    const registrations = registrationsTable.get(node);\n\n    if (registrations) {\n      for (let j = 0; j < registrations.length; j++) {\n        const registration = registrations[j];\n        const { options } = registration;\n\n        // Only target ignores subtree.\n        if (node !== target && !options.subtree) continue;\n\n        const record = callback(options);\n        if (record) registration.enqueue(record);\n      }\n    }\n  }\n}\n\n// This is used to ensure that we never schedule 2 callas to setImmediate\nlet isScheduled = false;\n\n// Keep track of observers that needs to be notified next time.\nlet scheduledObservers: MutationObserver[] = [];\n\n/**\n * Schedules |dispatchCallback| to be called in the future.\n */\nfunction scheduleCallback(observer: MutationObserver) {\n  scheduledObservers.push(observer);\n  if (!isScheduled) {\n    isScheduled = true;\n    // setImmediate(dispatchCallbacks);\n    if (typeof runtime.globalThis !== 'undefined') {\n      runtime.globalThis.setTimeout(dispatchCallbacks);\n    } else {\n      dispatchCallbacks();\n    }\n  }\n}\nfunction dispatchCallbacks() {\n  // http://dom.spec.whatwg.org/#mutation-observers\n\n  isScheduled = false; // Used to allow a new setImmediate call above.\n\n  const observers = scheduledObservers;\n  scheduledObservers = [];\n  // Sort observers based on their creation UID (incremental).\n  observers.sort((o1, o2) => {\n    return o1.uid - o2.uid;\n  });\n\n  let anyNonEmpty = false;\n  observers.forEach(function (observer) {\n    // 2.1, 2.2\n    const queue = observer.takeRecords();\n    // 2.3. Remove all transient registered observers whose observer is mo.\n    removeTransientObserversFor(observer);\n\n    // 2.4\n    if (queue.length) {\n      // @ts-ignore\n      observer.callback(queue, observer);\n      anyNonEmpty = true;\n    }\n  });\n\n  // 3.\n  if (anyNonEmpty) dispatchCallbacks();\n}\n"],"names":["MutationRecord","type","target","_classCallCheck","addedNodes","attributeName","attributeNamespace","nextSibling","oldValue","previousSibling","removedNodes","_createClass","key","value","copy","original","record","slice","uidCounter","registrationsTable","WeakMap","Registration","observer","options","transientObservedNodes","enqueue","records","length","lastRecord","recordToReplaceLast","selectRecord","scheduleCallback","addListeners","addListeners_","node","attributes","addEventListener","ElementEvent","ATTR_MODIFIED","childList","INSERTED","subtree","REMOVED","removeListeners","removeListeners_","removeEventListener","removeTransientObservers","forEach","registrations","get","i","splice","handleEvent","e","stopImmediatePropagation","name","attrName","namespace","relatedNode","namespaceURI","getRecord","attrChange","MutationEvent","ADDITION","prevValue","forEachAncestorAndObserverEnqueueRecord","attributeFilter","indexOf","attributeOldValue","getRecordWithOldValue","changedNode","clearRecords","MutationObserver","callback","nodes","uid","observe","characterData","characterDataOldValue","SyntaxError","set","registration","push","disconnect","_this","takeRecords","copyOfRecords","currentRecord","recordWithOldValue","undefined","recordRepresentsCurrentMutation","newRecord","removeTransientObserversFor","parentNode","j","isScheduled","scheduledObservers","runtime","globalThis","setTimeout","dispatchCallbacks","observers","sort","o1","o2","anyNonEmpty","queue"],"mappings":"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","ignoreList":[0,1]}},
    {"offset": {"line": 2694, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2700, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-web-animations-api/src/dom/AnimationEvent.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-web-animations-api/src/dom/Animation.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-web-animations-api/src/utils/bezier-easing.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-web-animations-api/src/utils/custom-easing.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-web-animations-api/src/utils/animation.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-web-animations-api/src/utils/interpolation.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-web-animations-api/src/dom/AnimationEffectTiming.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-web-animations-api/src/dom/KeyframeList.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-web-animations-api/src/dom/KeyframeEffect.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-web-animations-api/src/dom/AnimationTimeline.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-web-animations-api/src/index.ts"],"sourcesContent":["import type { EventService } from '@antv/g-lite';\nimport { FederatedEvent } from '@antv/g-lite';\nimport type { Animation } from './Animation';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationPlaybackEvent\n */\n// @ts-ignore\nexport class AnimationEvent\n  extends FederatedEvent\n  implements AnimationPlaybackEvent\n{\n  constructor(\n    manager: EventService | null,\n    target: Animation,\n    public currentTime: number | null,\n    public timelineTime: number,\n  ) {\n    super(manager);\n\n    // @ts-ignore\n    this.target = target;\n    this.type = 'finish';\n    this.bubbles = false;\n    // @ts-ignore\n    this.currentTarget = target;\n    this.defaultPrevented = false;\n    this.eventPhase = this.AT_TARGET;\n    this.timeStamp = Date.now();\n    this.currentTime = currentTime;\n    this.timelineTime = timelineTime;\n  }\n}\n","import type { DisplayObject, IAnimation } from '@antv/g-lite';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '@antv/g-lite';\nimport { AnimationEvent } from './AnimationEvent';\nimport type { AnimationTimeline } from './AnimationTimeline';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\nlet sequenceNumber = 0;\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/Animation\n */\nexport class Animation implements IAnimation {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/effect\n   */\n  effect: KeyframeEffect;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/timeline\n   */\n  timeline: AnimationTimeline;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/id\n   */\n  id: string;\n\n  // animation: InternalAnimation | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/pending\n   */\n  get pending() {\n    return (\n      (this._startTime === null && !this._paused && this.playbackRate !== 0) ||\n      this.currentTimePending\n    );\n  }\n  private currentTimePending = false;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n   */\n  // playState: AnimationPlayState;\n  private _idle = true;\n  private _paused = false;\n  private _finishedFlag = true;\n  get playState(): AnimationPlayState {\n    if (this._idle) return 'idle';\n    if (this._isFinished) return 'finished';\n    if (this._paused) return 'paused';\n    return 'running';\n  }\n\n  /**\n   * record previos state\n   */\n  private oldPlayState: AnimationPlayState | 'pending';\n\n  private _holdTime: number;\n\n  private readyPromise: Promise<any> | undefined;\n  private finishedPromise: Promise<any> | undefined;\n  private resolveReadyPromise: Function;\n  private rejectReadyPromise: Function;\n  private resolveFinishedPromise: Function;\n  private rejectFinishedPromise: Function;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/ready\n   * @example\n    animation.pause();\n    animation.ready.then(function() {\n      // Displays 'running'\n      alert(animation.playState);\n    });\n    animation.play();\n   */\n  get ready() {\n    if (!this.readyPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.readyPromise = new Promise((resolve, reject) => {\n        this.resolveReadyPromise = () => {\n          resolve(this);\n        };\n        this.rejectReadyPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (!this.pending) {\n        this.resolveReadyPromise();\n      }\n    }\n    return this.readyPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/finished\n   * @example\n    Promise.all(\n      elem.getAnimations().map(\n        function(animation) {\n          return animation.finished\n        }\n      )\n    ).then(\n      function() {\n        return elem.remove();\n      }\n    );\n   */\n  get finished() {\n    if (!this.finishedPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.finishedPromise = new Promise((resolve, reject) => {\n        this.resolveFinishedPromise = () => {\n          resolve(this);\n        };\n        this.rejectFinishedPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (this.playState === 'finished') {\n        this.resolveFinishedPromise();\n      }\n    }\n    return this.finishedPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/onfinish\n   */\n  onfinish: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/oncancel\n   */\n  oncancel: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * get called after each frame when running\n   */\n  onframe: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/currentTime\n   */\n  private _currentTime = 0;\n  get currentTime(): number | null {\n    this.updatePromises();\n    return this._idle || this.currentTimePending ? null : this._currentTime;\n  }\n  set currentTime(newTime: number | null) {\n    newTime = Number(newTime);\n    if (isNaN(newTime)) return;\n    this.timeline.restart();\n    if (!this._paused && this._startTime !== null) {\n      this._startTime =\n        Number(this.timeline?.currentTime) - newTime / this.playbackRate;\n    }\n    this.currentTimePending = false;\n    if (this._currentTime === newTime) {\n      return;\n    }\n    if (this._idle) {\n      this._idle = false;\n      this._paused = true;\n    }\n    this.tickCurrentTime(newTime, true);\n    this.timeline.applyDirtiedAnimation(this);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/startTime\n   */\n  private _startTime: number | null;\n  get startTime() {\n    return this._startTime;\n  }\n  set startTime(newTime: number | null) {\n    if (newTime !== null) {\n      this.updatePromises();\n      newTime = Number(newTime);\n      if (isNaN(newTime)) return;\n      if (this._paused || this._idle) return;\n      this._startTime = newTime;\n      this.tickCurrentTime(\n        (Number(this.timeline.currentTime) - this._startTime) *\n          this.playbackRate,\n      );\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n    }\n  }\n\n  private _playbackRate = 1;\n  get playbackRate() {\n    return this._playbackRate;\n  }\n  set playbackRate(value: number) {\n    if (value === this._playbackRate) {\n      return;\n    }\n\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n    this._playbackRate = value;\n    this.startTime = null;\n    if (this.playState !== 'paused' && this.playState !== 'idle') {\n      this._finishedFlag = false;\n      this._idle = false;\n      this.ensureAlive();\n      this.timeline.applyDirtiedAnimation(this);\n    }\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  get _isFinished() {\n    return (\n      !this._idle &&\n      ((this._playbackRate > 0 &&\n        Number(this._currentTime) >= this._totalDuration) ||\n        (this._playbackRate < 0 && Number(this._currentTime) <= 0))\n    );\n  }\n\n  _totalDuration: number;\n  get totalDuration() {\n    return this._totalDuration;\n  }\n\n  _inEffect: boolean;\n  _inTimeline = true;\n  get _needsTick() {\n    return this.pending || this.playState === 'running' || !this._finishedFlag;\n  }\n\n  constructor(effect: KeyframeEffect, timeline: AnimationTimeline) {\n    this.effect = effect;\n    effect.animation = this;\n    this.timeline = timeline;\n    this.id = `${sequenceNumber++}`;\n\n    this._inEffect = !!this.effect.update(0);\n    this._totalDuration = Number(this.effect?.getComputedTiming().endTime);\n    this._holdTime = 0;\n    this._paused = false;\n    this.oldPlayState = 'idle';\n    this.updatePromises();\n  }\n\n  /**\n   * state machine,\n   * resolve/reject ready/finished Promise according to current state\n   */\n  updatePromises() {\n    if (this.effect.target?.destroyed) {\n      this.readyPromise = undefined;\n      this.finishedPromise = undefined;\n      return false;\n    }\n    const { oldPlayState } = this;\n    const newPlayState = this.pending ? 'pending' : this.playState;\n    if (this.readyPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectReadyPromise();\n        this.readyPromise = undefined;\n      } else if (oldPlayState === 'pending') {\n        this.resolveReadyPromise();\n      } else if (newPlayState === 'pending') {\n        this.readyPromise = undefined;\n      }\n    }\n    if (this.finishedPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectFinishedPromise();\n        this.finishedPromise = undefined;\n      } else if (newPlayState === 'finished') {\n        this.resolveFinishedPromise();\n      } else if (oldPlayState === 'finished') {\n        this.finishedPromise = undefined;\n      }\n    }\n    this.oldPlayState = newPlayState;\n    return this.readyPromise || this.finishedPromise;\n  }\n\n  play() {\n    this.updatePromises();\n    this._paused = false;\n    if (this._isFinished || this._idle) {\n      this.rewind();\n      this._startTime = null;\n    }\n    this._finishedFlag = false;\n    this._idle = false;\n    this.ensureAlive();\n    this.timeline.applyDirtiedAnimation(this);\n\n    if (this.timeline.animations.indexOf(this) === -1) {\n      this.timeline.animations.push(this);\n    }\n\n    this.updatePromises();\n  }\n\n  pause() {\n    this.updatePromises();\n    if (this.currentTime) {\n      this._holdTime = this.currentTime;\n    }\n\n    if (!this._isFinished && !this._paused && !this._idle) {\n      this.currentTimePending = true;\n    } else if (this._idle) {\n      this.rewind();\n      this._idle = false;\n    }\n    this._startTime = null;\n    this._paused = true;\n\n    this.updatePromises();\n  }\n\n  finish() {\n    this.updatePromises();\n    if (this._idle) return;\n    this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n    this._startTime = this._totalDuration - this.currentTime;\n    this.currentTimePending = false;\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n  }\n\n  cancel() {\n    this.updatePromises();\n    if (!this._inEffect) return;\n    this._inEffect = false;\n    this._idle = true;\n    this._paused = false;\n    this._finishedFlag = true;\n    this._currentTime = 0;\n    this._startTime = null;\n    this.effect.update(null);\n    // effects are invalid after cancellation as the animation state\n    // needs to un-apply.\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n\n    /**\n     * 1. Reject the current finished promise with a DOMException named \"AbortError\".\n     * 2. Let current finished promise be a new promise\n     * @see https://w3c.github.io/csswg-drafts/web-animations-1/#canceling-an-animation-section\n     */\n    // if (this.finishedPromise) {\n    //   this.rejectFinishedPromise();\n    //   this.finishedPromise = undefined;\n    // }\n\n    if (this.oncancel) {\n      const event = new AnimationEvent(\n        null,\n        this,\n        this.currentTime,\n        null,\n      ) as AnimationPlaybackEvent;\n      setTimeout(() => {\n        this.oncancel(event);\n      });\n    }\n  }\n\n  reverse() {\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n\n    this.playbackRate *= -1;\n    this.play();\n\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/updatePlaybackRate\n   */\n  updatePlaybackRate(playbackRate: number): void {\n    this.playbackRate = playbackRate;\n  }\n\n  targetAnimations() {\n    const target = this.effect?.target as unknown as DisplayObject;\n    return target.getAnimations();\n  }\n  markTarget() {\n    const animations = this.targetAnimations();\n    if (animations.indexOf(this) === -1) {\n      animations.push(this);\n    }\n  }\n  unmarkTarget() {\n    const animations = this.targetAnimations();\n    const index = animations.indexOf(this);\n    if (index !== -1) {\n      animations.splice(index, 1);\n    }\n  }\n\n  tick(timelineTime: number, isAnimationFrame: boolean) {\n    if (!this._idle && !this._paused) {\n      if (this._startTime === null) {\n        if (isAnimationFrame) {\n          this.startTime = timelineTime - this._currentTime / this.playbackRate;\n        }\n      } else if (!this._isFinished) {\n        this.tickCurrentTime(\n          (timelineTime - this._startTime) * this.playbackRate,\n        );\n      }\n    }\n\n    if (isAnimationFrame) {\n      this.currentTimePending = false;\n      this.fireEvents(timelineTime);\n    }\n  }\n\n  private rewind() {\n    if (this.playbackRate >= 0) {\n      this.currentTime = 0;\n    } else if (this._totalDuration < Infinity) {\n      this.currentTime = this._totalDuration;\n    } else {\n      throw new Error(\n        'Unable to rewind negative playback rate animation with infinite duration',\n      );\n    }\n  }\n\n  persist(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  addEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n  addEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n\n  addEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  removeEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | EventListenerOptions,\n  ): void;\n  removeEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions,\n  ): void;\n\n  removeEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  dispatchEvent(event: Event): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  onremove: ((this: Animation, ev: Event) => any) | null;\n  // replaceState: AnimationReplaceState;\n  commitStyles(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  private ensureAlive() {\n    // If an animation is playing backwards and is not fill backwards/both\n    // then it should go out of effect when it reaches the start of its\n    // active interval (currentTime === 0).\n    if (this.playbackRate < 0 && this.currentTime === 0) {\n      this._inEffect = !!this.effect?.update(-1);\n    } else {\n      this._inEffect = !!this.effect?.update(this.currentTime);\n    }\n    if (!this._inTimeline && (this._inEffect || !this._finishedFlag)) {\n      this._inTimeline = true;\n      this.timeline.animations.push(this);\n    }\n  }\n\n  private tickCurrentTime(newTime: number, ignoreLimit?: boolean) {\n    if (newTime !== this._currentTime) {\n      this._currentTime = newTime;\n      if (this._isFinished && !ignoreLimit) {\n        this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n      }\n      this.ensureAlive();\n    }\n  }\n\n  private fireEvents(baseTime: number) {\n    if (this._isFinished) {\n      if (!this._finishedFlag) {\n        if (this.onfinish) {\n          const event = new AnimationEvent(\n            null,\n            this,\n            this.currentTime,\n            baseTime,\n          ) as AnimationPlaybackEvent;\n          setTimeout(() => {\n            if (this.onfinish) {\n              this.onfinish(event);\n            }\n          });\n        }\n        this._finishedFlag = true;\n      }\n    } else {\n      if (this.onframe && this.playState === 'running') {\n        const event = new AnimationEvent(\n          null,\n          this,\n          this.currentTime,\n          baseTime,\n        ) as AnimationPlaybackEvent;\n        this.onframe(event);\n      }\n      this._finishedFlag = false;\n    }\n  }\n}\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nexport const NEWTON_ITERATIONS = 4;\nexport const NEWTON_MIN_SLOPE = 0.001;\nexport const SUBDIVISION_PRECISION = 0.0000001;\nexport const SUBDIVISION_MAX_ITERATIONS = 10;\n\nexport const kSplineTableSize = 11;\nexport const kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nexport const float32ArraySupported = typeof Float32Array === 'function';\n\nexport const A = (aA1: number, aA2: number) => 1.0 - 3.0 * aA2 + 3.0 * aA1;\nexport const B = (aA1: number, aA2: number) => 3.0 * aA2 - 6.0 * aA1;\nexport const C = (aA1: number) => 3.0 * aA1;\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nexport const calcBezier = (aT: number, aA1: number, aA2: number) =>\n  ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nexport const getSlope = (aT: number, aA1: number, aA2: number) =>\n  3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\nexport const binarySubdivide = (\n  aX: number,\n  aA: number,\n  aB: number,\n  mX1: number,\n  mX2: number,\n) => {\n  let currentX: number;\n  let currentT: number;\n  let i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) aB = currentT;\n    else aA = currentT;\n  } while (\n    Math.abs(currentX) > SUBDIVISION_PRECISION &&\n    ++i < SUBDIVISION_MAX_ITERATIONS\n  );\n  return currentT;\n};\n\nexport const newtonRaphsonIterate = (\n  aX: number,\n  aGuessT: number,\n  mX1: number,\n  mX2: number,\n) => {\n  for (let i = 0; i < NEWTON_ITERATIONS; ++i) {\n    const currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) return aGuessT;\n\n    const currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n\n  return aGuessT;\n};\n\nexport const bezier = (mX1: number, mY1: number, mX2: number, mY2: number) => {\n  if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1))\n    throw new Error('bezier x values must be in [0, 1] range');\n\n  if (mX1 === mY1 && mX2 === mY2) return (t: number) => t;\n\n  // Precompute samples table\n  const sampleValues = float32ArraySupported\n    ? new Float32Array(kSplineTableSize)\n    : new Array(kSplineTableSize);\n  for (let i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  const getTForX = (aX: number) => {\n    let intervalStart = 0.0;\n    let currentSample = 1;\n    const lastSample = kSplineTableSize - 1;\n\n    for (\n      ;\n      currentSample !== lastSample && sampleValues[currentSample] <= aX;\n      ++currentSample\n    )\n      intervalStart += kSampleStepSize;\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    const dist =\n      (aX - sampleValues[currentSample]) /\n      (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    const guessForT = intervalStart + dist * kSampleStepSize;\n\n    const initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE)\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    if (initialSlope === 0.0) return guessForT;\n\n    return binarySubdivide(\n      aX,\n      intervalStart,\n      intervalStart + kSampleStepSize,\n      mX1,\n      mX2,\n    );\n  };\n\n  return (t: number) => {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (t === 0 || t === 1) return t;\n    return calcBezier(getTForX(t), mY1, mY2);\n  };\n};\n","/**\n * ported from https://github.com/okikio/native/blob/master/packages/animate/src/custom-easing.ts\n */\nimport type { TypeEasingFunction } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\nimport { bezier } from './bezier-easing';\n\nexport const convertToDash = (str: string) => {\n  str = str.replace(/([A-Z])/g, (letter) => `-${letter.toLowerCase()}`);\n\n  // Remove first dash\n  return str.charAt(0) === '-' ? str.substring(1) : str;\n};\n\nexport type TypeColor = string | number | (string | number)[];\nexport type TypeRGBAFunction = (color: TypeColor) => number[];\n\n/**\n  Easing Functions from anime.js, they are tried and true, so, its better to use them instead of other alternatives\n*/\nconst Quad: TypeEasingFunction = (t) => t ** 2;\nconst Cubic: TypeEasingFunction = (t) => t ** 3;\nconst Quart: TypeEasingFunction = (t) => t ** 4;\nconst Quint: TypeEasingFunction = (t) => t ** 5;\nconst Expo: TypeEasingFunction = (t) => t ** 6;\nconst Sine: TypeEasingFunction = (t) => 1 - Math.cos((t * Math.PI) / 2);\nconst Circ: TypeEasingFunction = (t) => 1 - Math.sqrt(1 - t * t);\nconst Back: TypeEasingFunction = (t) => t * t * (3 * t - 2);\n\nconst Bounce: TypeEasingFunction = (t) => {\n  let pow2: number;\n  let b = 4;\n  while (t < ((pow2 = 2 ** --b) - 1) / 11) {}\n  return 1 / 4 ** (3 - b) - 7.5625 * ((pow2 * 3 - 2) / 22 - t) ** 2;\n};\n\nconst Elastic: TypeEasingFunction = (t, params: (string | number)[] = []) => {\n  const [amplitude = 1, period = 0.5] = params;\n  const a = clamp(Number(amplitude), 1, 10);\n  const p = clamp(Number(period), 0.1, 2);\n  if (t === 0 || t === 1) return t;\n  return (\n    -a *\n    2 ** (10 * (t - 1)) *\n    Math.sin(\n      ((t - 1 - (p / (Math.PI * 2)) * Math.asin(1 / a)) * (Math.PI * 2)) / p,\n    )\n  );\n};\n\nconst Spring: TypeEasingFunction = (\n  t: number,\n  params: (string | number)[] = [],\n  duration?: number,\n) => {\n  let [mass = 1, stiffness = 100, damping = 10, velocity = 0] = params;\n\n  mass = clamp(mass as number, 0.1, 1000);\n  stiffness = clamp(stiffness as number, 0.1, 1000);\n  damping = clamp(damping as number, 0.1, 1000);\n  velocity = clamp(velocity as number, 0.1, 1000);\n\n  const w0 = Math.sqrt(stiffness / mass);\n  const zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  const wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  const a = 1;\n  const b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  let progress = duration ? (duration * t) / 1000 : t;\n  if (zeta < 1) {\n    progress =\n      Math.exp(-progress * zeta * w0) *\n      (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n  } else {\n    progress = (a + b * progress) * Math.exp(-progress * w0);\n  }\n\n  if (t === 0 || t === 1) return t;\n  return 1 - progress;\n};\n\n/**\n * Cache the durations at set easing parameters\n */\n// export const EasingDurationCache: Map<string | TypeEasingFunction, number> = new Map();\n\n/**\n * The threshold for an infinite loop\n */\n// const INTINITE_LOOP_LIMIT = 10000;\n\n/** Convert easing parameters to Array of numbers, e.g. \"spring(2, 500)\" to [2, 500] */\n// export const parseEasingParameters = (str: string) => {\n//   const match = /(\\(|\\s)([^)]+)\\)?/.exec(str);\n//   return match\n//     ? match[2].split(',').map((value) => {\n//         const num = parseFloat(value);\n//         return !Number.isNaN(num) ? num : value.trim();\n//       })\n//     : [];\n// };\n\n/**\n * The spring easing function will only look smooth at certain durations, with certain parameters.\n * This functions returns the optimal duration to create a smooth springy animation based on physics\n *\n * Note: it can also be used to determine the optimal duration of other types of easing function, but be careful of 'in-'\n * easing functions, because of the nature of the function it can sometimes create an infinite loop, I suggest only using\n * `getEasingDuration` for `spring`, specifically 'out-spring' and 'spring'\n */\n// export const getEasingDuration = (easing: string | TypeEasingFunction = 'spring') => {\n//   if (EasingDurationCache.has(easing)) return EasingDurationCache.get(easing);\n\n//   // eslint-disable-next-line @typescript-eslint/no-use-before-define\n//   const easingFunction = typeof easing == 'function' ? easing : getEasingFunction(easing as string);\n//   const params = typeof easing == 'function' ? [] : parseEasingParameters(easing);\n//   const frame = 1 / 6;\n\n//   let elapsed = 0;\n//   let rest = 0;\n//   let count = 0;\n\n//   while (++count < INTINITE_LOOP_LIMIT) {\n//     elapsed += frame;\n//     if (easingFunction(elapsed, params, undefined) === 1) {\n//       rest++;\n//       if (rest >= 16) break;\n//     } else {\n//       rest = 0;\n//     }\n//   }\n\n//   const duration = elapsed * frame * 1000;\n//   EasingDurationCache.set(easing, duration);\n//   return duration;\n// };\n\n/**\n  These Easing Functions are based off of the Sozi Project's easing functions\n  https://github.com/sozi-projects/Sozi/blob/d72e44ebd580dc7579d1e177406ad41e632f961d/src/js/player/Timing.js\n*/\nconst Steps: TypeEasingFunction = (t: number, params = []) => {\n  const [steps = 10, type] = params as [number, string];\n  const trunc = type === 'start' ? Math.ceil : Math.floor;\n  return trunc(clamp(t, 0, 1) * steps) / steps;\n};\n\n// @ts-ignore\nconst Bezier: TypeEasingFunction = (t: number, params: number[] = []) => {\n  const [mX1, mY1, mX2, mY2] = params;\n  return bezier(mX1, mY1, mX2, mY2)(t);\n};\n\n/** The default `ease-in` easing function */\nconst easein: TypeEasingFunction = bezier(0.42, 0.0, 1.0, 1.0);\n\n/** Converts easing functions to their `out`counter parts */\nconst EaseOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    1 - ease(1 - t, params, duration);\n};\n\n/** Converts easing functions to their `in-out` counter parts */\nconst EaseInOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    t < 0.5\n      ? ease(t * 2, params, duration) / 2\n      : 1 - ease(t * -2 + 2, params, duration) / 2;\n};\n\n/** Converts easing functions to their `out-in` counter parts */\nconst EaseOutIn = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) => {\n    return t < 0.5\n      ? (1 - ease(1 - t * 2, params, duration)) / 2\n      : (ease(t * 2 - 1, params, duration) + 1) / 2;\n  };\n};\n\n/**\n * The default list of easing functions, do note this is different from {@link EASING}\n */\ntype EasingFunctionType =\n  | 'steps'\n  | 'step-start'\n  | 'step-end'\n  | 'linear'\n  | 'cubic-bezier'\n  | 'ease'\n  | 'in'\n  | 'out'\n  | 'in-out'\n  | 'out-in'\n  | 'in-quad'\n  | 'out-quad'\n  | 'in-out-quad'\n  | 'out-in-quad'\n  | 'in-cubic'\n  | 'out-cubic'\n  | 'in-out-cubic'\n  | 'out-in-cubic'\n  | 'in-quart'\n  | 'out-quart'\n  | 'in-out-quart'\n  | 'out-in-quart'\n  | 'in-quint'\n  | 'out-quint'\n  | 'in-out-quint'\n  | 'out-in-quint'\n  | 'in-expo'\n  | 'out-expo'\n  | 'in-out-expo'\n  | 'out-in-expo'\n  | 'in-sine'\n  | 'out-sine'\n  | 'in-out-sine'\n  | 'out-in-sine'\n  | 'in-circ'\n  | 'out-circ'\n  | 'in-out-circ'\n  | 'out-in-circ'\n  | 'in-back'\n  | 'out-back'\n  | 'in-out-back'\n  | 'out-in-back'\n  | 'in-bounce'\n  | 'out-bounce'\n  | 'in-out-bounce'\n  | 'out-in-bounce'\n  | 'in-elastic'\n  | 'out-elastic'\n  | 'in-out-elastic'\n  | 'out-in-elastic'\n  | 'spring'\n  | 'spring-in'\n  | 'spring-out'\n  | 'spring-in-out'\n  | 'spring-out-in';\nexport const EasingFunctions: Record<EasingFunctionType, TypeEasingFunction> = {\n  steps: Steps,\n  'step-start': (t) => Steps(t, [1, 'start']),\n  'step-end': (t) => Steps(t, [1, 'end']),\n\n  linear: (t) => t,\n  'cubic-bezier': Bezier,\n  ease: (t) => Bezier(t, [0.25, 0.1, 0.25, 1.0]),\n\n  in: easein,\n  out: EaseOut(easein),\n  'in-out': EaseInOut(easein),\n  'out-in': EaseOutIn(easein),\n\n  'in-quad': Quad,\n  'out-quad': EaseOut(Quad),\n  'in-out-quad': EaseInOut(Quad),\n  'out-in-quad': EaseOutIn(Quad),\n\n  'in-cubic': Cubic,\n  'out-cubic': EaseOut(Cubic),\n  'in-out-cubic': EaseInOut(Cubic),\n  'out-in-cubic': EaseOutIn(Cubic),\n\n  'in-quart': Quart,\n  'out-quart': EaseOut(Quart),\n  'in-out-quart': EaseInOut(Quart),\n  'out-in-quart': EaseOutIn(Quart),\n\n  'in-quint': Quint,\n  'out-quint': EaseOut(Quint),\n  'in-out-quint': EaseInOut(Quint),\n  'out-in-quint': EaseOutIn(Quint),\n\n  'in-expo': Expo,\n  'out-expo': EaseOut(Expo),\n  'in-out-expo': EaseInOut(Expo),\n  'out-in-expo': EaseOutIn(Expo),\n\n  'in-sine': Sine,\n  'out-sine': EaseOut(Sine),\n  'in-out-sine': EaseInOut(Sine),\n  'out-in-sine': EaseOutIn(Sine),\n\n  'in-circ': Circ,\n  'out-circ': EaseOut(Circ),\n  'in-out-circ': EaseInOut(Circ),\n  'out-in-circ': EaseOutIn(Circ),\n\n  'in-back': Back,\n  'out-back': EaseOut(Back),\n  'in-out-back': EaseInOut(Back),\n  'out-in-back': EaseOutIn(Back),\n\n  'in-bounce': Bounce,\n  'out-bounce': EaseOut(Bounce),\n  'in-out-bounce': EaseInOut(Bounce),\n  'out-in-bounce': EaseOutIn(Bounce),\n\n  'in-elastic': Elastic,\n  'out-elastic': EaseOut(Elastic),\n  'in-out-elastic': EaseInOut(Elastic),\n  'out-in-elastic': EaseOutIn(Elastic),\n\n  spring: Spring,\n  'spring-in': Spring,\n  'spring-out': EaseOut(Spring),\n  'spring-in-out': EaseInOut(Spring),\n  'spring-out-in': EaseOutIn(Spring),\n};\n\n/**\n * Convert string easing to their proper form\n */\nconst complexEasingSyntax = (ease: string) =>\n  convertToDash(ease)\n    .replace(/^ease-/, '') // Remove the \"ease-\" keyword\n    .replace(/(\\(|\\s).+/, '') // Remove the function brackets and parameters\n    .toLowerCase()\n    .trim();\n\n/** Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful. */\nexport const getEasingFunction = (ease: string) => {\n  return EasingFunctions[complexEasingSyntax(ease)] || EasingFunctions.linear;\n};\n\n// /**\n//  * Allows you to register new easing functions\n//  */\n// export const registerEasingFunction = (key: string, fn: TypeEasingFunction) => {\n//   Object.assign(EasingFunctions, {\n//     [key]: fn,\n//   });\n// };\n\n// /**\n//  * Allows you to register multiple new easing functions\n//  */\n// export const registerEasingFunctions = (...obj: typeof EasingFunctions[]) => {\n//   Object.assign(EasingFunctions, ...obj);\n// };\n","import type { AnimationEffectTiming } from '../dom/AnimationEffectTiming';\nimport { bezier } from './bezier-easing';\nimport { convertToDash, getEasingFunction } from './custom-easing';\n\nexport const linear = (x: number) => {\n  return x;\n};\n\nconst Start = 1;\nconst Middle = 0.5;\nconst End = 0;\n\nfunction step(count: number, pos: number) {\n  return function (x: number) {\n    if (x >= 1) {\n      return 1;\n    }\n    const stepSize = 1 / count;\n    x += pos * stepSize;\n    return x - (x % stepSize);\n  };\n}\n\nconst numberString = '\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*';\nconst cubicBezierRe = new RegExp(\n  `cubic-bezier\\\\(${numberString},${numberString},${numberString},${numberString}\\\\)`,\n);\nconst step1Re = /steps\\(\\s*(\\d+)\\s*\\)/;\nconst step2Re = /steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/;\n\nexport function parseEasingFunction(\n  normalizedEasing: string,\n): (t: number) => number {\n  const cubicData = cubicBezierRe.exec(normalizedEasing);\n  if (cubicData) {\n    // @ts-ignore\n    return bezier(...cubicData.slice(1).map(Number));\n  }\n  const step1Data = step1Re.exec(normalizedEasing);\n  if (step1Data) {\n    return step(Number(step1Data[1]), End);\n  }\n  const step2Data = step2Re.exec(normalizedEasing);\n  if (step2Data) {\n    // @ts-ignore\n    return step(\n      Number(step2Data[1]),\n      { start: Start, middle: Middle, end: End }[step2Data[2]],\n    );\n  }\n  return getEasingFunction(normalizedEasing);\n}\n\nexport function calculateActiveDuration(timing: EffectTiming) {\n  // @ts-ignore\n  return Math.abs(repeatedDuration(timing) / (timing.playbackRate || 1));\n}\n\nfunction repeatedDuration(timing: EffectTiming): number {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-duration\n  if (timing.duration === 0 || timing.iterations === 0) {\n    return 0;\n  }\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration#value\n  // if (timing.duration === 'auto') {\n  //   timing.duration = 0;\n  // }\n\n  return (\n    (timing.duration === 'auto' ? 0 : Number(timing.duration)) *\n    (timing.iterations ?? 1)\n  );\n}\n\nconst PhaseNone = 0;\nconst PhaseBefore = 1;\nconst PhaseAfter = 2;\nconst PhaseActive = 3;\n\nfunction calculatePhase(\n  activeDuration: number,\n  localTime: number | null,\n  timing: AnimationEffectTiming,\n) {\n  // https://drafts.csswg.org/web-animations/#animation-effect-phases-and-states\n  if (localTime === null) {\n    return PhaseNone;\n  }\n\n  const { endTime } = timing;\n  if (localTime < Math.min(timing.delay, endTime)) {\n    return PhaseBefore;\n  }\n  if (\n    localTime >=\n    Math.min(timing.delay + activeDuration + timing.endDelay, endTime)\n  ) {\n    return PhaseAfter;\n  }\n\n  return PhaseActive;\n}\n\nfunction calculateActiveTime(\n  activeDuration: any,\n  fillMode: string,\n  localTime: number,\n  phase: number,\n  delay: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-time\n  switch (phase) {\n    case PhaseBefore:\n      if (fillMode === 'backwards' || fillMode === 'both') return 0;\n      return null;\n    case PhaseActive:\n      return localTime - delay;\n    case PhaseAfter:\n      if (fillMode === 'forwards' || fillMode === 'both') return activeDuration;\n      return null;\n    case PhaseNone:\n      return null;\n  }\n}\n\nfunction calculateOverallProgress(\n  iterationDuration: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationStart: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-overall-progress\n  let overallProgress = iterationStart;\n  if (iterationDuration === 0) {\n    if (phase !== PhaseBefore) {\n      overallProgress += iterations;\n    }\n  } else {\n    overallProgress += activeTime / iterationDuration;\n  }\n  return overallProgress;\n}\n\nfunction calculateSimpleIterationProgress(\n  overallProgress: number,\n  iterationStart: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationDuration: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-simple-iteration-progress\n\n  let simpleIterationProgress =\n    overallProgress === Infinity ? iterationStart % 1 : overallProgress % 1;\n  if (\n    simpleIterationProgress === 0 &&\n    phase === PhaseAfter &&\n    iterations !== 0 &&\n    (activeTime !== 0 || iterationDuration === 0)\n  ) {\n    simpleIterationProgress = 1;\n  }\n  return simpleIterationProgress;\n}\n\nfunction calculateCurrentIteration(\n  phase: number,\n  iterations: number,\n  simpleIterationProgress: number,\n  overallProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-current-iteration\n  if (phase === PhaseAfter && iterations === Infinity) {\n    return Infinity;\n  }\n  if (simpleIterationProgress === 1) {\n    return Math.floor(overallProgress) - 1;\n  }\n  return Math.floor(overallProgress);\n}\n\nfunction calculateDirectedProgress(\n  playbackDirection: string,\n  currentIteration: number,\n  simpleIterationProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-directed-progress\n  let currentDirection = playbackDirection;\n  if (playbackDirection !== 'normal' && playbackDirection !== 'reverse') {\n    let d = currentIteration;\n    if (playbackDirection === 'alternate-reverse') {\n      d += 1;\n    }\n    currentDirection = 'normal';\n    if (d !== Infinity && d % 2 !== 0) {\n      currentDirection = 'reverse';\n    }\n  }\n  if (currentDirection === 'normal') {\n    return simpleIterationProgress;\n  }\n  return 1 - simpleIterationProgress;\n}\n\nexport function calculateIterationProgress(\n  activeDuration: number,\n  localTime: number,\n  timing: AnimationEffectTiming,\n) {\n  const phase = calculatePhase(activeDuration, localTime, timing);\n  const activeTime = calculateActiveTime(\n    activeDuration,\n    timing.fill,\n    localTime,\n    phase,\n    timing.delay,\n  );\n  if (activeTime === null) return null;\n\n  const duration = timing.duration === 'auto' ? 0 : timing.duration;\n  const overallProgress = calculateOverallProgress(\n    duration,\n    phase,\n    timing.iterations,\n    activeTime,\n    timing.iterationStart,\n  );\n  const simpleIterationProgress = calculateSimpleIterationProgress(\n    overallProgress,\n    timing.iterationStart,\n    phase,\n    timing.iterations,\n    activeTime,\n    duration,\n  );\n  const currentIteration = calculateCurrentIteration(\n    phase,\n    timing.iterations,\n    simpleIterationProgress,\n    overallProgress,\n  );\n\n  const directedProgress = calculateDirectedProgress(\n    timing.direction,\n    currentIteration,\n    simpleIterationProgress,\n  );\n\n  timing.currentIteration = currentIteration;\n  timing.progress = directedProgress;\n\n  // https://drafts.csswg.org/web-animations/#calculating-the-transformed-progress\n  // https://drafts.csswg.org/web-animations/#calculating-the-iteration-progress\n  return timing.easingFunction(directedProgress);\n}\n\n/**\n * From: [https://easings.net]\n * Read More about easings on [MDN](https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing)\n */\nexport const EASINGS: Record<string, string> = {\n  in: 'ease-in',\n  out: 'ease-out',\n  'in-out': 'ease-in-out',\n\n  // Sine\n  'in-sine': 'cubic-bezier(0.47, 0, 0.745, 0.715)',\n  'out-sine': 'cubic-bezier(0.39, 0.575, 0.565, 1)',\n  'in-out-sine': 'cubic-bezier(0.445, 0.05, 0.55, 0.95)',\n\n  // Quad\n  'in-quad': 'cubic-bezier(0.55, 0.085, 0.68, 0.53)',\n  'out-quad': 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n  'in-out-quad': 'cubic-bezier(0.455, 0.03, 0.515, 0.955)',\n\n  // Cubic\n  'in-cubic': 'cubic-bezier(0.55, 0.055, 0.675, 0.19)',\n  'out-cubic': 'cubic-bezier(0.215, 0.61, 0.355, 1)',\n  'in-out-cubic': 'cubic-bezier(0.645, 0.045, 0.355, 1)',\n\n  // Quart\n  'in-quart': 'cubic-bezier(0.895, 0.03, 0.685, 0.22)',\n  'out-quart': 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n  'in-out-quart': 'cubic-bezier(0.77, 0, 0.175, 1)',\n\n  // Quint\n  'in-quint': 'cubic-bezier(0.755, 0.05, 0.855, 0.06)',\n  'out-quint': 'cubic-bezier(0.23, 1, 0.32, 1)',\n  'in-out-quint': 'cubic-bezier(0.86, 0, 0.07, 1)',\n\n  // Expo\n  'in-expo': 'cubic-bezier(0.95, 0.05, 0.795, 0.035)',\n  'out-expo': 'cubic-bezier(0.19, 1, 0.22, 1)',\n  'in-out-expo': 'cubic-bezier(1, 0, 0, 1)',\n\n  // Circ\n  'in-circ': 'cubic-bezier(0.6, 0.04, 0.98, 0.335)',\n  'out-circ': 'cubic-bezier(0.075, 0.82, 0.165, 1)',\n  'in-out-circ': 'cubic-bezier(0.785, 0.135, 0.15, 0.86)',\n\n  // Back\n  'in-back': 'cubic-bezier(0.6, -0.28, 0.735, 0.045)',\n  'out-back': 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n  'in-out-back': 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',\n};\nexport const EasingKeys = Object.keys(EASINGS);\n\n/**\n * Converts users input into a usable easing function string\n */\nexport const getEase = (ease: keyof typeof EASINGS = 'ease'): string => {\n  // Convert camelCase strings into dashed strings, then Remove the \"ease-\" keyword\n  const search = convertToDash(ease).replace(/^ease-/, '');\n  return EASINGS[search] || ease;\n};\n","import type {\n  IAnimationEffectTiming,\n  IElement,\n  Interpolatable,\n  TypeEasingFunction,\n} from '@antv/g-lite';\nimport { propertyMetadataCache, runtime } from '@antv/g-lite';\nimport { isNumber } from '@antv/util';\nimport { parseEasingFunction } from './animation';\n\nexport function convertEffectInput(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n  target: IElement | null,\n) {\n  const propertySpecificKeyframeGroups = makePropertySpecificKeyframeGroups(\n    keyframes,\n    timing,\n  );\n  const interpolations = makeInterpolations(\n    propertySpecificKeyframeGroups,\n    target,\n  );\n\n  return function (target: IElement, fraction: number) {\n    if (fraction !== null) {\n      interpolations\n        .filter((interpolation) => {\n          return (\n            fraction >= interpolation.applyFrom &&\n            fraction < interpolation.applyTo\n          );\n        })\n        .forEach((interpolation) => {\n          const offsetFraction = fraction - interpolation.startOffset;\n          const localDuration =\n            interpolation.endOffset - interpolation.startOffset;\n          const scaledLocalTime =\n            localDuration === 0 ? 0 : offsetFraction / localDuration;\n          // apply updated attribute\n          target.setAttribute(\n            interpolation.property,\n            interpolation.interpolation(scaledLocalTime),\n            false,\n            false, // disable memoize\n          );\n\n          // if (interpolation.property === 'visibility') {\n          //   console.log(\n          //     scaledLocalTime,\n          //     interpolation.interpolation(scaledLocalTime),\n          //   );\n          // }\n        });\n    } else {\n      for (const property in propertySpecificKeyframeGroups)\n        if (isNotReservedWord(property)) {\n          // clear attribute\n          target.setAttribute(property, null);\n        }\n    }\n  };\n}\n\ninterface PropertySpecificKeyframe {\n  offset: number | null;\n  computedOffset: number;\n  easing: string;\n  easingFunction: TypeEasingFunction;\n  value: any;\n}\n\nfunction isNotReservedWord(member: string) {\n  return (\n    member !== 'offset' &&\n    member !== 'easing' &&\n    member !== 'composite' &&\n    member !== 'computedOffset'\n  );\n}\n\nfunction makePropertySpecificKeyframeGroups(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n) {\n  const propertySpecificKeyframeGroups: Record<\n    string,\n    PropertySpecificKeyframe[]\n  > = {};\n\n  for (let i = 0; i < keyframes.length; i++) {\n    for (const member in keyframes[i]) {\n      if (isNotReservedWord(member)) {\n        const propertySpecificKeyframe = {\n          offset: keyframes[i].offset,\n          computedOffset: keyframes[i].computedOffset,\n          easing: keyframes[i].easing,\n          easingFunction:\n            parseEasingFunction(keyframes[i].easing) || timing.easingFunction,\n          value: keyframes[i][member],\n        };\n        propertySpecificKeyframeGroups[member] =\n          propertySpecificKeyframeGroups[member] || [];\n        propertySpecificKeyframeGroups[member].push(propertySpecificKeyframe);\n      }\n    }\n  }\n  return propertySpecificKeyframeGroups;\n}\n\nfunction makeInterpolations(\n  propertySpecificKeyframeGroups: Record<string, PropertySpecificKeyframe[]>,\n  target: IElement | null,\n) {\n  const interpolations = [];\n  for (const groupName in propertySpecificKeyframeGroups) {\n    const keyframes = propertySpecificKeyframeGroups[groupName];\n    for (let i = 0; i < keyframes.length - 1; i++) {\n      let startIndex = i;\n      let endIndex = i + 1;\n      const startOffset = keyframes[startIndex].computedOffset;\n      const endOffset = keyframes[endIndex].computedOffset;\n      let applyFrom = startOffset;\n      let applyTo = endOffset;\n\n      if (i === 0) {\n        applyFrom = -Infinity;\n        if (endOffset === 0) {\n          endIndex = startIndex;\n        }\n      }\n      if (i === keyframes.length - 2) {\n        applyTo = Infinity;\n        if (startOffset === 1) {\n          startIndex = endIndex;\n        }\n      }\n\n      interpolations.push({\n        applyFrom,\n        applyTo,\n        startOffset: keyframes[startIndex].computedOffset,\n        endOffset: keyframes[endIndex].computedOffset,\n        easingFunction: keyframes[startIndex].easingFunction,\n        property: groupName,\n        interpolation: propertyInterpolation(\n          groupName,\n          keyframes[startIndex].value,\n          keyframes[endIndex].value,\n          target,\n        ),\n      });\n    }\n  }\n  interpolations.sort((leftInterpolation, rightInterpolation) => {\n    return leftInterpolation.startOffset - rightInterpolation.startOffset;\n  });\n  return interpolations;\n}\n\nconst InterpolationFactory = (\n  from: Interpolatable,\n  to: Interpolatable,\n  convertToString: Function,\n) => {\n  return (f: number) => {\n    const interpolated = interpolate(from, to, f);\n    return isNumber(interpolated)\n      ? interpolated\n      : convertToString(interpolated);\n  };\n};\n\nfunction propertyInterpolation(\n  property: string,\n  left: string | number,\n  right: string | number,\n  target: IElement | null,\n) {\n  const metadata = propertyMetadataCache[property];\n\n  if (metadata && metadata.syntax && metadata.int) {\n    const propertyHandler = runtime.styleValueRegistry.getPropertySyntax(\n      metadata.syntax,\n    );\n\n    if (propertyHandler) {\n      const parser = propertyHandler.parser;\n      const usedLeft = parser ? parser(left, target) : left;\n      const usedRight = parser ? parser(right, target) : right;\n\n      // merger [left, right, n2string()]\n      const interpolationArgs = propertyHandler.mixer(\n        usedLeft,\n        usedRight,\n        target,\n      );\n      if (interpolationArgs) {\n        const interp = InterpolationFactory(\n          // @ts-ignore\n          ...interpolationArgs,\n        );\n        return function (t: number) {\n          if (t === 0) return left;\n          if (t === 1) return right;\n          return interp(t);\n        };\n      }\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return InterpolationFactory(false, true, function (bool: boolean) {\n    return bool ? right : left;\n  });\n}\n\n/**\n * interpolate with number, boolean, number[], boolean[]\n */\nfunction interpolate(\n  from: Interpolatable,\n  to: Interpolatable,\n  f: number,\n): Interpolatable {\n  if (typeof from === 'number' && typeof to === 'number') {\n    return from * (1 - f) + to * f;\n  }\n  if (\n    (typeof from === 'boolean' && typeof to === 'boolean') ||\n    (typeof from === 'string' && typeof to === 'string') // skip string, eg. path ['M', 10, 10]\n  ) {\n    return f < 0.5 ? from : to;\n  }\n\n  if (Array.isArray(from) && Array.isArray(to)) {\n    // interpolate arrays/matrix\n    const fromLength = from.length;\n    const toLength = to.length;\n    const length = Math.max(fromLength, toLength);\n\n    const r: number[] = [];\n    for (let i = 0; i < length; i++) {\n      r.push(\n        interpolate(\n          from[i < fromLength ? i : fromLength - 1],\n          to[i < toLength ? i : toLength - 1],\n          f,\n        ) as number,\n      );\n    }\n    return r;\n  }\n  throw new Error(`Mismatched interpolation arguments ${from}:${to}`);\n}\n","import { linear, parseEasingFunction } from '../utils/animation';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming\n */\nexport class AnimationEffectTiming implements EffectTiming {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/delay\n   */\n  delay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/direction\n   */\n  direction: PlaybackDirection = 'normal';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration\n   */\n  duration: number | 'auto' = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing\n   */\n  private _easing = 'linear';\n  easingFunction = linear;\n  get easing() {\n    return this._easing;\n  }\n  set easing(value: string) {\n    this.easingFunction = parseEasingFunction(value);\n    this._easing = value;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/endDelay\n   */\n  endDelay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/fill\n   */\n  fill: FillMode = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterationStart\n   */\n  iterationStart = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterations\n   */\n  iterations = 1;\n\n  /**\n   * @deprecated\n   */\n  playbackRate: number;\n\n  /**\n   * ref to effect\n   */\n  effect: KeyframeEffect;\n\n  composite: string;\n\n  /**\n   * ComputedEffectTiming\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  activeDuration: number;\n\n  endTime: number;\n\n  currentIteration: number | null = null;\n\n  progress: number | null = null;\n}\n","import { isNil } from '@antv/util';\nimport type { AnimationEffectTiming } from './AnimationEffectTiming';\n\n/**\n * @example\n  {\n    translateY: [200, 300],\n    scale: [1, 10],\n  }\n\n * groups' length can be different, the following config should generate 3 frames:\n  @example\n  {\n    translateY: [200, 300, 400],\n    scale: [1, 10],\n  }\n */\nfunction convertToArrayForm(effectInput: PropertyIndexedKeyframes) {\n  const normalizedEffectInput: Keyframe[] = [];\n\n  for (const property in effectInput) {\n    // skip reserved props\n    if (property in ['easing', 'offset', 'composite']) {\n      continue;\n    }\n\n    // @ts-ignore\n    let values: string[] | (number | null)[] = effectInput[property];\n    if (!Array.isArray(values)) {\n      values = [values];\n    }\n\n    const numKeyframes = values.length;\n    for (let i = 0; i < numKeyframes; i++) {\n      if (!normalizedEffectInput[i]) {\n        const keyframe: Keyframe = {};\n        if ('offset' in effectInput) {\n          keyframe.offset = Number(effectInput.offset);\n        }\n\n        if ('easing' in effectInput) {\n          // @ts-ignore\n          keyframe.easing = effectInput.easing;\n        }\n\n        if ('composite' in effectInput) {\n          // @ts-ignore\n          keyframe.composite = effectInput.composite;\n        }\n        normalizedEffectInput[i] = keyframe;\n      }\n\n      if (values[i] !== undefined && values[i] !== null) {\n        normalizedEffectInput[i][property] = values[i];\n      }\n    }\n  }\n\n  normalizedEffectInput.sort(function (a, b) {\n    return (\n      ((a.computedOffset as number) || 0) - ((b.computedOffset as number) || 0)\n    );\n  });\n  return normalizedEffectInput;\n}\n\nexport function normalizeKeyframes(\n  effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n  timing?: AnimationEffectTiming,\n): ComputedKeyframe[] {\n  if (effectInput === null) {\n    return [];\n  }\n\n  if (!Array.isArray(effectInput)) {\n    effectInput = convertToArrayForm(effectInput);\n  }\n\n  let keyframes = effectInput.map((originalKeyframe) => {\n    const keyframe: Keyframe = {};\n\n    if (timing?.composite) {\n      // This will be auto if the composite operation specified on the effect is being used.\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\n      keyframe.composite = 'auto';\n    }\n\n    for (const member in originalKeyframe) {\n      let memberValue = originalKeyframe[member];\n      if (member === 'offset') {\n        if (memberValue !== null) {\n          memberValue = Number(memberValue);\n          if (!isFinite(memberValue))\n            throw new Error('Keyframe offsets must be numbers.');\n          if (memberValue < 0 || memberValue > 1)\n            throw new Error('Keyframe offsets must be between 0 and 1.');\n          keyframe.computedOffset = memberValue;\n        }\n      } else if (member === 'composite') {\n        // TODO: Support add & accumulate in KeyframeEffect.composite\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite\n        if (\n          ['replace', 'add', 'accumulate', 'auto'].indexOf(\n            memberValue as string,\n          ) === -1\n        ) {\n          throw new Error(`${memberValue} compositing is not supported`);\n        }\n      } else if (member === 'easing') {\n        // TODO: Validate animation-timing-function\n        // @see https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function\n        // memberValue = memberValue;\n        // } else {\n        //   memberValue = '' + memberValue;\n      }\n\n      // assign to keyframe, no need to parse shorthand value\n      keyframe[member] = memberValue;\n    }\n    if (keyframe.offset === undefined) {\n      keyframe.offset = null;\n    }\n    if (keyframe.easing === undefined) {\n      // override with timing.easing\n      keyframe.easing = timing?.easing || 'linear';\n    }\n    if (keyframe.composite === undefined) {\n      keyframe.composite = 'auto';\n    }\n    return keyframe;\n  });\n\n  let everyFrameHasOffset = true;\n  let previousOffset = -Infinity;\n  for (let i = 0; i < keyframes.length; i++) {\n    const { offset } = keyframes[i];\n    if (!isNil(offset)) {\n      if (offset < previousOffset) {\n        throw new TypeError(\n          'Keyframes are not loosely sorted by offset. Sort or specify offsets.',\n        );\n      }\n      previousOffset = offset;\n    } else {\n      everyFrameHasOffset = false;\n    }\n  }\n\n  keyframes = keyframes.filter((keyframe) => {\n    return Number(keyframe.offset) >= 0 && Number(keyframe.offset) <= 1;\n  });\n\n  function spaceKeyframes() {\n    const { length } = keyframes;\n    keyframes[length - 1].computedOffset = Number(\n      keyframes[length - 1].offset ?? 1,\n    );\n    if (length > 1) {\n      keyframes[0].computedOffset = Number(keyframes[0].offset ?? 0);\n    }\n\n    let previousIndex = 0;\n    let previousOffset = Number(keyframes[0].computedOffset);\n    for (let i = 1; i < length; i++) {\n      const offset = keyframes[i].computedOffset;\n      if (!isNil(offset) && !isNil(previousOffset)) {\n        for (let j = 1; j < i - previousIndex; j++)\n          keyframes[previousIndex + j].computedOffset =\n            previousOffset +\n            ((Number(offset) - previousOffset) * j) / (i - previousIndex);\n        previousIndex = i;\n        previousOffset = Number(offset);\n      }\n    }\n  }\n  if (!everyFrameHasOffset) spaceKeyframes();\n\n  return keyframes as ComputedKeyframe[];\n}\n","import { IElement, IKeyframeEffect, runtime } from '@antv/g-lite';\nimport {\n  calculateActiveDuration,\n  calculateIterationProgress,\n  convertEffectInput,\n} from '../utils';\nimport type { Animation } from './Animation';\nimport { AnimationEffectTiming } from './AnimationEffectTiming';\nimport { normalizeKeyframes } from './KeyframeList';\n\nconst fills = 'backwards|forwards|both|none'.split('|');\nconst directions = 'reverse|alternate|alternate-reverse'.split('|');\nexport function makeTiming(\n  timingInput: KeyframeEffectOptions,\n  forGroup: boolean,\n) {\n  const timing = new AnimationEffectTiming();\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    (Object.keys(timingInput) as (keyof EffectTiming)[]).forEach((property) => {\n      if (\n        timingInput[property] !== undefined &&\n        timingInput[property] !== null &&\n        timingInput[property] !== 'auto'\n      ) {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (\n            typeof timingInput[property] !== 'number' ||\n            isNaN(timingInput[property])\n          ) {\n            return;\n          }\n        }\n        if (\n          property === 'fill' &&\n          fills.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        if (\n          property === 'direction' &&\n          directions.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        // @ts-ignore\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n  return timing;\n}\n\nexport function normalizeTimingInput(\n  timingInput: KeyframeEffectOptions | number | undefined,\n  forGroup: boolean,\n) {\n  timingInput = numericTimingToObject(timingInput ?? { duration: 'auto' });\n  return makeTiming(timingInput, forGroup);\n}\n\nexport function numericTimingToObject(\n  timingInput: KeyframeEffectOptions | number,\n) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = { duration: 'auto' };\n    } else {\n      timingInput = { duration: timingInput };\n    }\n  }\n  return timingInput;\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\nexport class KeyframeEffect implements IKeyframeEffect {\n  composite: CompositeOperation = 'replace';\n  iterationComposite: IterationCompositeOperation = 'replace';\n  // pseudoElement: string | null;\n  target: IElement | null;\n\n  animation: Animation | null;\n\n  timing: AnimationEffectTiming;\n  private computedTiming: ComputedEffectTiming;\n\n  normalizedKeyframes: ComputedKeyframe[];\n\n  private timeFraction: number | null;\n\n  private interpolations: (target: IElement, f: number) => void;\n\n  constructor(\n    target: IElement | null,\n    effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n    timingInput?: KeyframeEffectOptions | number,\n  ) {\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(\n      0,\n      this.timing.delay + this.timing.activeDuration + this.timing.endDelay,\n    );\n\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(\n      this.normalizedKeyframes,\n      this.timing,\n      this.target,\n    );\n\n    // 不支持 proxy 时降级成 this.timing\n    const { Proxy } = runtime.globalThis;\n    this.computedTiming = Proxy\n      ? new Proxy<AnimationEffectTiming>(this.timing, {\n          get: (target, prop) => {\n            if (prop === 'duration') {\n              return target.duration === 'auto' ? 0 : target.duration;\n            }\n            if (prop === 'fill') {\n              return target.fill === 'auto' ? 'none' : target.fill;\n            }\n            if (prop === 'localTime') {\n              return (this.animation && this.animation.currentTime) || null;\n            }\n            if (prop === 'currentIteration') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.currentIteration || 0;\n            }\n            if (prop === 'progress') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.progress || 0;\n            }\n            return target[prop];\n          },\n          set: () => {\n            return true;\n          },\n        })\n      : this.timing;\n  }\n\n  applyInterpolations() {\n    this.interpolations(\n      this.target as unknown as IElement,\n      Number(this.timeFraction),\n    );\n  }\n\n  update(localTime: number | null): boolean {\n    if (localTime === null) {\n      return false;\n    }\n    this.timeFraction = calculateIterationProgress(\n      this.timing.activeDuration,\n      localTime,\n      this.timing,\n    );\n    return this.timeFraction !== null;\n  }\n\n  getKeyframes(): ComputedKeyframe[] {\n    return this.normalizedKeyframes;\n  }\n  setKeyframes(keyframes: Keyframe[] | PropertyIndexedKeyframes | null): void {\n    this.normalizedKeyframes = normalizeKeyframes(keyframes);\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  getComputedTiming(): ComputedEffectTiming {\n    return this.computedTiming;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n   */\n  getTiming(): EffectTiming {\n    return this.timing;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n   */\n  updateTiming(timing?: OptionalEffectTiming): void {\n    Object.keys(timing || {}).forEach((name) => {\n      this.timing[name] = timing[name];\n    });\n  }\n}\n","import type {\n  IDocument,\n  IAnimationTimeline,\n  IElement,\n  IAnimation,\n} from '@antv/g-lite';\nimport { Animation } from './Animation';\nimport { KeyframeEffect } from './KeyframeEffect';\n\nexport function compareAnimations(\n  leftAnimation: IAnimation,\n  rightAnimation: IAnimation,\n) {\n  return Number(leftAnimation.id) - Number(rightAnimation.id);\n}\n\n/**\n * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/web-animations-js/index.d.ts\n */\nexport class AnimationTimeline implements IAnimationTimeline {\n  /**\n   * all active animations\n   */\n  animations: Animation[] = [];\n\n  private ticking = false;\n\n  private timelineTicking = false;\n\n  private hasRestartedThisFrame = false;\n\n  animationsWithPromises: Animation[] = [];\n\n  private inTick = false;\n\n  private pendingEffects: (KeyframeEffect | null)[] = [];\n\n  currentTime: number | null = null;\n\n  private rafId = 0;\n  private rafCallbacks: [number, (x: number) => void][] = [];\n\n  private frameId: number;\n\n  constructor(private document: IDocument) {}\n\n  getAnimations() {\n    this.discardAnimations();\n    return this.animations.slice();\n  }\n\n  isTicking() {\n    return this.inTick;\n  }\n\n  play(\n    target: IElement,\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n    options?: number | KeyframeAnimationOptions,\n  ): Animation {\n    const effect = new KeyframeEffect(target, keyframes, options);\n    const animation = new Animation(effect, this);\n    this.animations.push(animation);\n    this.restartWebAnimationsNextTick();\n    animation.updatePromises();\n    animation.play();\n    animation.updatePromises();\n    return animation;\n  }\n\n  // RAF is supposed to be the last script to occur before frame rendering but not\n  // all browsers behave like this. This function is for synchonously updating an\n  // animation's effects whenever its state is mutated by script to work around\n  // incorrect script execution ordering by the browser.\n  applyDirtiedAnimation(animation: Animation) {\n    if (this.inTick) {\n      return;\n    }\n    // update active animations in displayobject\n    animation.markTarget();\n    const animations = animation.targetAnimations();\n    animations.sort(compareAnimations);\n\n    // clear inactive animations\n    const inactiveAnimations = this.tick(\n      Number(this.currentTime),\n      false,\n      animations.slice(),\n    )[1];\n    inactiveAnimations.forEach((animation) => {\n      const index = this.animations.indexOf(animation);\n      if (index !== -1) {\n        this.animations.splice(index, 1);\n      }\n    });\n    this.applyPendingEffects();\n  }\n\n  restart() {\n    if (!this.ticking) {\n      this.ticking = true;\n      this.requestAnimationFrame(() => {});\n      this.hasRestartedThisFrame = true;\n    }\n    return this.hasRestartedThisFrame;\n  }\n\n  destroy() {\n    this.document.defaultView.cancelAnimationFrame(this.frameId);\n  }\n\n  applyPendingEffects() {\n    this.pendingEffects.forEach((effect) => {\n      effect?.applyInterpolations();\n    });\n    this.pendingEffects = [];\n  }\n\n  private updateAnimationsPromises() {\n    this.animationsWithPromises = this.animationsWithPromises.filter(\n      (animation) => {\n        return animation.updatePromises();\n      },\n    );\n  }\n\n  private discardAnimations() {\n    this.updateAnimationsPromises();\n    this.animations = this.animations.filter((animation) => {\n      return (\n        animation.playState !== 'finished' && animation.playState !== 'idle'\n      );\n    });\n  }\n\n  private restartWebAnimationsNextTick() {\n    if (!this.timelineTicking) {\n      this.timelineTicking = true;\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  }\n\n  private webAnimationsNextTick = (t: number) => {\n    this.currentTime = t;\n    this.discardAnimations();\n    if (this.animations.length === 0) {\n      this.timelineTicking = false;\n    } else {\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  };\n\n  private processRafCallbacks = (t: number) => {\n    const processing = this.rafCallbacks;\n    this.rafCallbacks = [];\n    if (t < Number(this.currentTime)) t = Number(this.currentTime);\n    this.animations.sort(compareAnimations);\n    this.animations = this.tick(t, true, this.animations)[0];\n    processing.forEach((entry) => {\n      entry[1](t);\n    });\n    this.applyPendingEffects();\n  };\n\n  private rAF(f: (x: number) => void) {\n    const id = this.rafId++;\n    if (this.rafCallbacks.length === 0) {\n      this.frameId = this.document.defaultView.requestAnimationFrame(\n        this.processRafCallbacks,\n      );\n    }\n    this.rafCallbacks.push([id, f]);\n    return id;\n  }\n\n  private requestAnimationFrame(f: (ts: number) => void) {\n    return this.rAF((x: number) => {\n      this.updateAnimationsPromises();\n      f(x);\n      this.updateAnimationsPromises();\n    });\n  }\n\n  tick(t: number, isAnimationFrame: boolean, updatingAnimations: IAnimation[]) {\n    this.inTick = true;\n    this.hasRestartedThisFrame = false;\n\n    this.currentTime = t;\n    this.ticking = false;\n\n    const newPendingClears: (KeyframeEffect | null)[] = [];\n    const newPendingEffects: (KeyframeEffect | null)[] = [];\n    const activeAnimations: Animation[] = [];\n    const inactiveAnimations: Animation[] = [];\n\n    (updatingAnimations as unknown as Animation[]).forEach((animation) => {\n      animation.tick(t, isAnimationFrame);\n\n      if (!animation._inEffect) {\n        newPendingClears.push(animation.effect);\n        animation.unmarkTarget();\n      } else {\n        newPendingEffects.push(animation.effect);\n        animation.markTarget();\n      }\n\n      if (animation._needsTick) this.ticking = true;\n\n      const alive = animation._inEffect || animation._needsTick;\n      animation._inTimeline = alive;\n      if (alive) {\n        activeAnimations.push(animation);\n      } else {\n        inactiveAnimations.push(animation);\n      }\n    });\n\n    this.pendingEffects.push(...newPendingClears);\n    this.pendingEffects.push(...newPendingEffects);\n\n    if (this.ticking) this.requestAnimationFrame(() => {});\n\n    this.inTick = false;\n    return [activeAnimations, inactiveAnimations];\n  }\n}\n","import { runtime } from '@antv/g-lite';\nimport { AnimationTimeline } from './dom/AnimationTimeline';\nimport { parseEasingFunction } from './utils';\n\nexport * from './dom';\nexport { EasingFunctions } from './utils';\n\nruntime.EasingFunction = parseEasingFunction;\nruntime.AnimationTimeline = AnimationTimeline;\n"],"names":["AnimationEvent","_FederatedEvent","manager","target","currentTime","timelineTime","_this","_classCallCheck","_callSuper","type","bubbles","currentTarget","defaultPrevented","eventPhase","AT_TARGET","timeStamp","Date","now","_inherits","_createClass","FederatedEvent","sequenceNumber","Animation","effect","timeline","_this$effect","currentTimePending","_idle","_paused","_finishedFlag","_currentTime","_playbackRate","_inTimeline","animation","id","concat","_inEffect","update","_totalDuration","Number","getComputedTiming","endTime","_holdTime","oldPlayState","updatePromises","key","get","_startTime","playbackRate","_isFinished","readyPromise","animationsWithPromises","indexOf","push","Promise","resolve","reject","resolveReadyPromise","rejectReadyPromise","Error","pending","_this2","finishedPromise","resolveFinishedPromise","rejectFinishedPromise","playState","set","newTime","isNaN","restart","_this$timeline","tickCurrentTime","applyDirtiedAnimation","value","oldCurrentTime","startTime","ensureAlive","_this$effect$target","destroyed","undefined","newPlayState","play","rewind","animations","pause","finish","cancel","_this3","oncancel","event","setTimeout","reverse","updatePlaybackRate","targetAnimations","_this$effect2","getAnimations","markTarget","unmarkTarget","index","splice","tick","isAnimationFrame","fireEvents","Infinity","persist","ERROR_MSG_METHOD_NOT_IMPLEMENTED","addEventListener","listener","options","removeEventListener","dispatchEvent","commitStyles","_this$effect3","_this$effect4","ignoreLimit","baseTime","_this4","onfinish","onframe","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","i","Math","abs","newtonRaphsonIterate","aGuessT","currentSlope","bezier","mY1","mY2","t","sampleValues","Array","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","convertToDash","str","replace","letter","toLowerCase","charAt","substring","Quad","pow","Cubic","Quart","Quint","Expo","Sine","cos","PI","Circ","sqrt","Back","Bounce","pow2","b","Elastic","params","arguments","length","_params","_slicedToArray","_params$","amplitude","_params$2","period","a","clamp","p","sin","asin","Spring","duration","_params2","_params2$","mass","_params2$2","stiffness","_params2$3","damping","_params2$4","velocity","w0","zeta","wd","progress","exp","Steps","_ref","_ref2","_ref2$","steps","trunc","ceil","floor","Bezier","_params3","easein","EaseOut","ease","EaseInOut","EaseOutIn","EasingFunctions","stepStart","stepEnd","linear","out","spring","complexEasingSyntax","trim","getEasingFunction","x","Start","Middle","End","step","count","pos","stepSize","numberString","cubicBezierRe","RegExp","step1Re","step2Re","parseEasingFunction","normalizedEasing","cubicData","exec","apply","_toConsumableArray","slice","map","step1Data","step2Data","start","middle","end","calculateActiveDuration","timing","repeatedDuration","_timing$iterations","iterations","PhaseNone","PhaseBefore","PhaseAfter","PhaseActive","calculatePhase","activeDuration","localTime","min","delay","endDelay","calculateActiveTime","fillMode","phase","calculateOverallProgress","iterationDuration","activeTime","iterationStart","overallProgress","calculateSimpleIterationProgress","simpleIterationProgress","calculateCurrentIteration","calculateDirectedProgress","playbackDirection","currentIteration","currentDirection","d","calculateIterationProgress","fill","directedProgress","direction","easingFunction","convertEffectInput","keyframes","propertySpecificKeyframeGroups","makePropertySpecificKeyframeGroups","interpolations","makeInterpolations","fraction","filter","interpolation","applyFrom","applyTo","forEach","offsetFraction","startOffset","localDuration","endOffset","scaledLocalTime","setAttribute","property","isNotReservedWord","member","propertySpecificKeyframe","offset","computedOffset","easing","groupName","startIndex","endIndex","propertyInterpolation","sort","leftInterpolation","rightInterpolation","InterpolationFactory","from","to","convertToString","f","interpolated","interpolate","isNumber","left","right","metadata","propertyMetadataCache","syntax","propertyHandler","runtime","styleValueRegistry","getPropertySyntax","parser","usedLeft","usedRight","interpolationArgs","mixer","interp","bool","isArray","fromLength","toLength","max","r","AnimationEffectTiming","_easing","convertToArrayForm","effectInput","normalizedEffectInput","values","numKeyframes","keyframe","composite","normalizeKeyframes","originalKeyframe","memberValue","isFinite","everyFrameHasOffset","previousOffset","isNil","TypeError","spaceKeyframes","_keyframes$offset","_keyframes","_keyframes$0$offset","previousIndex","j","fills","split","directions","makeTiming","timingInput","forGroup","Object","keys","normalizeTimingInput","numericTimingToObject","KeyframeEffect","iterationComposite","normalizedKeyframes","Proxy","globalThis","computedTiming","prop","applyInterpolations","timeFraction","getKeyframes","setKeyframes","getTiming","updateTiming","name","compareAnimations","leftAnimation","rightAnimation","AnimationTimeline","document","ticking","timelineTicking","hasRestartedThisFrame","inTick","pendingEffects","rafId","rafCallbacks","webAnimationsNextTick","discardAnimations","requestAnimationFrame","processRafCallbacks","processing","entry","applyPendingEffects","isTicking","restartWebAnimationsNextTick","inactiveAnimations","destroy","defaultView","cancelAnimationFrame","frameId","updateAnimationsPromises","rAF","updatingAnimations","_this$pendingEffects","_this$pendingEffects2","newPendingClears","newPendingEffects","activeAnimations","_needsTick","alive","EasingFunction"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;;CAEA,GACA,aAAA;AACaA,IAAAA,cAAc,GAAA,WAAA,GAAA,SAAAC,eAAA,EAAA;IAIzB,SAAAD,cAAAA,CACEE,OAA4B,EAC5BC,MAAiB,EACVC,WAA0B,EAC1BC,YAAoB,EAC3B;QAAA,IAAAC,KAAA,CAAA;4KAAAC,UAAAA,AAAA,EAAA,IAAA,EAAAP,cAAA,CAAA,CAAA;QACAM,KAAA,kKAAAE,UAAAA,AAAA,EAAAR,IAAAA,EAAAA,cAAA,EAAA;YAAME,OAAO;SAAA,CAAA,CAAA;QAEb,aAAA;QAAAI,KAAA,CALOF,WAA0B,GAA1BA,WAA0B,CAAA;QAAAE,KAAA,CAC1BD,YAAoB,GAApBA,YAAoB,CAAA;QAK3BC,KAAA,CAAKH,MAAM,GAAGA,MAAM,CAAA;QACpBG,KAAA,CAAKG,IAAI,GAAG,QAAQ,CAAA;QACpBH,KAAA,CAAKI,OAAO,GAAG,KAAK,CAAA;QACpB,aAAA;QACAJ,KAAA,CAAKK,aAAa,GAAGR,MAAM,CAAA;QAC3BG,KAAA,CAAKM,gBAAgB,GAAG,KAAK,CAAA;QAC7BN,KAAA,CAAKO,UAAU,GAAGP,KAAA,CAAKQ,SAAS,CAAA;QAChCR,KAAA,CAAKS,SAAS,GAAGC,IAAI,CAACC,GAAG,EAAE,CAAA;QAC3BX,KAAA,CAAKF,WAAW,GAAGA,WAAW,CAAA;QAC9BE,KAAA,CAAKD,YAAY,GAAGA,YAAY,CAAA;QAAC,OAAAC,KAAA,CAAA;IACnC,CAAA;kKAACY,UAAAA,AAAA,EAAAlB,cAAA,EAAAC,eAAA,CAAA,CAAA;IAAA,wKAAAkB,UAAAA,AAAA,EAAAnB,cAAA,CAAA,CAAA;AAAA,CAAA,6JAtBOoB,iBAAc;ACHxB,IAAIC,cAAc,GAAG,CAAC,CAAA;AAEtB;;CAEA,GACA,IAAaC,SAAS,GAAA,WAAA,GAAA,YAAA;IAyOpB,SAAAA,SAAYC,CAAAA,MAAsB,EAAEC,QAA2B,EAAE;QAAA,IAAAC,YAAA,CAAA;SAAAlB,6KAAAA,AAAA,EAAA,IAAA,EAAAe,SAAA,CAAA,CAAA;QAAA,IA9MzDI,CAAAA,kBAAkB,GAAG,KAAK,CAAA;QAElC;;KAEF,GACE,iCAAA;QAAA,IACQC,CAAAA,KAAK,GAAG,IAAI,CAAA;QAAA,IACZC,CAAAA,OAAO,GAAG,KAAK,CAAA;QAAA,IACfC,CAAAA,aAAa,GAAG,IAAI,CAAA;QAsG5B;;KAEF,GAFE,IAGQC,CAAAA,YAAY,GAAG,CAAC,CAAA;QAAA,IAgDhBC,CAAAA,aAAa,GAAG,CAAC,CAAA;QAAA,IAwCzBC,CAAAA,WAAW,GAAG,IAAI,CAAA;QAMhB,IAAI,CAACT,MAAM,GAAGA,MAAM,CAAA;QACpBA,MAAM,CAACU,SAAS,GAAG,IAAI,CAAA;QACvB,IAAI,CAACT,QAAQ,GAAGA,QAAQ,CAAA;QACxB,IAAI,CAACU,EAAE,GAAA,EAAA,CAAAC,MAAA,CAAMd,cAAc,EAAE,CAAE,CAAA;QAE/B,IAAI,CAACe,SAAS,GAAG,CAAC,CAAC,IAAI,CAACb,MAAM,CAACc,MAAM,CAAC,CAAC,CAAC,CAAA;QACxC,IAAI,CAACC,cAAc,GAAGC,MAAM,CAAA,CAAAd,YAAA,GAAC,IAAI,CAACF,MAAM,MAAA,QAAAE,YAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAXA,YAAA,CAAae,iBAAiB,EAAE,CAACC,OAAO,CAAC,CAAA;QACtE,IAAI,CAACC,SAAS,GAAG,CAAC,CAAA;QAClB,IAAI,CAACd,OAAO,GAAG,KAAK,CAAA;QACpB,IAAI,CAACe,YAAY,GAAG,MAAM,CAAA;QAC1B,IAAI,CAACC,cAAc,EAAE,CAAA;IACvB,CAAA;IAEA;;;GAGF,GAHE,wKAAAzB,UAAAA,AAAA,EAAAG,SAAA,EAAA;QAAA;YAAAuB,GAAA,EAAA,SAAA;YAAAC,GAAA,EAtPA;;KAEF,GAGE;;KAEF,GAGE;;KAEF,GAGE,uCAAA;YAEA;;KAEF,GACE,SAAAA,MAAc;gBACZ,OACG,IAAI,CAACC,UAAU,KAAK,IAAI,IAAI,CAAC,IAAI,CAACnB,OAAO,IAAI,IAAI,CAACoB,YAAY,KAAK,CAAC,IACrE,IAAI,CAACtB,kBAAkB,CAAA;YAE3B,CAAA;QAAC,CAAA;QAAA;YAAAmB,GAAA,EAAA,WAAA;YAAAC,GAAA,EAUD,SAAAA,GAAAA,GAAoC;gBAClC,IAAI,IAAI,CAACnB,KAAK,EAAE,OAAO,MAAM,CAAA;gBAC7B,IAAI,IAAI,CAACsB,WAAW,EAAE,OAAO,UAAU,CAAA;gBACvC,IAAI,IAAI,CAACrB,OAAO,EAAE,OAAO,QAAQ,CAAA;gBACjC,OAAO,SAAS,CAAA;YAClB,CAAA;QAEA,CAAA;QAAA;YAAAiB,GAAA,EAAA,OAAA;YAAAC,GAAA,EAcA;;;;;;;;;KASF,GACE,SAAAA,MAAY;gBAAA,IAAAxC,KAAA,GAAA,IAAA,CAAA;gBACV,IAAI,CAAC,IAAI,CAAC4C,YAAY,EAAE;oBACtB,IAAI,IAAI,CAAC1B,QAAQ,CAAC2B,sBAAsB,CAACC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;wBAC7D,IAAI,CAAC5B,QAAQ,CAAC2B,sBAAsB,CAACE,IAAI,CAAC,IAAI,CAAC,CAAA;oBACjD,CAAA;oBACA,IAAI,CAACH,YAAY,GAAG,IAAII,OAAO,CAAC,SAACC,OAAO,EAAEC,MAAM,EAAK;wBACnDlD,KAAI,CAACmD,mBAAmB,GAAG,YAAM;4BAC/BF,OAAO,CAACjD,KAAI,CAAC,CAAA;yBACd,CAAA;wBACDA,KAAI,CAACoD,kBAAkB,GAAG,YAAM;4BAC9BF,MAAM,CAAC,IAAIG,KAAK,EAAE,CAAC,CAAA;yBACpB,CAAA;oBACH,CAAC,CAAC,CAAA;oBACF,IAAI,CAAC,IAAI,CAACC,OAAO,EAAE;wBACjB,IAAI,CAACH,mBAAmB,EAAE,CAAA;oBAC5B,CAAA;gBACF,CAAA;gBACA,OAAO,IAAI,CAACP,YAAY,CAAA;YAC1B,CAAA;QAEA,CAAA;QAAA;YAAAL,GAAA,EAAA,UAAA;YAAAC,GAAA,EAeA,SAAAA,GAAAA,GAAe;gBAAA,IAAAe,MAAA,GAAA,IAAA,CAAA;gBACb,IAAI,CAAC,IAAI,CAACC,eAAe,EAAE;oBACzB,IAAI,IAAI,CAACtC,QAAQ,CAAC2B,sBAAsB,CAACC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;wBAC7D,IAAI,CAAC5B,QAAQ,CAAC2B,sBAAsB,CAACE,IAAI,CAAC,IAAI,CAAC,CAAA;oBACjD,CAAA;oBACA,IAAI,CAACS,eAAe,GAAG,IAAIR,OAAO,CAAC,SAACC,OAAO,EAAEC,MAAM,EAAK;wBACtDK,MAAI,CAACE,sBAAsB,GAAG,YAAM;4BAClCR,OAAO,CAACM,MAAI,CAAC,CAAA;yBACd,CAAA;wBACDA,MAAI,CAACG,qBAAqB,GAAG,YAAM;4BACjCR,MAAM,CAAC,IAAIG,KAAK,EAAE,CAAC,CAAA;yBACpB,CAAA;oBACH,CAAC,CAAC,CAAA;oBACF,IAAI,IAAI,CAACM,SAAS,KAAK,UAAU,EAAE;wBACjC,IAAI,CAACF,sBAAsB,EAAE,CAAA;oBAC/B,CAAA;gBACF,CAAA;gBACA,OAAO,IAAI,CAACD,eAAe,CAAA;YAC7B,CAAA;QAYA,CAAA;QAAA;YAAAjB,GAAA,EAAA,aAAA;YAAAC,GAAA,EASA,SAAAA,GAAAA,GAAiC;gBAC/B,IAAI,CAACF,cAAc,EAAE,CAAA;gBACrB,OAAO,IAAI,CAACjB,KAAK,IAAI,IAAI,CAACD,kBAAkB,GAAG,IAAI,GAAG,IAAI,CAACI,YAAY,CAAA;aACxE;YAAAoC,GAAA,EACD,SAAAA,GAAgBC,CAAAA,OAAsB,EAAE;gBACtCA,OAAO,GAAG5B,MAAM,CAAC4B,OAAO,CAAC,CAAA;gBACzB,IAAIC,KAAK,CAACD,OAAO,CAAC,EAAE,OAAA;gBACpB,IAAI,CAAC3C,QAAQ,CAAC6C,OAAO,EAAE,CAAA;gBACvB,IAAI,CAAC,IAAI,CAACzC,OAAO,IAAI,IAAI,CAACmB,UAAU,KAAK,IAAI,EAAE;oBAAA,IAAAuB,cAAA,CAAA;oBAC7C,IAAI,CAACvB,UAAU,GACbR,MAAM,CAAA,CAAA+B,cAAA,GAAC,IAAI,CAAC9C,QAAQ,MAAA,IAAA,IAAA8C,cAAA,KAAbA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,cAAA,CAAelE,WAAW,CAAC,GAAG+D,OAAO,GAAG,IAAI,CAACnB,YAAY,CAAA;gBACpE,CAAA;gBACA,IAAI,CAACtB,kBAAkB,GAAG,KAAK,CAAA;gBAC/B,IAAI,IAAI,CAACI,YAAY,KAAKqC,OAAO,EAAE;oBACjC,OAAA;gBACF,CAAA;gBACA,IAAI,IAAI,CAACxC,KAAK,EAAE;oBACd,IAAI,CAACA,KAAK,GAAG,KAAK,CAAA;oBAClB,IAAI,CAACC,OAAO,GAAG,IAAI,CAAA;gBACrB,CAAA;gBACA,IAAI,CAAC2C,eAAe,CAACJ,OAAO,EAAE,IAAI,CAAC,CAAA;gBACnC,IAAI,CAAC3C,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;YAC3C,CAAA;QAEA,CAAA;QAAA;YAAA3B,GAAA,EAAA,WAAA;YAAAC,GAAA,EAIA,SAAAA,GAAAA,GAAgB;gBACd,OAAO,IAAI,CAACC,UAAU,CAAA;aACvB;YAAAmB,GAAA,EACD,SAAAA,GAAcC,CAAAA,OAAsB,EAAE;gBACpC,IAAIA,OAAO,KAAK,IAAI,EAAE;oBACpB,IAAI,CAACvB,cAAc,EAAE,CAAA;oBACrBuB,OAAO,GAAG5B,MAAM,CAAC4B,OAAO,CAAC,CAAA;oBACzB,IAAIC,KAAK,CAACD,OAAO,CAAC,EAAE,OAAA;oBACpB,IAAI,IAAI,CAACvC,OAAO,IAAI,IAAI,CAACD,KAAK,EAAE,OAAA;oBAChC,IAAI,CAACoB,UAAU,GAAGoB,OAAO,CAAA;oBACzB,IAAI,CAACI,eAAe,CAClB,CAAChC,MAAM,CAAC,IAAI,CAACf,QAAQ,CAACpB,WAAW,CAAC,GAAG,IAAI,CAAC2C,UAAU,IAClD,IAAI,CAACC,YACT,CAAC,CAAA;oBACD,IAAI,CAACxB,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;oBACzC,IAAI,CAAC5B,cAAc,EAAE,CAAA;gBACvB,CAAA;YACF,CAAA;QAAC,CAAA;QAAA;YAAAC,GAAA,EAAA,cAAA;YAAAC,GAAA,EAGD,SAAAA,GAAAA,GAAmB;gBACjB,OAAO,IAAI,CAACf,aAAa,CAAA;aAC1B;YAAAmC,GAAA,EACD,SAAAA,GAAiBO,CAAAA,KAAa,EAAE;gBAC9B,IAAIA,KAAK,KAAK,IAAI,CAAC1C,aAAa,EAAE;oBAChC,OAAA;gBACF,CAAA;gBAEA,IAAI,CAACa,cAAc,EAAE,CAAA;gBACrB,IAAM8B,cAAc,GAAG,IAAI,CAACtE,WAAW,CAAA;gBACvC,IAAI,CAAC2B,aAAa,GAAG0C,KAAK,CAAA;gBAC1B,IAAI,CAACE,SAAS,GAAG,IAAI,CAAA;gBACrB,IAAI,IAAI,CAACV,SAAS,KAAK,QAAQ,IAAI,IAAI,CAACA,SAAS,KAAK,MAAM,EAAE;oBAC5D,IAAI,CAACpC,aAAa,GAAG,KAAK,CAAA;oBAC1B,IAAI,CAACF,KAAK,GAAG,KAAK,CAAA;oBAClB,IAAI,CAACiD,WAAW,EAAE,CAAA;oBAClB,IAAI,CAACpD,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;gBAC3C,CAAA;gBACA,IAAIE,cAAc,KAAK,IAAI,EAAE;oBAC3B,IAAI,CAACtE,WAAW,GAAGsE,cAAc,CAAA;gBACnC,CAAA;gBACA,IAAI,CAAC9B,cAAc,EAAE,CAAA;YACvB,CAAA;QAAC,CAAA;QAAA;YAAAC,GAAA,EAAA,aAAA;YAAAC,GAAA,EAED,SAAAA,GAAAA,GAAkB;gBAChB,OACE,CAAC,IAAI,CAACnB,KAAK,IAAA,CACT,IAAI,CAACI,aAAa,GAAG,CAAC,IACtBQ,MAAM,CAAC,IAAI,CAACT,YAAY,CAAC,IAAI,IAAI,CAACQ,cAAc,IAC/C,IAAI,CAACP,aAAa,GAAG,CAAC,IAAIQ,MAAM,CAAC,IAAI,CAACT,YAAY,CAAC,IAAI,CAAE,CAAC,CAAA;YAEjE,CAAA;QAAC,CAAA;QAAA;YAAAe,GAAA,EAAA,eAAA;YAAAC,GAAA,EAGD,SAAAA,GAAAA,GAAoB;gBAClB,OAAO,IAAI,CAACR,cAAc,CAAA;YAC5B,CAAA;QAAC,CAAA;QAAA;YAAAO,GAAA,EAAA,YAAA;YAAAC,GAAA,EAID,SAAAA,GAAAA,GAAiB;gBACf,OAAO,IAAI,CAACc,OAAO,IAAI,IAAI,CAACK,SAAS,KAAK,SAAS,IAAI,CAAC,IAAI,CAACpC,aAAa,CAAA;YAC5E,CAAA;QAAC,CAAA;QAAA;YAAAgB,GAAA,EAAA,gBAAA;YAAA4B,KAAA,EAoBD,SAAA7B,cAAcA,GAAG;gBAAA,IAAAiC,mBAAA,CAAA;gBACf,IAAA,CAAAA,mBAAA,GAAI,IAAI,CAACtD,MAAM,CAACpB,MAAM,MAAA,IAAA,IAAA0E,mBAAA,KAAA,KAAA,CAAA,IAAlBA,mBAAA,CAAoBC,SAAS,EAAE;oBACjC,IAAI,CAAC5B,YAAY,GAAG6B,SAAS,CAAA;oBAC7B,IAAI,CAACjB,eAAe,GAAGiB,SAAS,CAAA;oBAChC,OAAO,KAAK,CAAA;gBACd,CAAA;gBACA,IAAQpC,YAAY,GAAK,IAAI,CAArBA,YAAY,CAAA;gBACpB,IAAMqC,YAAY,GAAG,IAAI,CAACpB,OAAO,GAAG,SAAS,GAAG,IAAI,CAACK,SAAS,CAAA;gBAC9D,IAAI,IAAI,CAACf,YAAY,IAAI8B,YAAY,KAAKrC,YAAY,EAAE;oBACtD,IAAIqC,YAAY,KAAK,MAAM,EAAE;wBAC3B,IAAI,CAACtB,kBAAkB,EAAE,CAAA;wBACzB,IAAI,CAACR,YAAY,GAAG6B,SAAS,CAAA;oBAC/B,CAAC,MAAM,IAAIpC,YAAY,KAAK,SAAS,EAAE;wBACrC,IAAI,CAACc,mBAAmB,EAAE,CAAA;oBAC5B,CAAC,MAAM,IAAIuB,YAAY,KAAK,SAAS,EAAE;wBACrC,IAAI,CAAC9B,YAAY,GAAG6B,SAAS,CAAA;oBAC/B,CAAA;gBACF,CAAA;gBACA,IAAI,IAAI,CAACjB,eAAe,IAAIkB,YAAY,KAAKrC,YAAY,EAAE;oBACzD,IAAIqC,YAAY,KAAK,MAAM,EAAE;wBAC3B,IAAI,CAAChB,qBAAqB,EAAE,CAAA;wBAC5B,IAAI,CAACF,eAAe,GAAGiB,SAAS,CAAA;oBAClC,CAAC,MAAM,IAAIC,YAAY,KAAK,UAAU,EAAE;wBACtC,IAAI,CAACjB,sBAAsB,EAAE,CAAA;oBAC/B,CAAC,MAAM,IAAIpB,YAAY,KAAK,UAAU,EAAE;wBACtC,IAAI,CAACmB,eAAe,GAAGiB,SAAS,CAAA;oBAClC,CAAA;gBACF,CAAA;gBACA,IAAI,CAACpC,YAAY,GAAGqC,YAAY,CAAA;gBAChC,OAAO,IAAI,CAAC9B,YAAY,IAAI,IAAI,CAACY,eAAe,CAAA;YAClD,CAAA;QAAC,CAAA;QAAA;YAAAjB,GAAA,EAAA,MAAA;YAAA4B,KAAA,EAED,SAAAQ,IAAIA,GAAG;gBACL,IAAI,CAACrC,cAAc,EAAE,CAAA;gBACrB,IAAI,CAAChB,OAAO,GAAG,KAAK,CAAA;gBACpB,IAAI,IAAI,CAACqB,WAAW,IAAI,IAAI,CAACtB,KAAK,EAAE;oBAClC,IAAI,CAACuD,MAAM,EAAE,CAAA;oBACb,IAAI,CAACnC,UAAU,GAAG,IAAI,CAAA;gBACxB,CAAA;gBACA,IAAI,CAAClB,aAAa,GAAG,KAAK,CAAA;gBAC1B,IAAI,CAACF,KAAK,GAAG,KAAK,CAAA;gBAClB,IAAI,CAACiD,WAAW,EAAE,CAAA;gBAClB,IAAI,CAACpD,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;gBAEzC,IAAI,IAAI,CAAChD,QAAQ,CAAC2D,UAAU,CAAC/B,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;oBACjD,IAAI,CAAC5B,QAAQ,CAAC2D,UAAU,CAAC9B,IAAI,CAAC,IAAI,CAAC,CAAA;gBACrC,CAAA;gBAEA,IAAI,CAACT,cAAc,EAAE,CAAA;YACvB,CAAA;QAAC,CAAA;QAAA;YAAAC,GAAA,EAAA,OAAA;YAAA4B,KAAA,EAED,SAAAW,KAAKA,GAAG;gBACN,IAAI,CAACxC,cAAc,EAAE,CAAA;gBACrB,IAAI,IAAI,CAACxC,WAAW,EAAE;oBACpB,IAAI,CAACsC,SAAS,GAAG,IAAI,CAACtC,WAAW,CAAA;gBACnC,CAAA;gBAEA,IAAI,CAAC,IAAI,CAAC6C,WAAW,IAAI,CAAC,IAAI,CAACrB,OAAO,IAAI,CAAC,IAAI,CAACD,KAAK,EAAE;oBACrD,IAAI,CAACD,kBAAkB,GAAG,IAAI,CAAA;gBAChC,CAAC,MAAM,IAAI,IAAI,CAACC,KAAK,EAAE;oBACrB,IAAI,CAACuD,MAAM,EAAE,CAAA;oBACb,IAAI,CAACvD,KAAK,GAAG,KAAK,CAAA;gBACpB,CAAA;gBACA,IAAI,CAACoB,UAAU,GAAG,IAAI,CAAA;gBACtB,IAAI,CAACnB,OAAO,GAAG,IAAI,CAAA;gBAEnB,IAAI,CAACgB,cAAc,EAAE,CAAA;YACvB,CAAA;QAAC,CAAA;QAAA;YAAAC,GAAA,EAAA,QAAA;YAAA4B,KAAA,EAED,SAAAY,MAAMA,GAAG;gBACP,IAAI,CAACzC,cAAc,EAAE,CAAA;gBACrB,IAAI,IAAI,CAACjB,KAAK,EAAE,OAAA;gBAChB,IAAI,CAACvB,WAAW,GAAG,IAAI,CAAC2B,aAAa,GAAG,CAAC,GAAG,IAAI,CAACO,cAAc,GAAG,CAAC,CAAA;gBACnE,IAAI,CAACS,UAAU,GAAG,IAAI,CAACT,cAAc,GAAG,IAAI,CAAClC,WAAW,CAAA;gBACxD,IAAI,CAACsB,kBAAkB,GAAG,KAAK,CAAA;gBAC/B,IAAI,CAACF,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;gBAEzC,IAAI,CAAC5B,cAAc,EAAE,CAAA;YACvB,CAAA;QAAC,CAAA;QAAA;YAAAC,GAAA,EAAA,QAAA;YAAA4B,KAAA,EAED,SAAAa,MAAMA,GAAG;gBAAA,IAAAC,MAAA,GAAA,IAAA,CAAA;gBACP,IAAI,CAAC3C,cAAc,EAAE,CAAA;gBACrB,IAAI,CAAC,IAAI,CAACR,SAAS,EAAE,OAAA;gBACrB,IAAI,CAACA,SAAS,GAAG,KAAK,CAAA;gBACtB,IAAI,CAACT,KAAK,GAAG,IAAI,CAAA;gBACjB,IAAI,CAACC,OAAO,GAAG,KAAK,CAAA;gBACpB,IAAI,CAACC,aAAa,GAAG,IAAI,CAAA;gBACzB,IAAI,CAACC,YAAY,GAAG,CAAC,CAAA;gBACrB,IAAI,CAACiB,UAAU,GAAG,IAAI,CAAA;gBACtB,IAAI,CAACxB,MAAM,CAACc,MAAM,CAAC,IAAI,CAAC,CAAA;gBACxB,gEAAA;gBACA,qBAAA;gBACA,IAAI,CAACb,QAAQ,CAACgD,qBAAqB,CAAC,IAAI,CAAC,CAAA;gBAEzC,IAAI,CAAC5B,cAAc,EAAE,CAAA;gBAErB;;;;OAIJ,GACI,8BAAA;gBACA,kCAAA;gBACA,sCAAA;gBACA,IAAA;gBAEA,IAAI,IAAI,CAAC4C,QAAQ,EAAE;oBACjB,IAAMC,KAAK,GAAG,IAAIzF,cAAc,CAC9B,IAAI,EACJ,IAAI,EACJ,IAAI,CAACI,WAAW,EAChB,IACF,CAA2B,CAAA;oBAC3BsF,UAAU,CAAC,YAAM;wBACfH,MAAI,CAACC,QAAQ,CAACC,KAAK,CAAC,CAAA;oBACtB,CAAC,CAAC,CAAA;gBACJ,CAAA;YACF,CAAA;QAAC,CAAA;QAAA;YAAA5C,GAAA,EAAA,SAAA;YAAA4B,KAAA,EAED,SAAAkB,OAAOA,GAAG;gBACR,IAAI,CAAC/C,cAAc,EAAE,CAAA;gBACrB,IAAM8B,cAAc,GAAG,IAAI,CAACtE,WAAW,CAAA;gBAEvC,IAAI,CAAC4C,YAAY,IAAI,CAAC,CAAC,CAAA;gBACvB,IAAI,CAACiC,IAAI,EAAE,CAAA;gBAEX,IAAIP,cAAc,KAAK,IAAI,EAAE;oBAC3B,IAAI,CAACtE,WAAW,GAAGsE,cAAc,CAAA;gBACnC,CAAA;gBACA,IAAI,CAAC9B,cAAc,EAAE,CAAA;YACvB,CAAA;QAEA,CAAA;QAAA;YAAAC,GAAA,EAAA,oBAAA;YAAA4B,KAAA,EAGA,SAAAmB,kBAAkBA,CAAC5C,YAAoB,EAAQ;gBAC7C,IAAI,CAACA,YAAY,GAAGA,YAAY,CAAA;YAClC,CAAA;QAAC,CAAA;QAAA;YAAAH,GAAA,EAAA,kBAAA;YAAA4B,KAAA,EAED,SAAAoB,gBAAgBA,GAAG;gBAAA,IAAAC,aAAA,CAAA;gBACjB,IAAM3F,MAAM,GAAA,CAAA2F,aAAA,GAAG,IAAI,CAACvE,MAAM,MAAA,IAAA,IAAAuE,aAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAXA,aAAA,CAAa3F,MAAkC,CAAA;gBAC9D,OAAOA,MAAM,CAAC4F,aAAa,EAAE,CAAA;YAC/B,CAAA;QAAC,CAAA;QAAA;YAAAlD,GAAA,EAAA,YAAA;YAAA4B,KAAA,EACD,SAAAuB,UAAUA,GAAG;gBACX,IAAMb,UAAU,GAAG,IAAI,CAACU,gBAAgB,EAAE,CAAA;gBAC1C,IAAIV,UAAU,CAAC/B,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;oBACnC+B,UAAU,CAAC9B,IAAI,CAAC,IAAI,CAAC,CAAA;gBACvB,CAAA;YACF,CAAA;QAAC,CAAA;QAAA;YAAAR,GAAA,EAAA,cAAA;YAAA4B,KAAA,EACD,SAAAwB,YAAYA,GAAG;gBACb,IAAMd,UAAU,GAAG,IAAI,CAACU,gBAAgB,EAAE,CAAA;gBAC1C,IAAMK,KAAK,GAAGf,UAAU,CAAC/B,OAAO,CAAC,IAAI,CAAC,CAAA;gBACtC,IAAI8C,KAAK,KAAK,CAAC,CAAC,EAAE;oBAChBf,UAAU,CAACgB,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC,CAAA;gBAC7B,CAAA;YACF,CAAA;QAAC,CAAA;QAAA;YAAArD,GAAA,EAAA,MAAA;YAAA4B,KAAA,EAED,SAAA2B,IAAIA,CAAC/F,YAAoB,EAAEgG,gBAAyB,EAAE;gBACpD,IAAI,CAAC,IAAI,CAAC1E,KAAK,IAAI,CAAC,IAAI,CAACC,OAAO,EAAE;oBAChC,IAAI,IAAI,CAACmB,UAAU,KAAK,IAAI,EAAE;wBAC5B,IAAIsD,gBAAgB,EAAE;4BACpB,IAAI,CAAC1B,SAAS,GAAGtE,YAAY,GAAG,IAAI,CAACyB,YAAY,GAAG,IAAI,CAACkB,YAAY,CAAA;wBACvE,CAAA;oBACF,CAAC,MAAM,IAAI,CAAC,IAAI,CAACC,WAAW,EAAE;wBAC5B,IAAI,CAACsB,eAAe,CAClB,CAAClE,YAAY,GAAG,IAAI,CAAC0C,UAAU,IAAI,IAAI,CAACC,YAC1C,CAAC,CAAA;oBACH,CAAA;gBACF,CAAA;gBAEA,IAAIqD,gBAAgB,EAAE;oBACpB,IAAI,CAAC3E,kBAAkB,GAAG,KAAK,CAAA;oBAC/B,IAAI,CAAC4E,UAAU,CAACjG,YAAY,CAAC,CAAA;gBAC/B,CAAA;YACF,CAAA;QAAC,CAAA;QAAA;YAAAwC,GAAA,EAAA,QAAA;YAAA4B,KAAA,EAED,SAAQS,MAAMA,GAAG;gBACf,IAAI,IAAI,CAAClC,YAAY,IAAI,CAAC,EAAE;oBAC1B,IAAI,CAAC5C,WAAW,GAAG,CAAC,CAAA;gBACtB,CAAC,MAAM,IAAI,IAAI,CAACkC,cAAc,GAAGiE,QAAQ,EAAE;oBACzC,IAAI,CAACnG,WAAW,GAAG,IAAI,CAACkC,cAAc,CAAA;gBACxC,CAAC,MAAM;oBACL,MAAM,IAAIqB,KAAK,CACb,0EACF,CAAC,CAAA;gBACH,CAAA;YACF,CAAA;QAAC,CAAA;QAAA;YAAAd,GAAA,EAAA,SAAA;YAAA4B,KAAA,EAED,SAAA+B,OAAOA,GAAS;gBACd,MAAM,IAAI7C,KAAK,6JAAC8C,mCAAgC,CAAC,CAAA;YACnD,CAAA;QAAC,CAAA;QAAA;YAAA5D,GAAA,EAAA,kBAAA;YAAA4B,KAAA,EAaD,SAAAiC,gBAAgBA,CAACjG,IAAS,EAAEkG,QAAa,EAAEC,OAAa,EAAQ;gBAC9D,MAAM,IAAIjD,KAAK,6JAAC8C,mCAAgC,CAAC,CAAA;YACnD,CAAA;QAAC,CAAA;QAAA;YAAA5D,GAAA,EAAA,qBAAA;YAAA4B,KAAA,EAYD,SAAAoC,mBAAmBA,CAACpG,IAAS,EAAEkG,QAAa,EAAEC,OAAa,EAAQ;gBACjE,MAAM,IAAIjD,KAAK,6JAAC8C,mCAAgC,CAAC,CAAA;YACnD,CAAA;QAAC,CAAA;QAAA;YAAA5D,GAAA,EAAA,eAAA;YAAA4B,KAAA,EAED,SAAAqC,aAAaA,CAACrB,KAAY,EAAW;gBACnC,MAAM,IAAI9B,KAAK,6JAAC8C,mCAAgC,CAAC,CAAA;YACnD,CAAA;QAAC,CAAA;QAAA;YAAA5D,GAAA,EAAA,cAAA;YAAA4B,KAAA,EAED,uCAAA;YACA,SAAAsC,YAAYA,GAAS;gBACnB,MAAM,IAAIpD,KAAK,6JAAC8C,mCAAgC,CAAC,CAAA;YACnD,CAAA;QAAC,CAAA;QAAA;YAAA5D,GAAA,EAAA,aAAA;YAAA4B,KAAA,EAED,SAAQG,WAAWA,GAAG;gBACpB,sEAAA;gBACA,mEAAA;gBACA,uCAAA;gBACA,IAAI,IAAI,CAAC5B,YAAY,GAAG,CAAC,IAAI,IAAI,CAAC5C,WAAW,KAAK,CAAC,EAAE;oBAAA,IAAA4G,aAAA,CAAA;oBACnD,IAAI,CAAC5E,SAAS,GAAG,CAAC,CAAA,CAAA4E,CAAAA,aAAA,GAAC,IAAI,CAACzF,MAAM,MAAAyF,IAAAA,IAAAA,aAAA,KAAA,KAAA,KAAXA,aAAA,CAAa3E,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA,CAAA;gBAC5C,CAAC,MAAM;oBAAA,IAAA4E,aAAA,CAAA;oBACL,IAAI,CAAC7E,SAAS,GAAG,CAAC,CAAA,CAAA,CAAA6E,aAAA,GAAC,IAAI,CAAC1F,MAAM,MAAA,QAAA0F,aAAA,KAAA,KAAA,CAAA,IAAXA,aAAA,CAAa5E,MAAM,CAAC,IAAI,CAACjC,WAAW,CAAC,CAAA,CAAA;gBAC1D,CAAA;gBACA,IAAI,CAAC,IAAI,CAAC4B,WAAW,IAAA,CAAK,IAAI,CAACI,SAAS,IAAI,CAAC,IAAI,CAACP,aAAa,CAAC,EAAE;oBAChE,IAAI,CAACG,WAAW,GAAG,IAAI,CAAA;oBACvB,IAAI,CAACR,QAAQ,CAAC2D,UAAU,CAAC9B,IAAI,CAAC,IAAI,CAAC,CAAA;gBACrC,CAAA;YACF,CAAA;QAAC,CAAA;QAAA;YAAAR,GAAA,EAAA,iBAAA;YAAA4B,KAAA,EAED,SAAQF,eAAeA,CAACJ,OAAe,EAAE+C,WAAqB,EAAE;gBAC9D,IAAI/C,OAAO,KAAK,IAAI,CAACrC,YAAY,EAAE;oBACjC,IAAI,CAACA,YAAY,GAAGqC,OAAO,CAAA;oBAC3B,IAAI,IAAI,CAAClB,WAAW,IAAI,CAACiE,WAAW,EAAE;wBACpC,IAAI,CAACpF,YAAY,GAAG,IAAI,CAACC,aAAa,GAAG,CAAC,GAAG,IAAI,CAACO,cAAc,GAAG,CAAC,CAAA;oBACtE,CAAA;oBACA,IAAI,CAACsC,WAAW,EAAE,CAAA;gBACpB,CAAA;YACF,CAAA;QAAC,CAAA;QAAA;YAAA/B,GAAA,EAAA,YAAA;YAAA4B,KAAA,EAED,SAAQ6B,UAAUA,CAACa,QAAgB,EAAE;gBAAA,IAAAC,MAAA,GAAA,IAAA,CAAA;gBACnC,IAAI,IAAI,CAACnE,WAAW,EAAE;oBACpB,IAAI,CAAC,IAAI,CAACpB,aAAa,EAAE;wBACvB,IAAI,IAAI,CAACwF,QAAQ,EAAE;4BACjB,IAAM5B,KAAK,GAAG,IAAIzF,cAAc,CAC9B,IAAI,EACJ,IAAI,EACJ,IAAI,CAACI,WAAW,EAChB+G,QACF,CAA2B,CAAA;4BAC3BzB,UAAU,CAAC,YAAM;gCACf,IAAI0B,MAAI,CAACC,QAAQ,EAAE;oCACjBD,MAAI,CAACC,QAAQ,CAAC5B,KAAK,CAAC,CAAA;gCACtB,CAAA;4BACF,CAAC,CAAC,CAAA;wBACJ,CAAA;wBACA,IAAI,CAAC5D,aAAa,GAAG,IAAI,CAAA;oBAC3B,CAAA;gBACF,CAAC,MAAM;oBACL,IAAI,IAAI,CAACyF,OAAO,IAAI,IAAI,CAACrD,SAAS,KAAK,SAAS,EAAE;wBAChD,IAAMwB,MAAK,GAAG,IAAIzF,cAAc,CAC9B,IAAI,EACJ,IAAI,EACJ,IAAI,CAACI,WAAW,EAChB+G,QACF,CAA2B,CAAA;wBAC3B,IAAI,CAACG,OAAO,CAAC7B,MAAK,CAAC,CAAA;oBACrB,CAAA;oBACA,IAAI,CAAC5D,aAAa,GAAG,KAAK,CAAA;gBAC5B,CAAA;YACF,CAAA;QAAC,CAAA;KAAA,CAAA,CAAA;AAAA,CAAA;ACniBH;;;;CAIA,GAEA,6FAAA;AACO,IAAM0F,iBAAiB,GAAG,CAAC,CAAA;AAC3B,IAAMC,gBAAgB,GAAG,KAAK,CAAA;AAC9B,IAAMC,qBAAqB,GAAG,SAAS,CAAA;AACvC,IAAMC,0BAA0B,GAAG,EAAE,CAAA;AAErC,IAAMC,gBAAgB,GAAG,EAAE,CAAA;AAC3B,IAAMC,eAAe,GAAG,GAAG,GAAA,CAAID,gBAAgB,GAAG,GAAG,CAAC,CAAA;AAEtD,IAAME,qBAAqB,GAAG,OAAOC,YAAY,KAAK,UAAU,CAAA;AAEhE,IAAMC,CAAC,GAAG,SAAJA,CAACA,CAAIC,GAAW,EAAEC,GAAW,EAAA;IAAA,OAAK,GAAG,GAAG,GAAG,GAAGA,GAAG,GAAG,GAAG,GAAGD,GAAG,CAAA;AAAA,CAAA,CAAA;AACnE,IAAME,CAAC,GAAG,SAAJA,CAACA,CAAIF,GAAW,EAAEC,GAAW,EAAA;IAAA,OAAK,GAAG,GAAGA,GAAG,GAAG,GAAG,GAAGD,GAAG,CAAA;AAAA,CAAA,CAAA;AAC7D,IAAMG,CAAC,GAAG,SAAJA,CAACA,CAAIH,GAAW,EAAA;IAAA,OAAK,GAAG,GAAGA,GAAG,CAAA;AAAA,CAAA,CAAA;AAE3C,iEAAA;AACO,IAAMI,UAAU,GAAG,SAAbA,UAAUA,CAAIC,EAAU,EAAEL,GAAW,EAAEC,GAAW,EAAA;IAAA,OAC7D,CAAC,CAACF,CAAC,CAACC,GAAG,EAAEC,GAAG,CAAC,GAAGI,EAAE,GAAGH,CAAC,CAACF,GAAG,EAAEC,GAAG,CAAC,IAAII,EAAE,GAAGF,CAAC,CAACH,GAAG,CAAC,IAAIK,EAAE,CAAA;AAAA,CAAA,CAAA;AAEvD,mEAAA;AACO,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAID,EAAU,EAAEL,GAAW,EAAEC,GAAW,EAAA;IAAA,OAC3D,GAAG,GAAGF,CAAC,CAACC,GAAG,EAAEC,GAAG,CAAC,GAAGI,EAAE,GAAGA,EAAE,GAAG,GAAG,GAAGH,CAAC,CAACF,GAAG,EAAEC,GAAG,CAAC,GAAGI,EAAE,GAAGF,CAAC,CAACH,GAAG,CAAC,CAAA;AAAA,CAAA,CAAA;AACxD,IAAMO,eAAe,GAAG,SAAlBA,eAAeA,CAC1BC,EAAU,EACVC,EAAU,EACVC,EAAU,EACVC,GAAW,EACXC,GAAW,EACR;IACH,IAAIC,QAAgB,CAAA;IACpB,IAAIC,QAAgB,CAAA;IACpB,IAAIC,CAAC,GAAG,CAAC,CAAA;IACT,GAAG;QACDD,QAAQ,GAAGL,EAAE,GAAG,CAACC,EAAE,GAAGD,EAAE,IAAI,GAAG,CAAA;QAC/BI,QAAQ,GAAGT,UAAU,CAACU,QAAQ,EAAEH,GAAG,EAAEC,GAAG,CAAC,GAAGJ,EAAE,CAAA;QAC9C,IAAIK,QAAQ,GAAG,GAAG,EAAEH,EAAE,GAAGI,QAAQ,CAAC;aAC7BL,EAAE,GAAGK,QAAQ,CAAA;IACpB,CAAC,OACCE,IAAI,CAACC,GAAG,CAACJ,QAAQ,CAAC,GAAGpB,qBAAqB,IAC1C,EAAEsB,CAAC,GAAGrB,0BAA0B,CAAA;IAElC,OAAOoB,QAAQ,CAAA;AACjB,CAAC,CAAA;AAEM,IAAMI,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAC/BV,EAAU,EACVW,OAAe,EACfR,GAAW,EACXC,GAAW,EACR;IACH,IAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGxB,iBAAiB,EAAE,EAAEwB,CAAC,CAAE;QAC1C,IAAMK,YAAY,GAAGd,QAAQ,CAACa,OAAO,EAAER,GAAG,EAAEC,GAAG,CAAC,CAAA;QAChD,IAAIQ,YAAY,KAAK,GAAG,EAAE,OAAOD,OAAO,CAAA;QAExC,IAAMN,QAAQ,GAAGT,UAAU,CAACe,OAAO,EAAER,GAAG,EAAEC,GAAG,CAAC,GAAGJ,EAAE,CAAA;QACnDW,OAAO,IAAIN,QAAQ,GAAGO,YAAY,CAAA;IACpC,CAAA;IAEA,OAAOD,OAAO,CAAA;AAChB,CAAC,CAAA;AAEM,IAAME,MAAM,GAAG,SAATA,MAAMA,CAAIV,GAAW,EAAEW,GAAW,EAAEV,GAAW,EAAEW,GAAW,EAAK;IAC5E,IAAI,CAAA,CAAEZ,GAAG,IAAI,CAAC,IAAIA,GAAG,IAAI,CAAC,IAAIC,GAAG,IAAI,CAAC,IAAIA,GAAG,IAAI,CAAC,CAAC,EACjD,MAAM,IAAIjF,KAAK,CAAC,yCAAyC,CAAC,CAAA;IAE5D,IAAIgF,GAAG,KAAKW,GAAG,IAAIV,GAAG,KAAKW,GAAG,EAAE,OAAO,SAACC,CAAS,EAAA;QAAA,OAAKA,CAAC,CAAA;IAAA,CAAA,CAAA;IAEvD,2BAAA;IACA,IAAMC,YAAY,GAAG5B,qBAAqB,GACtC,IAAIC,YAAY,CAACH,gBAAgB,CAAC,GAClC,IAAI+B,KAAK,CAAC/B,gBAAgB,CAAC,CAAA;IAC/B,IAAK,IAAIoB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGpB,gBAAgB,EAAE,EAAEoB,CAAC,CAAE;QACzCU,YAAY,CAACV,CAAC,CAAC,GAAGX,UAAU,CAACW,CAAC,GAAGnB,eAAe,EAAEe,GAAG,EAAEC,GAAG,CAAC,CAAA;IAC7D,CAAA;IAEA,IAAMe,QAAQ,GAAG,SAAXA,QAAQA,CAAInB,EAAU,EAAK;QAC/B,IAAIoB,aAAa,GAAG,GAAG,CAAA;QACvB,IAAIC,aAAa,GAAG,CAAC,CAAA;QACrB,IAAMC,UAAU,GAAGnC,gBAAgB,GAAG,CAAC,CAAA;QAEvC,MAEEkC,aAAa,KAAKC,UAAU,IAAIL,YAAY,CAACI,aAAa,CAAC,IAAIrB,EAAE,EACjE,EAAEqB,aAAa,CAEfD,aAAa,IAAIhC,eAAe,CAAA;QAClC,EAAEiC,aAAa,CAAA;QAEf,gDAAA;QACA,IAAME,IAAI,GACR,CAACvB,EAAE,GAAGiB,YAAY,CAACI,aAAa,CAAC,IAAA,CAChCJ,YAAY,CAACI,aAAa,GAAG,CAAC,CAAC,GAAGJ,YAAY,CAACI,aAAa,CAAC,CAAC,CAAA;QACjE,IAAMG,SAAS,GAAGJ,aAAa,GAAGG,IAAI,GAAGnC,eAAe,CAAA;QAExD,IAAMqC,YAAY,GAAG3B,QAAQ,CAAC0B,SAAS,EAAErB,GAAG,EAAEC,GAAG,CAAC,CAAA;QAClD,IAAIqB,YAAY,IAAIzC,gBAAgB,EAClC,OAAO0B,oBAAoB,CAACV,EAAE,EAAEwB,SAAS,EAAErB,GAAG,EAAEC,GAAG,CAAC,CAAA;QACtD,IAAIqB,YAAY,KAAK,GAAG,EAAE,OAAOD,SAAS,CAAA;QAE1C,OAAOzB,eAAe,CACpBC,EAAE,EACFoB,aAAa,EACbA,aAAa,GAAGhC,eAAe,EAC/Be,GAAG,EACHC,GACF,CAAC,CAAA;KACF,CAAA;IAED,OAAO,SAACY,CAAS,EAAK;QACpB,uFAAA;QACA,IAAIA,CAAC,KAAK,CAAC,IAAIA,CAAC,KAAK,CAAC,EAAE,OAAOA,CAAC,CAAA;QAChC,OAAOpB,UAAU,CAACuB,QAAQ,CAACH,CAAC,CAAC,EAAEF,GAAG,EAAEC,GAAG,CAAC,CAAA;KACzC,CAAA;AACH,CAAC;AChHM,IAAMW,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,GAAW,EAAK;IAC5CA,GAAG,GAAGA,GAAG,CAACC,OAAO,CAAC,UAAU,EAAE,SAACC,MAAM,EAAA;QAAA,OAAA,GAAA,CAAAlI,MAAA,CAASkI,MAAM,CAACC,WAAW,EAAE,CAAA,CAAA;IAAA,CAAE,CAAC,CAAA;IAErE,oBAAA;IACA,OAAOH,GAAG,CAACI,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,GAAGJ,GAAG,CAACK,SAAS,CAAC,CAAC,CAAC,GAAGL,GAAG,CAAA;AACvD,CAAC,CAAA;AAKD;;AAEA,GACA,IAAMM,IAAwB,GAAG,SAA3BA,IAAwBA,CAAIjB,CAAC,EAAA;IAAA,OAAAR,IAAA,CAAA0B,GAAA,CAAKlB,CAAC,EAAI,CAAC,CAAA,CAAA;AAAA,CAAA,CAAA;AAC9C,IAAMmB,KAAyB,GAAG,SAA5BA,KAAyBA,CAAInB,CAAC,EAAA;IAAA,OAAAR,IAAA,CAAA0B,GAAA,CAAKlB,CAAC,EAAI,CAAC,CAAA,CAAA;AAAA,CAAA,CAAA;AAC/C,IAAMoB,KAAyB,GAAG,SAA5BA,KAAyBA,CAAIpB,CAAC,EAAA;IAAA,OAAAR,IAAA,CAAA0B,GAAA,CAAKlB,CAAC,EAAI,CAAC,CAAA,CAAA;AAAA,CAAA,CAAA;AAC/C,IAAMqB,KAAyB,GAAG,SAA5BA,KAAyBA,CAAIrB,CAAC,EAAA;IAAA,OAAAR,IAAA,CAAA0B,GAAA,CAAKlB,CAAC,EAAI,CAAC,CAAA,CAAA;AAAA,CAAA,CAAA;AAC/C,IAAMsB,IAAwB,GAAG,SAA3BA,IAAwBA,CAAItB,CAAC,EAAA;IAAA,OAAAR,IAAA,CAAA0B,GAAA,CAAKlB,CAAC,EAAI,CAAC,CAAA,CAAA;AAAA,CAAA,CAAA;AAC9C,IAAMuB,IAAwB,GAAG,SAA3BA,IAAwBA,CAAIvB,CAAC,EAAA;IAAA,OAAK,CAAC,GAAGR,IAAI,CAACgC,GAAG,CAAExB,CAAC,GAAGR,IAAI,CAACiC,EAAE,GAAI,CAAC,CAAC,CAAA;AAAA,CAAA,CAAA;AACvE,IAAMC,IAAwB,GAAG,SAA3BA,IAAwBA,CAAI1B,CAAC,EAAA;IAAA,OAAK,CAAC,GAAGR,IAAI,CAACmC,IAAI,CAAC,CAAC,GAAG3B,CAAC,GAAGA,CAAC,CAAC,CAAA;AAAA,CAAA,CAAA;AAChE,IAAM4B,IAAwB,GAAG,SAA3BA,IAAwBA,CAAI5B,CAAC,EAAA;IAAA,OAAKA,CAAC,GAAGA,CAAC,GAAA,CAAI,CAAC,GAAGA,CAAC,GAAG,CAAC,CAAC,CAAA;AAAA,CAAA,CAAA;AAE3D,IAAM6B,MAA0B,GAAG,SAA7BA,MAA0BA,CAAI7B,CAAC,EAAK;IACxC,IAAI8B,IAAY,CAAA;IAChB,IAAIC,CAAC,GAAG,CAAC,CAAA;IACT,MAAO/B,CAAC,GAAG,CAAC,CAAC8B,IAAI,GAAAtC,IAAA,CAAA0B,GAAA,CAAG,CAAC,EAAI,EAAEa,CAAC,CAAA,IAAI,CAAC,IAAI,EAAE,CAAE,CAAA,CAAC;IAC1C,OAAO,CAAC,GAAAvC,IAAA,CAAA0B,GAAA,CAAG,CAAC,EAAK,CAAC,GAAGa,CAAC,CAAC,GAAG,MAAM,GAAAvC,IAAA,CAAA0B,GAAA,CAAI,CAACY,IAAI,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG9B,CAAC,EAAK,CAAC,CAAA,CAAA;AACnE,CAAC,CAAA;AAED,IAAMgC,OAA2B,GAAG,SAA9BA,OAA2BA,CAAIhC,CAAC,EAAuC;IAAA,IAArCiC,MAA2B,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;IACtE,IAAAE,OAAA,sKAAAC,UAAAA,AAAA,EAAsCJ,MAAM,EAAA,CAAA,CAAA,EAAAK,QAAA,GAAAF,OAAA,CAAA,CAAA,CAAA,EAArCG,SAAS,GAAAD,QAAA,KAAG,KAAA,CAAA,GAAA,CAAC,GAAAA,QAAA,EAAAE,SAAA,GAAAJ,OAAA,CAAA,CAAA,CAAA,EAAEK,MAAM,GAAAD,SAAA,KAAG,KAAA,CAAA,GAAA,GAAG,GAAAA,SAAA,CAAA;IAClC,IAAME,CAAC,oMAAGC,QAAAA,AAAK,EAAC5J,MAAM,CAACwJ,SAAS,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAA;IACzC,IAAMK,CAAC,oMAAGD,QAAAA,AAAK,EAAC5J,MAAM,CAAC0J,MAAM,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAA;IACvC,IAAIzC,CAAC,KAAK,CAAC,IAAIA,CAAC,KAAK,CAAC,EAAE,OAAOA,CAAC,CAAA;IAChC,OACE,CAAC0C,CAAC,GAAAlD,IAAA,CAAA0B,GAAA,CACF,CAAC,EAAK,EAAE,GAAA,CAAIlB,CAAC,GAAG,CAAC,CAAC,CAAC,GACnBR,IAAI,CAACqD,GAAG,CACL,CAAC7C,CAAC,GAAG,CAAC,GAAI4C,CAAC,GAAA,CAAIpD,IAAI,CAACiC,EAAE,GAAG,CAAC,CAAC,GAAIjC,IAAI,CAACsD,IAAI,CAAC,CAAC,GAAGJ,CAAC,CAAC,IAAA,CAAKlD,IAAI,CAACiC,EAAE,GAAG,CAAC,CAAC,GAAImB,CACvE,CAAC,CAAA;AAEL,CAAC,CAAA;AAED,IAAMG,MAA0B,GAAG,SAA7BA,MAA0BA,CAC9B/C,CAAS,EAGN;IAAA,IAFHiC,MAA2B,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;IAAA,IAChCc,QAAiB,GAAAd,SAAA,CAAAC,MAAA,GAAAD,CAAAA,GAAAA,SAAA,CAAA,EAAA,GAAA3G,SAAA,CAAA;IAEjB,IAAA0H,QAAA,sKAAAZ,UAAAA,AAAA,EAA8DJ,MAAM,EAAA,CAAA,CAAA,EAAAiB,SAAA,GAAAD,QAAA,CAAA,CAAA,CAAA,EAA/DE,IAAI,GAAAD,SAAA,KAAG,KAAA,CAAA,GAAA,CAAC,GAAAA,SAAA,EAAAE,UAAA,GAAAH,QAAA,CAAA,CAAA,CAAA,EAAEI,SAAS,GAAAD,UAAA,KAAG,KAAA,CAAA,GAAA,GAAG,GAAAA,UAAA,EAAAE,UAAA,GAAAL,QAAA,CAAA,CAAA,CAAA,EAAEM,OAAO,GAAAD,UAAA,KAAG,KAAA,CAAA,GAAA,EAAE,GAAAA,UAAA,EAAAE,UAAA,GAAAP,QAAA,CAAA,CAAA,CAAA,EAAEQ,QAAQ,GAAAD,UAAA,KAAG,KAAA,CAAA,GAAA,CAAC,GAAAA,UAAA,CAAA;IAE1DL,IAAI,OAAGR,qMAAAA,AAAK,EAACQ,IAAI,EAAY,GAAG,EAAE,IAAI,CAAC,CAAA;IACvCE,SAAS,oMAAGV,QAAAA,AAAK,EAACU,SAAS,EAAY,GAAG,EAAE,IAAI,CAAC,CAAA;IACjDE,OAAO,OAAGZ,qMAAAA,AAAK,EAACY,OAAO,EAAY,GAAG,EAAE,IAAI,CAAC,CAAA;IAC7CE,QAAQ,oMAAGd,QAAAA,AAAK,EAACc,QAAQ,EAAY,GAAG,EAAE,IAAI,CAAC,CAAA;IAE/C,IAAMC,EAAE,GAAGlE,IAAI,CAACmC,IAAI,CAAC0B,SAAS,GAAGF,IAAI,CAAC,CAAA;IACtC,IAAMQ,IAAI,GAAGJ,OAAO,GAAA,CAAI,CAAC,GAAG/D,IAAI,CAACmC,IAAI,CAAC0B,SAAS,GAAGF,IAAI,CAAC,CAAC,CAAA;IACxD,IAAMS,EAAE,GAAGD,IAAI,GAAG,CAAC,GAAGD,EAAE,GAAGlE,IAAI,CAACmC,IAAI,CAAC,CAAC,GAAGgC,IAAI,GAAGA,IAAI,CAAC,GAAG,CAAC,CAAA;IACzD,IAAMjB,CAAC,GAAG,CAAC,CAAA;IACX,IAAMX,CAAC,GAAG4B,IAAI,GAAG,CAAC,GAAG,CAACA,IAAI,GAAGD,EAAE,GAAG,CAACD,QAAQ,IAAIG,EAAE,GAAG,CAACH,QAAQ,GAAGC,EAAE,CAAA;IAElE,IAAIG,QAAQ,GAAGb,QAAQ,GAAIA,QAAQ,GAAGhD,CAAC,GAAI,IAAI,GAAGA,CAAC,CAAA;IACnD,IAAI2D,IAAI,GAAG,CAAC,EAAE;QACZE,QAAQ,GACNrE,IAAI,CAACsE,GAAG,CAAC,CAACD,QAAQ,GAAGF,IAAI,GAAGD,EAAE,CAAC,GAAA,CAC9BhB,CAAC,GAAGlD,IAAI,CAACgC,GAAG,CAACoC,EAAE,GAAGC,QAAQ,CAAC,GAAG9B,CAAC,GAAGvC,IAAI,CAACqD,GAAG,CAACe,EAAE,GAAGC,QAAQ,CAAC,CAAC,CAAA;IAC/D,CAAC,MAAM;QACLA,QAAQ,GAAG,CAACnB,CAAC,GAAGX,CAAC,GAAG8B,QAAQ,IAAIrE,IAAI,CAACsE,GAAG,CAAC,CAACD,QAAQ,GAAGH,EAAE,CAAC,CAAA;IAC1D,CAAA;IAEA,IAAI1D,CAAC,KAAK,CAAC,IAAIA,CAAC,KAAK,CAAC,EAAE,OAAOA,CAAC,CAAA;IAChC,OAAO,CAAC,GAAG6D,QAAQ,CAAA;AACrB,CAAC,CAAA;AAED;;CAEA,GACA,0FAAA;AAEA;;CAEA,GACA,qCAAA;AAEA,qFAAA,GACA,0DAAA;AACA,iDAAA;AACA,iBAAA;AACA,6CAAA;AACA,yCAAA;AACA,0DAAA;AACA,WAAA;AACA,YAAA;AACA,KAAA;AAEA;;;;;;;CAOA,GACA,yFAAA;AACA,iFAAA;AAEA,wEAAA;AACA,uGAAA;AACA,qFAAA;AACA,yBAAA;AAEA,qBAAA;AACA,kBAAA;AACA,mBAAA;AAEA,4CAAA;AACA,wBAAA;AACA,8DAAA;AACA,gBAAA;AACA,+BAAA;AACA,eAAA;AACA,kBAAA;AACA,QAAA;AACA,MAAA;AAEA,6CAAA;AACA,+CAAA;AACA,qBAAA;AACA,KAAA;AAEA;;;AAGA,GACA,IAAME,KAAyB,GAAG,SAA5BA,KAAyBA,CAAI/D,CAAS,EAAkB;IAAA,IAAhBiC,MAAM,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;IACvD,IAAA8B,IAAA,GAA2B/B,MAAM,EAAAgC,KAAA,sKAAA5B,UAAAA,AAAA,EAAA2B,IAAA,EAAA,CAAA,CAAA,EAAAE,MAAA,GAAAD,KAAA,CAAA,CAAA,CAAA,EAA1BE,KAAK,GAAAD,MAAA,KAAG,KAAA,CAAA,GAAA,EAAE,GAAAA,MAAA,EAAEjN,IAAI,GAAAgN,KAAA,CAAA,CAAA,CAAA,CAAA;IACvB,IAAMG,KAAK,GAAGnN,IAAI,KAAK,OAAO,GAAGuI,IAAI,CAAC6E,IAAI,GAAG7E,IAAI,CAAC8E,KAAK,CAAA;IACvD,OAAOF,KAAK,kMAACzB,QAAAA,AAAK,EAAC3C,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAGmE,KAAK,CAAC,GAAGA,KAAK,CAAA;AAC9C,CAAC,CAAA;AAED,aAAA;AACA,IAAMI,MAA0B,GAAG,SAA7BA,MAA0BA,CAAIvE,CAAS,EAA4B;IAAA,IAA1BiC,MAAgB,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;IAClE,IAAAsC,QAAA,sKAAAnC,UAAAA,AAAA,EAA6BJ,MAAM,EAAA,CAAA,CAAA,EAA5B9C,GAAG,GAAAqF,QAAA,CAAA,CAAA,CAAA,EAAE1E,GAAG,GAAA0E,QAAA,CAAA,CAAA,CAAA,EAAEpF,GAAG,GAAAoF,QAAA,CAAA,CAAA,CAAA,EAAEzE,GAAG,GAAAyE,QAAA,CAAA,CAAA,CAAA,CAAA;IACzB,OAAO3E,MAAM,CAACV,GAAG,EAAEW,GAAG,EAAEV,GAAG,EAAEW,GAAG,CAAC,CAACC,CAAC,CAAC,CAAA;AACtC,CAAC,CAAA;AAED,0CAAA,GACA,IAAMyE,MAA0B,GAAG5E,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAA;AAE9D,0DAAA,GACA,IAAM6E,OAAO,GAAG,SAAVA,OAAOA,CAAIC,IAAwB,EAAyB;IAChE,OAAO,SAAC3E,CAAC,EAAA;QAAA,IAAEiC,MAAM,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;QAAA,IAAEc,QAAiB,GAAAd,SAAA,CAAAC,MAAA,GAAAD,CAAAA,GAAAA,SAAA,CAAA,EAAA,GAAA3G,SAAA,CAAA;QAAA,OACvC,CAAC,GAAGoJ,IAAI,CAAC,CAAC,GAAG3E,CAAC,EAAEiC,MAAM,EAAEe,QAAQ,CAAC,CAAA;IAAA,CAAA,CAAA;AACrC,CAAC,CAAA;AAED,8DAAA,GACA,IAAM4B,SAAS,GAAG,SAAZA,SAASA,CAAID,IAAwB,EAAyB;IAClE,OAAO,SAAC3E,CAAC,EAAA;QAAA,IAAEiC,MAAM,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;QAAA,IAAEc,QAAiB,GAAAd,SAAA,CAAAC,MAAA,GAAAD,CAAAA,GAAAA,SAAA,CAAA,EAAA,GAAA3G,SAAA,CAAA;QAAA,OACvCyE,CAAC,GAAG,GAAG,GACH2E,IAAI,CAAC3E,CAAC,GAAG,CAAC,EAAEiC,MAAM,EAAEe,QAAQ,CAAC,GAAG,CAAC,GACjC,CAAC,GAAG2B,IAAI,CAAC3E,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAEiC,MAAM,EAAEe,QAAQ,CAAC,GAAG,CAAC,CAAA;IAAA,CAAA,CAAA;AAClD,CAAC,CAAA;AAED,8DAAA,GACA,IAAM6B,SAAS,GAAG,SAAZA,SAASA,CAAIF,IAAwB,EAAyB;IAClE,OAAO,SAAC3E,CAAC,EAAqC;QAAA,IAAnCiC,MAAM,GAAAC,SAAA,CAAAC,MAAA,GAAA,CAAA,IAAAD,SAAA,CAAA,CAAA,CAAA,KAAA3G,SAAA,GAAA2G,SAAA,CAAA,CAAA,CAAA,GAAG,EAAE,CAAA;QAAA,IAAEc,QAAiB,GAAAd,SAAA,CAAAC,MAAA,GAAAD,CAAAA,GAAAA,SAAA,CAAA,EAAA,GAAA3G,SAAA,CAAA;QACvC,OAAOyE,CAAC,GAAG,GAAG,GACV,CAAC,CAAC,GAAG2E,IAAI,CAAC,CAAC,GAAG3E,CAAC,GAAG,CAAC,EAAEiC,MAAM,EAAEe,QAAQ,CAAC,IAAI,CAAC,GAC3C,CAAC2B,IAAI,CAAC3E,CAAC,GAAG,CAAC,GAAG,CAAC,EAAEiC,MAAM,EAAEe,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;KAChD,CAAA;AACH,CAAC,CAAA;AAED;;CAEA,GAyDO,IAAM8B,eAA+D,GAAG;IAC7EX,KAAK,EAAEJ,KAAK;IACZ,YAAY,EAAE,SAAdgB,SAAYA,CAAG/E,CAAC,EAAA;QAAA,OAAK+D,KAAK,CAAC/D,CAAC,EAAE;YAAC,CAAC;YAAE,OAAO;SAAC,CAAC,CAAA;IAAA,CAAA;IAC3C,UAAU,EAAE,SAAZgF,OAAUA,CAAGhF,CAAC,EAAA;QAAA,OAAK+D,KAAK,CAAC/D,CAAC,EAAE;YAAC,CAAC;YAAE,KAAK;SAAC,CAAC,CAAA;IAAA,CAAA;IAEvCiF,MAAM,EAAE,SAARA,MAAMA,CAAGjF,CAAC,EAAA;QAAA,OAAKA,CAAC,CAAA;IAAA,CAAA;IAChB,cAAc,EAAEuE,MAAM;IACtBI,IAAI,EAAE,SAANA,IAAIA,CAAG3E,CAAC,EAAA;QAAA,OAAKuE,MAAM,CAACvE,CAAC,EAAE;YAAC,IAAI;YAAE,GAAG;YAAE,IAAI;YAAE,GAAG;SAAC,CAAC,CAAA;IAAA,CAAA;IAE9C,IAAA,EAAIyE,MAAM;IACVS,GAAG,EAAER,OAAO,CAACD,MAAM,CAAC;IACpB,QAAQ,EAAEG,SAAS,CAACH,MAAM,CAAC;IAC3B,QAAQ,EAAEI,SAAS,CAACJ,MAAM,CAAC;IAE3B,SAAS,EAAExD,IAAI;IACf,UAAU,EAAEyD,OAAO,CAACzD,IAAI,CAAC;IACzB,aAAa,EAAE2D,SAAS,CAAC3D,IAAI,CAAC;IAC9B,aAAa,EAAE4D,SAAS,CAAC5D,IAAI,CAAC;IAE9B,UAAU,EAAEE,KAAK;IACjB,WAAW,EAAEuD,OAAO,CAACvD,KAAK,CAAC;IAC3B,cAAc,EAAEyD,SAAS,CAACzD,KAAK,CAAC;IAChC,cAAc,EAAE0D,SAAS,CAAC1D,KAAK,CAAC;IAEhC,UAAU,EAAEC,KAAK;IACjB,WAAW,EAAEsD,OAAO,CAACtD,KAAK,CAAC;IAC3B,cAAc,EAAEwD,SAAS,CAACxD,KAAK,CAAC;IAChC,cAAc,EAAEyD,SAAS,CAACzD,KAAK,CAAC;IAEhC,UAAU,EAAEC,KAAK;IACjB,WAAW,EAAEqD,OAAO,CAACrD,KAAK,CAAC;IAC3B,cAAc,EAAEuD,SAAS,CAACvD,KAAK,CAAC;IAChC,cAAc,EAAEwD,SAAS,CAACxD,KAAK,CAAC;IAEhC,SAAS,EAAEC,IAAI;IACf,UAAU,EAAEoD,OAAO,CAACpD,IAAI,CAAC;IACzB,aAAa,EAAEsD,SAAS,CAACtD,IAAI,CAAC;IAC9B,aAAa,EAAEuD,SAAS,CAACvD,IAAI,CAAC;IAE9B,SAAS,EAAEC,IAAI;IACf,UAAU,EAAEmD,OAAO,CAACnD,IAAI,CAAC;IACzB,aAAa,EAAEqD,SAAS,CAACrD,IAAI,CAAC;IAC9B,aAAa,EAAEsD,SAAS,CAACtD,IAAI,CAAC;IAE9B,SAAS,EAAEG,IAAI;IACf,UAAU,EAAEgD,OAAO,CAAChD,IAAI,CAAC;IACzB,aAAa,EAAEkD,SAAS,CAAClD,IAAI,CAAC;IAC9B,aAAa,EAAEmD,SAAS,CAACnD,IAAI,CAAC;IAE9B,SAAS,EAAEE,IAAI;IACf,UAAU,EAAE8C,OAAO,CAAC9C,IAAI,CAAC;IACzB,aAAa,EAAEgD,SAAS,CAAChD,IAAI,CAAC;IAC9B,aAAa,EAAEiD,SAAS,CAACjD,IAAI,CAAC;IAE9B,WAAW,EAAEC,MAAM;IACnB,YAAY,EAAE6C,OAAO,CAAC7C,MAAM,CAAC;IAC7B,eAAe,EAAE+C,SAAS,CAAC/C,MAAM,CAAC;IAClC,eAAe,EAAEgD,SAAS,CAAChD,MAAM,CAAC;IAElC,YAAY,EAAEG,OAAO;IACrB,aAAa,EAAE0C,OAAO,CAAC1C,OAAO,CAAC;IAC/B,gBAAgB,EAAE4C,SAAS,CAAC5C,OAAO,CAAC;IACpC,gBAAgB,EAAE6C,SAAS,CAAC7C,OAAO,CAAC;IAEpCmD,MAAM,EAAEpC,MAAM;IACd,WAAW,EAAEA,MAAM;IACnB,YAAY,EAAE2B,OAAO,CAAC3B,MAAM,CAAC;IAC7B,eAAe,EAAE6B,SAAS,CAAC7B,MAAM,CAAC;IAClC,eAAe,EAAE8B,SAAS,CAAC9B,MAAM,CAAA;AACnC,EAAC;AAED;;CAEA,GACA,IAAMqC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIT,IAAY,EAAA;IAAA,OACvCjE,aAAa,CAACiE,IAAI,CAAC,CAChB/D,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAA,6BAAA;KACrBA,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAA,8CAAA;KACxBE,WAAW,EAAE,CACbuE,IAAI,EAAE,CAAA;AAAA,CAAA,CAAA;AAEX,oKAAA,GACO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIX,IAAY,EAAK;IACjD,OAAOG,eAAe,CAACM,mBAAmB,CAACT,IAAI,CAAC,CAAC,IAAIG,eAAe,CAACG,MAAM,CAAA;AAC7E,CAAC,CAAA;AAED,MAAA;AACA,iDAAA;AACA,MAAA;AACA,mFAAA;AACA,qCAAA;AACA,iBAAA;AACA,QAAA;AACA,KAAA;AAEA,MAAA;AACA,0DAAA;AACA,MAAA;AACA,iFAAA;AACA,4CAAA;AACA,KAAA;AC9UO,IAAMA,MAAM,GAAG,SAATA,MAAMA,CAAIM,CAAS,EAAK;IACnC,OAAOA,CAAC,CAAA;AACV,CAAC,CAAA;AAED,IAAMC,KAAK,GAAG,CAAC,CAAA;AACf,IAAMC,MAAM,GAAG,GAAG,CAAA;AAClB,IAAMC,GAAG,GAAG,CAAC,CAAA;AAEb,SAASC,IAAIA,CAACC,KAAa,EAAEC,GAAW,EAAE;IACxC,OAAO,SAAUN,CAAS,EAAE;QAC1B,IAAIA,CAAC,IAAI,CAAC,EAAE;YACV,OAAO,CAAC,CAAA;QACV,CAAA;QACA,IAAMO,QAAQ,GAAG,CAAC,GAAGF,KAAK,CAAA;QAC1BL,CAAC,IAAIM,GAAG,GAAGC,QAAQ,CAAA;QACnB,OAAOP,CAAC,GAAIA,CAAC,GAAGO,QAAS,CAAA;KAC1B,CAAA;AACH,CAAA;AAEA,IAAMC,YAAY,GAAG,oCAAoC,CAAA;AACzD,IAAMC,aAAa,GAAG,IAAIC,MAAM,CAAA,kBAAAtN,MAAA,CACZoN,YAAY,EAAApN,GAAAA,CAAAA,CAAAA,MAAA,CAAIoN,YAAY,EAAA,GAAA,CAAA,CAAApN,MAAA,CAAIoN,YAAY,EAAA,KAAApN,MAAA,CAAIoN,YAAY,EAAA,KAAA,CAChF,CAAC,CAAA;AACD,IAAMG,OAAO,GAAG,sBAAsB,CAAA;AACtC,IAAMC,OAAO,GAAG,+CAA+C,CAAA;AAExD,SAASC,mBAAmBA,CACjCC,gBAAwB,EACD;IACvB,IAAMC,SAAS,GAAGN,aAAa,CAACO,IAAI,CAACF,gBAAgB,CAAC,CAAA;IACtD,IAAIC,SAAS,EAAE;QACb,aAAA;QACA,OAAOzG,MAAM,CAAA2G,KAAA,CAAAC,KAAAA,CAAAA,yKAAAA,UAAAA,AAAA,EAAIH,SAAS,CAACI,KAAK,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC5N,MAAM,CAAC,CAAC,CAAA,CAAA;IAClD,CAAA;IACA,IAAM6N,SAAS,GAAGV,OAAO,CAACK,IAAI,CAACF,gBAAgB,CAAC,CAAA;IAChD,IAAIO,SAAS,EAAE;QACb,OAAOjB,IAAI,CAAC5M,MAAM,CAAC6N,SAAS,CAAC,CAAC,CAAC,CAAC,EAAElB,GAAG,CAAC,CAAA;IACxC,CAAA;IACA,IAAMmB,SAAS,GAAGV,OAAO,CAACI,IAAI,CAACF,gBAAgB,CAAC,CAAA;IAChD,IAAIQ,SAAS,EAAE;QACb,aAAA;QACA,OAAOlB,IAAI,CACT5M,MAAM,CAAC8N,SAAS,CAAC,CAAC,CAAC,CAAC,EACpB;YAAEC,KAAK,EAAEtB,KAAK;YAAEuB,MAAM,EAAEtB,MAAM;YAAEuB,GAAG,EAAEtB,GAAAA;QAAI,CAAC,CAACmB,SAAS,CAAC,CAAC,CAAC,CACzD,CAAC,CAAA;IACH,CAAA;IACA,OAAOvB,iBAAiB,CAACe,gBAAgB,CAAC,CAAA;AAC5C,CAAA;AAEO,SAASY,uBAAuBA,CAACC,MAAoB,EAAE;IAC5D,aAAA;IACA,OAAO1H,IAAI,CAACC,GAAG,CAAC0H,gBAAgB,CAACD,MAAM,CAAC,GAAA,CAAIA,MAAM,CAAC1N,YAAY,IAAI,CAAC,CAAC,CAAC,CAAA;AACxE,CAAA;AAEA,SAAS2N,gBAAgBA,CAACD,MAAoB,EAAU;IAAA,IAAAE,kBAAA,CAAA;IACtD,2EAAA;IACA,IAAIF,MAAM,CAAClE,QAAQ,KAAK,CAAC,IAAIkE,MAAM,CAACG,UAAU,KAAK,CAAC,EAAE;QACpD,OAAO,CAAC,CAAA;IACV,CAAA;IAEA,oFAAA;IACA,oCAAA;IACA,yBAAA;IACA,IAAA;IAEA,OACE,CAACH,MAAM,CAAClE,QAAQ,KAAK,MAAM,GAAG,CAAC,GAAGjK,MAAM,CAACmO,MAAM,CAAClE,QAAQ,CAAC,IAAA,CAAAoE,CAAAA,kBAAA,GACxDF,MAAM,CAACG,UAAU,MAAAD,IAAAA,IAAAA,kBAAA,KAAAA,KAAAA,CAAAA,GAAAA,kBAAA,GAAI,CAAC,CAAC,CAAA;AAE5B,CAAA;AAEA,IAAME,SAAS,GAAG,CAAC,CAAA;AACnB,IAAMC,WAAW,GAAG,CAAC,CAAA;AACrB,IAAMC,UAAU,GAAG,CAAC,CAAA;AACpB,IAAMC,WAAW,GAAG,CAAC,CAAA;AAErB,SAASC,cAAcA,CACrBC,cAAsB,EACtBC,SAAwB,EACxBV,MAA6B,EAC7B;IACA,8EAAA;IACA,IAAIU,SAAS,KAAK,IAAI,EAAE;QACtB,OAAON,SAAS,CAAA;IAClB,CAAA;IAEA,IAAQrO,OAAO,GAAKiO,MAAM,CAAlBjO,OAAO,CAAA;IACf,IAAI2O,SAAS,GAAGpI,IAAI,CAACqI,GAAG,CAACX,MAAM,CAACY,KAAK,EAAE7O,OAAO,CAAC,EAAE;QAC/C,OAAOsO,WAAW,CAAA;IACpB,CAAA;IACA,IACEK,SAAS,IACTpI,IAAI,CAACqI,GAAG,CAACX,MAAM,CAACY,KAAK,GAAGH,cAAc,GAAGT,MAAM,CAACa,QAAQ,EAAE9O,OAAO,CAAC,EAClE;QACA,OAAOuO,UAAU,CAAA;IACnB,CAAA;IAEA,OAAOC,WAAW,CAAA;AACpB,CAAA;AAEA,SAASO,mBAAmBA,CAC1BL,cAAmB,EACnBM,QAAgB,EAChBL,SAAiB,EACjBM,KAAa,EACbJ,KAAa,EACb;IACA,uEAAA;IACA,OAAQI,KAAK;QACX,KAAKX,WAAW;YACd,IAAIU,QAAQ,KAAK,WAAW,IAAIA,QAAQ,KAAK,MAAM,EAAE,OAAO,CAAC,CAAA;YAC7D,OAAO,IAAI,CAAA;QACb,KAAKR,WAAW;YACd,OAAOG,SAAS,GAAGE,KAAK,CAAA;QAC1B,KAAKN,UAAU;YACb,IAAIS,QAAQ,KAAK,UAAU,IAAIA,QAAQ,KAAK,MAAM,EAAE,OAAON,cAAc,CAAA;YACzE,OAAO,IAAI,CAAA;QACb,KAAKL,SAAS;YACZ,OAAO,IAAI,CAAA;IACf,CAAA;AACF,CAAA;AAEA,SAASa,wBAAwBA,CAC/BC,iBAAyB,EACzBF,KAAa,EACbb,UAAkB,EAClBgB,UAAkB,EAClBC,cAAsB,EACtB;IACA,4EAAA;IACA,IAAIC,eAAe,GAAGD,cAAc,CAAA;IACpC,IAAIF,iBAAiB,KAAK,CAAC,EAAE;QAC3B,IAAIF,KAAK,KAAKX,WAAW,EAAE;YACzBgB,eAAe,IAAIlB,UAAU,CAAA;QAC/B,CAAA;IACF,CAAC,MAAM;QACLkB,eAAe,IAAIF,UAAU,GAAGD,iBAAiB,CAAA;IACnD,CAAA;IACA,OAAOG,eAAe,CAAA;AACxB,CAAA;AAEA,SAASC,gCAAgCA,CACvCD,eAAuB,EACvBD,cAAsB,EACtBJ,KAAa,EACbb,UAAkB,EAClBgB,UAAkB,EAClBD,iBAAyB,EACzB;IACA,qFAAA;IAEA,IAAIK,uBAAuB,GACzBF,eAAe,KAAKxL,QAAQ,GAAGuL,cAAc,GAAG,CAAC,GAAGC,eAAe,GAAG,CAAC,CAAA;IACzE,IACEE,uBAAuB,KAAK,CAAC,IAC7BP,KAAK,KAAKV,UAAU,IACpBH,UAAU,KAAK,CAAC,IAAA,CACfgB,UAAU,KAAK,CAAC,IAAID,iBAAiB,KAAK,CAAC,CAAC,EAC7C;QACAK,uBAAuB,GAAG,CAAC,CAAA;IAC7B,CAAA;IACA,OAAOA,uBAAuB,CAAA;AAChC,CAAA;AAEA,SAASC,yBAAyBA,CAChCR,KAAa,EACbb,UAAkB,EAClBoB,uBAA+B,EAC/BF,eAAuB,EACvB;IACA,6EAAA;IACA,IAAIL,KAAK,KAAKV,UAAU,IAAIH,UAAU,KAAKtK,QAAQ,EAAE;QACnD,OAAOA,QAAQ,CAAA;IACjB,CAAA;IACA,IAAI0L,uBAAuB,KAAK,CAAC,EAAE;QACjC,OAAOjJ,IAAI,CAAC8E,KAAK,CAACiE,eAAe,CAAC,GAAG,CAAC,CAAA;IACxC,CAAA;IACA,OAAO/I,IAAI,CAAC8E,KAAK,CAACiE,eAAe,CAAC,CAAA;AACpC,CAAA;AAEA,SAASI,yBAAyBA,CAChCC,iBAAyB,EACzBC,gBAAwB,EACxBJ,uBAA+B,EAC/B;IACA,6EAAA;IACA,IAAIK,gBAAgB,GAAGF,iBAAiB,CAAA;IACxC,IAAIA,iBAAiB,KAAK,QAAQ,IAAIA,iBAAiB,KAAK,SAAS,EAAE;QACrE,IAAIG,CAAC,GAAGF,gBAAgB,CAAA;QACxB,IAAID,iBAAiB,KAAK,mBAAmB,EAAE;YAC7CG,CAAC,IAAI,CAAC,CAAA;QACR,CAAA;QACAD,gBAAgB,GAAG,QAAQ,CAAA;QAC3B,IAAIC,CAAC,KAAKhM,QAAQ,IAAIgM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;YACjCD,gBAAgB,GAAG,SAAS,CAAA;QAC9B,CAAA;IACF,CAAA;IACA,IAAIA,gBAAgB,KAAK,QAAQ,EAAE;QACjC,OAAOL,uBAAuB,CAAA;IAChC,CAAA;IACA,OAAO,CAAC,GAAGA,uBAAuB,CAAA;AACpC,CAAA;AAEO,SAASO,0BAA0BA,CACxCrB,cAAsB,EACtBC,SAAiB,EACjBV,MAA6B,EAC7B;IACA,IAAMgB,KAAK,GAAGR,cAAc,CAACC,cAAc,EAAEC,SAAS,EAAEV,MAAM,CAAC,CAAA;IAC/D,IAAMmB,UAAU,GAAGL,mBAAmB,CACpCL,cAAc,EACdT,MAAM,CAAC+B,IAAI,EACXrB,SAAS,EACTM,KAAK,EACLhB,MAAM,CAACY,KACT,CAAC,CAAA;IACD,IAAIO,UAAU,KAAK,IAAI,EAAE,OAAO,IAAI,CAAA;IAEpC,IAAMrF,QAAQ,GAAGkE,MAAM,CAAClE,QAAQ,KAAK,MAAM,GAAG,CAAC,GAAGkE,MAAM,CAAClE,QAAQ,CAAA;IACjE,IAAMuF,eAAe,GAAGJ,wBAAwB,CAC9CnF,QAAQ,EACRkF,KAAK,EACLhB,MAAM,CAACG,UAAU,EACjBgB,UAAU,EACVnB,MAAM,CAACoB,cACT,CAAC,CAAA;IACD,IAAMG,uBAAuB,GAAGD,gCAAgC,CAC9DD,eAAe,EACfrB,MAAM,CAACoB,cAAc,EACrBJ,KAAK,EACLhB,MAAM,CAACG,UAAU,EACjBgB,UAAU,EACVrF,QACF,CAAC,CAAA;IACD,IAAM6F,gBAAgB,GAAGH,yBAAyB,CAChDR,KAAK,EACLhB,MAAM,CAACG,UAAU,EACjBoB,uBAAuB,EACvBF,eACF,CAAC,CAAA;IAED,IAAMW,gBAAgB,GAAGP,yBAAyB,CAChDzB,MAAM,CAACiC,SAAS,EAChBN,gBAAgB,EAChBJ,uBACF,CAAC,CAAA;IAEDvB,MAAM,CAAC2B,gBAAgB,GAAGA,gBAAgB,CAAA;IAC1C3B,MAAM,CAACrD,QAAQ,GAAGqF,gBAAgB,CAAA;IAElC,gFAAA;IACA,8EAAA;IACA,OAAOhC,MAAM,CAACkC,cAAc,CAACF,gBAAgB,CAAC,CAAA;AAChD;ACvPO,SAASG,kBAAkBA,CAChCC,SAA6B,EAC7BpC,MAA8B,EAC9BvQ,MAAuB,EACvB;IACA,IAAM4S,8BAA8B,GAAGC,kCAAkC,CACvEF,SAAS,EACTpC,MACF,CAAC,CAAA;IACD,IAAMuC,cAAc,GAAGC,kBAAkB,CACvCH,8BAA8B,EAC9B5S,MACF,CAAC,CAAA;IAED,OAAO,SAAUA,MAAgB,EAAEgT,QAAgB,EAAE;QACnD,IAAIA,QAAQ,KAAK,IAAI,EAAE;YACrBF,cAAc,CACXG,MAAM,CAAC,SAACC,aAAa,EAAK;gBACzB,OACEF,QAAQ,IAAIE,aAAa,CAACC,SAAS,IACnCH,QAAQ,GAAGE,aAAa,CAACE,OAAO,CAAA;YAEpC,CAAC,CAAC,CACDC,OAAO,CAAC,SAACH,aAAa,EAAK;gBAC1B,IAAMI,cAAc,GAAGN,QAAQ,GAAGE,aAAa,CAACK,WAAW,CAAA;gBAC3D,IAAMC,aAAa,GACjBN,aAAa,CAACO,SAAS,GAAGP,aAAa,CAACK,WAAW,CAAA;gBACrD,IAAMG,eAAe,GACnBF,aAAa,KAAK,CAAC,GAAG,CAAC,GAAGF,cAAc,GAAGE,aAAa,CAAA;gBAC1D,0BAAA;gBACAxT,MAAM,CAAC2T,YAAY,CACjBT,aAAa,CAACU,QAAQ,EACtBV,aAAa,CAACA,aAAa,CAACQ,eAAe,CAAC,EAC5C,KAAK,EACL,KAAK,CAAA,kBAAA;;YAGP,iDAAA;YACA,iBAAA;YACA,uBAAA;YACA,oDAAA;YACA,OAAA;YACA,IAAA;YACF,CAAC,CAAC,CAAA;QACN,CAAC,MAAM;YACL,IAAK,IAAME,QAAQ,IAAIhB,8BAA8B,CACnD,IAAIiB,iBAAiB,CAACD,QAAQ,CAAC,EAAE;gBAC/B,kBAAA;gBACA5T,MAAM,CAAC2T,YAAY,CAACC,QAAQ,EAAE,IAAI,CAAC,CAAA;YACrC,CAAA;QACJ,CAAA;KACD,CAAA;AACH,CAAA;AAUA,SAASC,iBAAiBA,CAACC,MAAc,EAAE;IACzC,OACEA,MAAM,KAAK,QAAQ,IACnBA,MAAM,KAAK,QAAQ,IACnBA,MAAM,KAAK,WAAW,IACtBA,MAAM,KAAK,gBAAgB,CAAA;AAE/B,CAAA;AAEA,SAASjB,kCAAkCA,CACzCF,SAA6B,EAC7BpC,MAA8B,EAC9B;IACA,IAAMqC,8BAGL,GAAG,CAAA,CAAE,CAAA;IAEN,IAAK,IAAIhK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+J,SAAS,CAACnH,MAAM,EAAE5C,CAAC,EAAE,CAAE;QACzC,IAAK,IAAMkL,MAAM,IAAInB,SAAS,CAAC/J,CAAC,CAAC,CAAE;YACjC,IAAIiL,iBAAiB,CAACC,MAAM,CAAC,EAAE;gBAC7B,IAAMC,wBAAwB,GAAG;oBAC/BC,MAAM,EAAErB,SAAS,CAAC/J,CAAC,CAAC,CAACoL,MAAM;oBAC3BC,cAAc,EAAEtB,SAAS,CAAC/J,CAAC,CAAC,CAACqL,cAAc;oBAC3CC,MAAM,EAAEvB,SAAS,CAAC/J,CAAC,CAAC,CAACsL,MAAM;oBAC3BzB,cAAc,EACZhD,mBAAmB,CAACkD,SAAS,CAAC/J,CAAC,CAAC,CAACsL,MAAM,CAAC,IAAI3D,MAAM,CAACkC,cAAc;oBACnEnO,KAAK,EAAEqO,SAAS,CAAC/J,CAAC,CAAC,CAACkL,MAAM,CAAA;iBAC3B,CAAA;gBACDlB,8BAA8B,CAACkB,MAAM,CAAC,GACpClB,8BAA8B,CAACkB,MAAM,CAAC,IAAI,EAAE,CAAA;gBAC9ClB,8BAA8B,CAACkB,MAAM,CAAC,CAAC5Q,IAAI,CAAC6Q,wBAAwB,CAAC,CAAA;YACvE,CAAA;QACF,CAAA;IACF,CAAA;IACA,OAAOnB,8BAA8B,CAAA;AACvC,CAAA;AAEA,SAASG,kBAAkBA,CACzBH,8BAA0E,EAC1E5S,MAAuB,EACvB;IACA,IAAM8S,cAAc,GAAG,EAAE,CAAA;IACzB,IAAK,IAAMqB,SAAS,IAAIvB,8BAA8B,CAAE;QACtD,IAAMD,SAAS,GAAGC,8BAA8B,CAACuB,SAAS,CAAC,CAAA;QAC3D,IAAK,IAAIvL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+J,SAAS,CAACnH,MAAM,GAAG,CAAC,EAAE5C,CAAC,EAAE,CAAE;YAC7C,IAAIwL,UAAU,GAAGxL,CAAC,CAAA;YAClB,IAAIyL,QAAQ,GAAGzL,CAAC,GAAG,CAAC,CAAA;YACpB,IAAM2K,WAAW,GAAGZ,SAAS,CAACyB,UAAU,CAAC,CAACH,cAAc,CAAA;YACxD,IAAMR,SAAS,GAAGd,SAAS,CAAC0B,QAAQ,CAAC,CAACJ,cAAc,CAAA;YACpD,IAAId,SAAS,GAAGI,WAAW,CAAA;YAC3B,IAAIH,OAAO,GAAGK,SAAS,CAAA;YAEvB,IAAI7K,CAAC,KAAK,CAAC,EAAE;gBACXuK,SAAS,GAAG,CAAC/M,QAAQ,CAAA;gBACrB,IAAIqN,SAAS,KAAK,CAAC,EAAE;oBACnBY,QAAQ,GAAGD,UAAU,CAAA;gBACvB,CAAA;YACF,CAAA;YACA,IAAIxL,CAAC,KAAK+J,SAAS,CAACnH,MAAM,GAAG,CAAC,EAAE;gBAC9B4H,OAAO,GAAGhN,QAAQ,CAAA;gBAClB,IAAImN,WAAW,KAAK,CAAC,EAAE;oBACrBa,UAAU,GAAGC,QAAQ,CAAA;gBACvB,CAAA;YACF,CAAA;YAEAvB,cAAc,CAAC5P,IAAI,CAAC;gBAClBiQ,SAAS,EAATA,SAAS;gBACTC,OAAO,EAAPA,OAAO;gBACPG,WAAW,EAAEZ,SAAS,CAACyB,UAAU,CAAC,CAACH,cAAc;gBACjDR,SAAS,EAAEd,SAAS,CAAC0B,QAAQ,CAAC,CAACJ,cAAc;gBAC7CxB,cAAc,EAAEE,SAAS,CAACyB,UAAU,CAAC,CAAC3B,cAAc;gBACpDmB,QAAQ,EAAEO,SAAS;gBACnBjB,aAAa,EAAEoB,qBAAqB,CAClCH,SAAS,EACTxB,SAAS,CAACyB,UAAU,CAAC,CAAC9P,KAAK,EAC3BqO,SAAS,CAAC0B,QAAQ,CAAC,CAAC/P,KAAK,EACzBtE,MACF,CAAA;YACF,CAAC,CAAC,CAAA;QACJ,CAAA;IACF,CAAA;IACA8S,cAAc,CAACyB,IAAI,CAAC,SAACC,iBAAiB,EAAEC,kBAAkB,EAAK;QAC7D,OAAOD,iBAAiB,CAACjB,WAAW,GAAGkB,kBAAkB,CAAClB,WAAW,CAAA;IACvE,CAAC,CAAC,CAAA;IACF,OAAOT,cAAc,CAAA;AACvB,CAAA;AAEA,IAAM4B,oBAAoB,GAAG,SAAvBA,oBAAoBA,CACxBC,IAAoB,EACpBC,EAAkB,EAClBC,eAAyB,EACtB;IACH,OAAO,SAACC,CAAS,EAAK;QACpB,IAAMC,YAAY,GAAGC,WAAW,CAACL,IAAI,EAAEC,EAAE,EAAEE,CAAC,CAAC,CAAA;QAC7C,iNAAOG,YAAAA,AAAQ,EAACF,YAAY,CAAC,GACzBA,YAAY,GACZF,eAAe,CAACE,YAAY,CAAC,CAAA;KAClC,CAAA;AACH,CAAC,CAAA;AAED,SAAST,qBAAqBA,CAC5BV,QAAgB,EAChBsB,IAAqB,EACrBC,KAAsB,EACtBnV,MAAuB,EACvB;IACA,IAAMoV,QAAQ,+JAAGC,wBAAqB,CAACzB,QAAQ,CAAC,CAAA;IAEhD,IAAIwB,QAAQ,IAAIA,QAAQ,CAACE,MAAM,IAAIF,QAAQ,CAAA,MAAI,EAAE;QAC/C,IAAMG,eAAe,+JAAGC,UAAO,CAACC,kBAAkB,CAACC,iBAAiB,CAClEN,QAAQ,CAACE,MACX,CAAC,CAAA;QAED,IAAIC,eAAe,EAAE;YACnB,IAAMI,MAAM,GAAGJ,eAAe,CAACI,MAAM,CAAA;YACrC,IAAMC,QAAQ,GAAGD,MAAM,GAAGA,MAAM,CAACT,IAAI,EAAElV,MAAM,CAAC,GAAGkV,IAAI,CAAA;YACrD,IAAMW,SAAS,GAAGF,MAAM,GAAGA,MAAM,CAACR,KAAK,EAAEnV,MAAM,CAAC,GAAGmV,KAAK,CAAA;YAExD,mCAAA;YACA,IAAMW,iBAAiB,GAAGP,eAAe,CAACQ,KAAK,CAC7CH,QAAQ,EACRC,SAAS,EACT7V,MACF,CAAC,CAAA;YACD,IAAI8V,iBAAiB,EAAE;gBACrB,IAAME,MAAM,GAAGtB,oBAAoB,CAAA7E,KAAA,CAAA,KAAA,0KAAAC,UAAAA,AAAA,EAE9BgG,iBAAiB,CACtB,CAAC,CAAA;gBACD,OAAO,SAAUzM,CAAS,EAAE;oBAC1B,IAAIA,CAAC,KAAK,CAAC,EAAE,OAAO6L,IAAI,CAAA;oBACxB,IAAI7L,CAAC,KAAK,CAAC,EAAE,OAAO8L,KAAK,CAAA;oBACzB,OAAOa,MAAM,CAAC3M,CAAC,CAAC,CAAA;iBACjB,CAAA;YACH,CAAA;QACF,CAAA;IACF,CAAA;IAEA,mEAAA;IACA,OAAOqL,oBAAoB,CAAC,KAAK,EAAE,IAAI,EAAE,SAAUuB,IAAa,EAAE;QAChE,OAAOA,IAAI,GAAGd,KAAK,GAAGD,IAAI,CAAA;IAC5B,CAAC,CAAC,CAAA;AACJ,CAAA;AAEA;;CAEA,GACA,SAASF,WAAWA,CAClBL,IAAoB,EACpBC,EAAkB,EAClBE,CAAS,EACO;IAChB,IAAI,OAAOH,IAAI,KAAK,QAAQ,IAAI,OAAOC,EAAE,KAAK,QAAQ,EAAE;QACtD,OAAOD,IAAI,GAAA,CAAI,CAAC,GAAGG,CAAC,CAAC,GAAGF,EAAE,GAAGE,CAAC,CAAA;IAChC,CAAA;IACA,IACG,OAAOH,IAAI,KAAK,SAAS,IAAI,OAAOC,EAAE,KAAK,SAAS,IACpD,OAAOD,IAAI,KAAK,QAAQ,IAAI,OAAOC,EAAE,KAAK,QAAS,CAAA,sCAAA;MACpD;QACA,OAAOE,CAAC,GAAG,GAAG,GAAGH,IAAI,GAAGC,EAAE,CAAA;IAC5B,CAAA;IAEA,IAAIrL,KAAK,CAAC2M,OAAO,CAACvB,IAAI,CAAC,IAAIpL,KAAK,CAAC2M,OAAO,CAACtB,EAAE,CAAC,EAAE;QAC5C,4BAAA;QACA,IAAMuB,UAAU,GAAGxB,IAAI,CAACnJ,MAAM,CAAA;QAC9B,IAAM4K,QAAQ,GAAGxB,EAAE,CAACpJ,MAAM,CAAA;QAC1B,IAAMA,MAAM,GAAG3C,IAAI,CAACwN,GAAG,CAACF,UAAU,EAAEC,QAAQ,CAAC,CAAA;QAE7C,IAAME,CAAW,GAAG,EAAE,CAAA;QACtB,IAAK,IAAI1N,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4C,MAAM,EAAE5C,CAAC,EAAE,CAAE;YAC/B0N,CAAC,CAACpT,IAAI,CACJ8R,WAAW,CACTL,IAAI,CAAC/L,CAAC,GAAGuN,UAAU,GAAGvN,CAAC,GAAGuN,UAAU,GAAG,CAAC,CAAC,EACzCvB,EAAE,CAAChM,CAAC,GAAGwN,QAAQ,GAAGxN,CAAC,GAAGwN,QAAQ,GAAG,CAAC,CAAC,EACnCtB,CACF,CACF,CAAC,CAAA;QACH,CAAA;QACA,OAAOwB,CAAC,CAAA;IACV,CAAA;IACA,MAAM,IAAI9S,KAAK,CAAA,qCAAA,CAAAxB,MAAA,CAAuC2S,IAAI,EAAA,GAAA,CAAA,CAAA3S,MAAA,CAAI4S,EAAE,CAAE,CAAC,CAAA;AACrE;AC3PA;;CAEA,GACA,IAAa2B,qBAAqB,GAAA,WAAA,GAAA,YAAA;IAAA,SAAAA,qBAAA,GAAA;4KAAAnW,UAAAA,AAAA,EAAA,IAAA,EAAAmW,qBAAA,CAAA,CAAA;QAChC;;KAEF,GAFE,IAGApF,CAAAA,KAAK,GAAG,CAAC,CAAA;QAET;;KAEF,GAFE,IAGAqB,CAAAA,SAAS,GAAsB,QAAQ,CAAA;QAEvC;;KAEF,GAFE,IAGAnG,CAAAA,QAAQ,GAAoB,MAAM,CAAA;QAElC;;KAEF,GAFE,IAGQmK,CAAAA,OAAO,GAAG,QAAQ,CAAA;QAAA,IAC1B/D,CAAAA,cAAc,GAAGnE,MAAM,CAAA;QASvB;;KAEF,GAFE,IAGA8C,CAAAA,QAAQ,GAAG,CAAC,CAAA;QAEZ;;KAEF,GAFE,IAGAkB,CAAAA,IAAI,GAAa,MAAM,CAAA;QAEvB;;KAEF,GAFE,IAGAX,CAAAA,cAAc,GAAG,CAAC,CAAA;QAElB;;KAEF,GAFE,IAGAjB,CAAAA,UAAU,GAAG,CAAC,CAAA;QAAA,IAsBdwB,CAAAA,gBAAgB,GAAkB,IAAI,CAAA;QAAA,IAEtChF,CAAAA,QAAQ,GAAkB,IAAI,CAAA;IAAA,CAAA;IAAA,OAAAlM,2KAAAA,AAAA,EAAAuV,qBAAA,EAAA;QAAA;YAAA7T,GAAA,EAAA,QAAA;YAAAC,GAAA,EAlD9B,SAAAA,GAAAA,GAAa;gBACX,OAAO,IAAI,CAAC6T,OAAO,CAAA;aACpB;YAAAzS,GAAA,EACD,SAAAA,GAAWO,CAAAA,KAAa,EAAE;gBACxB,IAAI,CAACmO,cAAc,GAAGhD,mBAAmB,CAACnL,KAAK,CAAC,CAAA;gBAChD,IAAI,CAACkS,OAAO,GAAGlS,KAAK,CAAA;YACtB,CAAA;QAAC,CAAA;KAAA,CAAA,CAAA;AAAA,CAAA,EAAA;AC9BH;;;;;;;;;;;;;CAaA,GACA,SAASmS,kBAAkBA,CAACC,WAAqC,EAAE;IACjE,IAAMC,qBAAiC,GAAG,EAAE,CAAA;IAE5C,IAAK,IAAM/C,QAAQ,IAAI8C,WAAW,CAAE;QAClC,sBAAA;QACA,IAAI9C,QAAQ,IAAI;YAAC,QAAQ;YAAE,QAAQ;YAAE,WAAW;SAAC,EAAE;YACjD,SAAA;QACF,CAAA;QAEA,aAAA;QACA,IAAIgD,MAAoC,GAAGF,WAAW,CAAC9C,QAAQ,CAAC,CAAA;QAChE,IAAI,CAACrK,KAAK,CAAC2M,OAAO,CAACU,MAAM,CAAC,EAAE;YAC1BA,MAAM,GAAG;gBAACA,MAAM;aAAC,CAAA;QACnB,CAAA;QAEA,IAAMC,YAAY,GAAGD,MAAM,CAACpL,MAAM,CAAA;QAClC,IAAK,IAAI5C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiO,YAAY,EAAEjO,CAAC,EAAE,CAAE;YACrC,IAAI,CAAC+N,qBAAqB,CAAC/N,CAAC,CAAC,EAAE;gBAC7B,IAAMkO,QAAkB,GAAG,CAAA,CAAE,CAAA;gBAC7B,IAAI,QAAQ,IAAIJ,WAAW,EAAE;oBAC3BI,QAAQ,CAAC9C,MAAM,GAAG5R,MAAM,CAACsU,WAAW,CAAC1C,MAAM,CAAC,CAAA;gBAC9C,CAAA;gBAEA,IAAI,QAAQ,IAAI0C,WAAW,EAAE;oBAC3B,aAAA;oBACAI,QAAQ,CAAC5C,MAAM,GAAGwC,WAAW,CAACxC,MAAM,CAAA;gBACtC,CAAA;gBAEA,IAAI,WAAW,IAAIwC,WAAW,EAAE;oBAC9B,aAAA;oBACAI,QAAQ,CAACC,SAAS,GAAGL,WAAW,CAACK,SAAS,CAAA;gBAC5C,CAAA;gBACAJ,qBAAqB,CAAC/N,CAAC,CAAC,GAAGkO,QAAQ,CAAA;YACrC,CAAA;YAEA,IAAIF,MAAM,CAAChO,CAAC,CAAC,KAAKhE,SAAS,IAAIgS,MAAM,CAAChO,CAAC,CAAC,KAAK,IAAI,EAAE;gBACjD+N,qBAAqB,CAAC/N,CAAC,CAAC,CAACgL,QAAQ,CAAC,GAAGgD,MAAM,CAAChO,CAAC,CAAC,CAAA;YAChD,CAAA;QACF,CAAA;IACF,CAAA;IAEA+N,qBAAqB,CAACpC,IAAI,CAAC,SAAUxI,CAAC,EAAEX,CAAC,EAAE;QACzC,OACE,CAAEW,CAAC,CAACkI,cAAc,IAAe,CAAC,IAAA,CAAM7I,CAAC,CAAC6I,cAAc,IAAe,CAAC,CAAC,CAAA;IAE7E,CAAC,CAAC,CAAA;IACF,OAAO0C,qBAAqB,CAAA;AAC9B,CAAA;AAEO,SAASK,kBAAkBA,CAChCN,WAAyD,EACzDnG,MAA8B,EACV;IACpB,IAAImG,WAAW,KAAK,IAAI,EAAE;QACxB,OAAO,EAAE,CAAA;IACX,CAAA;IAEA,IAAI,CAACnN,KAAK,CAAC2M,OAAO,CAACQ,WAAW,CAAC,EAAE;QAC/BA,WAAW,GAAGD,kBAAkB,CAACC,WAAW,CAAC,CAAA;IAC/C,CAAA;IAEA,IAAI/D,SAAS,GAAG+D,WAAW,CAAC1G,GAAG,CAAC,SAACiH,gBAAgB,EAAK;QACpD,IAAMH,QAAkB,GAAG,CAAA,CAAE,CAAA;QAE7B,IAAIvG,MAAM,KAANA,IAAAA,IAAAA,MAAM,KAAA,KAAA,KAANA,MAAM,CAAEwG,SAAS,EAAE;YACrB,sFAAA;YACA,4FAAA;YACAD,QAAQ,CAACC,SAAS,GAAG,MAAM,CAAA;QAC7B,CAAA;QAEA,IAAK,IAAMjD,MAAM,IAAImD,gBAAgB,CAAE;YACrC,IAAIC,WAAW,GAAGD,gBAAgB,CAACnD,MAAM,CAAC,CAAA;YAC1C,IAAIA,MAAM,KAAK,QAAQ,EAAE;gBACvB,IAAIoD,WAAW,KAAK,IAAI,EAAE;oBACxBA,WAAW,GAAG9U,MAAM,CAAC8U,WAAW,CAAC,CAAA;oBACjC,IAAI,CAACC,QAAQ,CAACD,WAAW,CAAC,EACxB,MAAM,IAAI1T,KAAK,CAAC,mCAAmC,CAAC,CAAA;oBACtD,IAAI0T,WAAW,GAAG,CAAC,IAAIA,WAAW,GAAG,CAAC,EACpC,MAAM,IAAI1T,KAAK,CAAC,2CAA2C,CAAC,CAAA;oBAC9DsT,QAAQ,CAAC7C,cAAc,GAAGiD,WAAW,CAAA;gBACvC,CAAA;YACF,CAAC,MAAM,IAAIpD,MAAM,KAAK,WAAW,EAAE;gBACjC,6DAAA;gBACA,iFAAA;gBACA,IACE;oBAAC,SAAS;oBAAE,KAAK;oBAAE,YAAY;oBAAE,MAAM;iBAAC,CAAC7Q,OAAO,CAC9CiU,WACF,CAAC,KAAK,CAAC,CAAC,EACR;oBACA,MAAM,IAAI1T,KAAK,CAAA,EAAA,CAAAxB,MAAA,CAAIkV,WAAW,EAAA,gCAA+B,CAAC,CAAA;gBAChE,CAAA;YACF,CAAC,MAAM,CAKL;YAGF,uDAAA;YACAJ,QAAQ,CAAChD,MAAM,CAAC,GAAGoD,WAAW,CAAA;QAChC,CAAA;QACA,IAAIJ,QAAQ,CAAC9C,MAAM,KAAKpP,SAAS,EAAE;YACjCkS,QAAQ,CAAC9C,MAAM,GAAG,IAAI,CAAA;QACxB,CAAA;QACA,IAAI8C,QAAQ,CAAC5C,MAAM,KAAKtP,SAAS,EAAE;YACjC,8BAAA;YACAkS,QAAQ,CAAC5C,MAAM,GAAG,CAAA3D,MAAM,KAAA,IAAA,IAANA,MAAM,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAANA,MAAM,CAAE2D,MAAM,KAAI,QAAQ,CAAA;QAC9C,CAAA;QACA,IAAI4C,QAAQ,CAACC,SAAS,KAAKnS,SAAS,EAAE;YACpCkS,QAAQ,CAACC,SAAS,GAAG,MAAM,CAAA;QAC7B,CAAA;QACA,OAAOD,QAAQ,CAAA;IACjB,CAAC,CAAC,CAAA;IAEF,IAAIM,mBAAmB,GAAG,IAAI,CAAA;IAC9B,IAAIC,cAAc,GAAG,CAACjR,QAAQ,CAAA;IAC9B,IAAK,IAAIwC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+J,SAAS,CAACnH,MAAM,EAAE5C,CAAC,EAAE,CAAE;QACzC,IAAQoL,MAAM,GAAKrB,SAAS,CAAC/J,CAAC,CAAC,CAAvBoL,MAAM,CAAA;QACd,IAAI,EAACsD,4MAAAA,AAAK,EAACtD,MAAM,CAAC,EAAE;YAClB,IAAIA,MAAM,GAAGqD,cAAc,EAAE;gBAC3B,MAAM,IAAIE,SAAS,CACjB,sEACF,CAAC,CAAA;YACH,CAAA;YACAF,cAAc,GAAGrD,MAAM,CAAA;QACzB,CAAC,MAAM;YACLoD,mBAAmB,GAAG,KAAK,CAAA;QAC7B,CAAA;IACF,CAAA;IAEAzE,SAAS,GAAGA,SAAS,CAACM,MAAM,CAAC,SAAC6D,QAAQ,EAAK;QACzC,OAAO1U,MAAM,CAAC0U,QAAQ,CAAC9C,MAAM,CAAC,IAAI,CAAC,IAAI5R,MAAM,CAAC0U,QAAQ,CAAC9C,MAAM,CAAC,IAAI,CAAC,CAAA;IACrE,CAAC,CAAC,CAAA;IAEF,SAASwD,cAAcA,GAAG;QAAA,IAAAC,iBAAA,CAAA;QACxB,IAAAC,UAAA,GAAmB/E,SAAS,EAApBnH,MAAM,GAAAkM,UAAA,CAANlM,MAAM,CAAA;QACdmH,SAAS,CAACnH,MAAM,GAAG,CAAC,CAAC,CAACyI,cAAc,GAAG7R,MAAM,CAAAqV,CAAAA,iBAAA,GAC3C9E,SAAS,CAACnH,MAAM,GAAG,CAAC,CAAC,CAACwI,MAAM,MAAAyD,IAAAA,IAAAA,iBAAA,KAAAA,KAAAA,CAAAA,GAAAA,iBAAA,GAAI,CAClC,CAAC,CAAA;QACD,IAAIjM,MAAM,GAAG,CAAC,EAAE;YAAA,IAAAmM,mBAAA,CAAA;YACdhF,SAAS,CAAC,CAAC,CAAC,CAACsB,cAAc,GAAG7R,MAAM,CAAAuV,CAAAA,mBAAA,GAAChF,SAAS,CAAC,CAAC,CAAC,CAACqB,MAAM,MAAA,IAAA,IAAA2D,mBAAA,KAAAA,KAAAA,CAAAA,GAAAA,mBAAA,GAAI,CAAC,CAAC,CAAA;QAChE,CAAA;QAEA,IAAIC,aAAa,GAAG,CAAC,CAAA;QACrB,IAAIP,cAAc,GAAGjV,MAAM,CAACuQ,SAAS,CAAC,CAAC,CAAC,CAACsB,cAAc,CAAC,CAAA;QACxD,IAAK,IAAIrL,EAAC,GAAG,CAAC,EAAEA,EAAC,GAAG4C,MAAM,EAAE5C,EAAC,EAAE,CAAE;YAC/B,IAAMoL,OAAM,GAAGrB,SAAS,CAAC/J,EAAC,CAAC,CAACqL,cAAc,CAAA;YAC1C,IAAI,sMAACqD,QAAAA,AAAK,EAACtD,OAAM,CAAC,IAAI,KAACsD,yMAAAA,AAAK,EAACD,cAAc,CAAC,EAAE;gBAC5C,IAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGjP,EAAC,GAAGgP,aAAa,EAAEC,CAAC,EAAE,CACxClF,SAAS,CAACiF,aAAa,GAAGC,CAAC,CAAC,CAAC5D,cAAc,GACzCoD,cAAc,GACb,CAACjV,MAAM,CAAC4R,OAAM,CAAC,GAAGqD,cAAc,IAAIQ,CAAC,GAAA,CAAKjP,EAAC,GAAGgP,aAAa,CAAC,CAAA;gBACjEA,aAAa,GAAGhP,EAAC,CAAA;gBACjByO,cAAc,GAAGjV,MAAM,CAAC4R,OAAM,CAAC,CAAA;YACjC,CAAA;QACF,CAAA;IACF,CAAA;IACA,IAAI,CAACoD,mBAAmB,EAAEI,cAAc,EAAE,CAAA;IAE1C,OAAO7E,SAAS,CAAA;AAClB;ACxKA,IAAMmF,KAAK,GAAG,8BAA8B,CAACC,KAAK,CAAC,GAAG,CAAC,CAAA;AACvD,IAAMC,UAAU,GAAG,qCAAqC,CAACD,KAAK,CAAC,GAAG,CAAC,CAAA;AAC5D,SAASE,UAAUA,CACxBC,WAAkC,EAClCC,QAAiB,EACjB;IACA,IAAM5H,MAAM,GAAG,IAAIgG,qBAAqB,EAAE,CAAA;IAC1C,IAAI4B,QAAQ,EAAE;QACZ5H,MAAM,CAAC+B,IAAI,GAAG,MAAM,CAAA;QACpB/B,MAAM,CAAClE,QAAQ,GAAG,MAAM,CAAA;IAC1B,CAAA;IACA,IAAI,OAAO6L,WAAW,KAAK,QAAQ,IAAI,CAACjU,KAAK,CAACiU,WAAW,CAAC,EAAE;QAC1D3H,MAAM,CAAClE,QAAQ,GAAG6L,WAAW,CAAA;IAC/B,CAAC,MAAM,IAAIA,WAAW,KAAKtT,SAAS,EAAE;QACnCwT,MAAM,CAACC,IAAI,CAACH,WAAW,CAAC,CAA4B7E,OAAO,CAAC,SAACO,QAAQ,EAAK;YACzE,IACEsE,WAAW,CAACtE,QAAQ,CAAC,KAAKhP,SAAS,IACnCsT,WAAW,CAACtE,QAAQ,CAAC,KAAK,IAAI,IAC9BsE,WAAW,CAACtE,QAAQ,CAAC,KAAK,MAAM,EAChC;gBACA,IAAI,OAAOrD,MAAM,CAACqD,QAAQ,CAAC,KAAK,QAAQ,IAAIA,QAAQ,KAAK,UAAU,EAAE;oBACnE,IACE,OAAOsE,WAAW,CAACtE,QAAQ,CAAC,KAAK,QAAQ,IACzC3P,KAAK,CAACiU,WAAW,CAACtE,QAAQ,CAAC,CAAC,EAC5B;wBACA,OAAA;oBACF,CAAA;gBACF,CAAA;gBACA,IACEA,QAAQ,KAAK,MAAM,IACnBkE,KAAK,CAAC7U,OAAO,CAACiV,WAAW,CAACtE,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,EAC3C;oBACA,OAAA;gBACF,CAAA;gBACA,IACEA,QAAQ,KAAK,WAAW,IACxBoE,UAAU,CAAC/U,OAAO,CAACiV,WAAW,CAACtE,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC,EAChD;oBACA,OAAA;gBACF,CAAA;gBACA,aAAA;gBACArD,MAAM,CAACqD,QAAQ,CAAC,GAAGsE,WAAW,CAACtE,QAAQ,CAAC,CAAA;YAC1C,CAAA;QACF,CAAC,CAAC,CAAA;IACJ,CAAA;IACA,OAAOrD,MAAM,CAAA;AACf,CAAA;AAEO,SAAS+H,oBAAoBA,CAClCJ,WAAuD,EACvDC,QAAiB,EACjB;IACAD,WAAW,GAAGK,qBAAqB,CAACL,WAAW,KAAA,QAAXA,WAAW,KAAA,KAAA,CAAA,GAAXA,WAAW,GAAI;QAAE7L,QAAQ,EAAE,MAAA;IAAO,CAAC,CAAC,CAAA;IACxE,OAAO4L,UAAU,CAACC,WAAW,EAAEC,QAAQ,CAAC,CAAA;AAC1C,CAAA;AAEO,SAASI,qBAAqBA,CACnCL,WAA2C,EAC3C;IACA,IAAI,OAAOA,WAAW,KAAK,QAAQ,EAAE;QACnC,IAAIjU,KAAK,CAACiU,WAAW,CAAC,EAAE;YACtBA,WAAW,GAAG;gBAAE7L,QAAQ,EAAE,MAAA;aAAQ,CAAA;QACpC,CAAC,MAAM;YACL6L,WAAW,GAAG;gBAAE7L,QAAQ,EAAE6L,WAAAA;aAAa,CAAA;QACzC,CAAA;IACF,CAAA;IACA,OAAOA,WAAW,CAAA;AACpB,CAAA;AAEA;;;;;;;;;;;;CAYA,GACA,IAAaM,cAAc,GAAA,WAAA,GAAA,YAAA;IAGzB,gCAAA;IAcA,SAAAA,eACExY,MAAuB,EACvB0W,WAAyD,EACzDwB,WAA4C,EAC5C;QAAA,IAAA/X,KAAA,GAAA,IAAA,CAAA;4KAAAC,UAAAA,AAAA,EAAA,IAAA,EAAAoY,cAAA,CAAA,CAAA;QAAA,IApBFzB,CAAAA,SAAS,GAAuB,SAAS,CAAA;QAAA,IACzC0B,CAAAA,kBAAkB,GAAgC,SAAS,CAAA;QAoBzD,IAAI,CAACzY,MAAM,GAAGA,MAAM,CAAA;QACpB,IAAI,CAACuQ,MAAM,GAAG+H,oBAAoB,CAACJ,WAAW,EAAE,KAAK,CAAC,CAAA;QACtD,IAAI,CAAC3H,MAAM,CAACnP,MAAM,GAAG,IAAI,CAAA;QACzB,IAAI,CAACmP,MAAM,CAACS,cAAc,GAAGV,uBAAuB,CAAC,IAAI,CAACC,MAAM,CAAC,CAAA;QACjE,IAAI,CAACA,MAAM,CAACjO,OAAO,GAAGuG,IAAI,CAACwN,GAAG,CAC5B,CAAC,EACD,IAAI,CAAC9F,MAAM,CAACY,KAAK,GAAG,IAAI,CAACZ,MAAM,CAACS,cAAc,GAAG,IAAI,CAACT,MAAM,CAACa,QAC/D,CAAC,CAAA;QAED,IAAI,CAACsH,mBAAmB,GAAG1B,kBAAkB,CAACN,WAAW,EAAE,IAAI,CAACnG,MAAM,CAAC,CAAA;QACvE,IAAI,CAACuC,cAAc,GAAGJ,kBAAkB,CACtC,IAAI,CAACgG,mBAAmB,EACxB,IAAI,CAACnI,MAAM,EACX,IAAI,CAACvQ,MACP,CAAC,CAAA;QAED,6BAAA;QACA,IAAQ2Y,KAAK,8JAAKnD,WAAO,CAACoD,UAAU,CAA5BD,KAAK,CAAA;QACb,IAAI,CAACE,cAAc,GAAGF,KAAK,GACvB,IAAIA,KAAK,CAAwB,IAAI,CAACpI,MAAM,EAAE;YAC5C5N,GAAG,EAAE,SAALA,GAAGA,CAAG3C,MAAM,EAAE8Y,IAAI,EAAK;gBACrB,IAAIA,IAAI,KAAK,UAAU,EAAE;oBACvB,OAAO9Y,MAAM,CAACqM,QAAQ,KAAK,MAAM,GAAG,CAAC,GAAGrM,MAAM,CAACqM,QAAQ,CAAA;gBACzD,CAAA;gBACA,IAAIyM,IAAI,KAAK,MAAM,EAAE;oBACnB,OAAO9Y,MAAM,CAACsS,IAAI,KAAK,MAAM,GAAG,MAAM,GAAGtS,MAAM,CAACsS,IAAI,CAAA;gBACtD,CAAA;gBACA,IAAIwG,IAAI,KAAK,WAAW,EAAE;oBACxB,OAAQ3Y,KAAI,CAAC2B,SAAS,IAAI3B,KAAI,CAAC2B,SAAS,CAAC7B,WAAW,IAAK,IAAI,CAAA;gBAC/D,CAAA;gBACA,IAAI6Y,IAAI,KAAK,kBAAkB,EAAE;oBAC/B,IAAI,CAAC3Y,KAAI,CAAC2B,SAAS,IAAI3B,KAAI,CAAC2B,SAAS,CAACgC,SAAS,KAAK,SAAS,EAAE;wBAC7D,OAAO,IAAI,CAAA;oBACb,CAAA;oBACA,OAAO9D,MAAM,CAACkS,gBAAgB,IAAI,CAAC,CAAA;gBACrC,CAAA;gBACA,IAAI4G,IAAI,KAAK,UAAU,EAAE;oBACvB,IAAI,CAAC3Y,KAAI,CAAC2B,SAAS,IAAI3B,KAAI,CAAC2B,SAAS,CAACgC,SAAS,KAAK,SAAS,EAAE;wBAC7D,OAAO,IAAI,CAAA;oBACb,CAAA;oBACA,OAAO9D,MAAM,CAACkN,QAAQ,IAAI,CAAC,CAAA;gBAC7B,CAAA;gBACA,OAAOlN,MAAM,CAAC8Y,IAAI,CAAC,CAAA;aACpB;YACD/U,GAAG,EAAE,SAALA,GAAGA,GAAQ;gBACT,OAAO,IAAI,CAAA;YACb,CAAA;QACF,CAAC,CAAC,GACF,IAAI,CAACwM,MAAM,CAAA;IACjB,CAAA;IAAC,wKAAAvP,UAAAA,AAAA,EAAAwX,cAAA,EAAA;QAAA;YAAA9V,GAAA,EAAA,qBAAA;YAAA4B,KAAA,EAED,SAAAyU,mBAAmBA,GAAG;gBACpB,IAAI,CAACjG,cAAc,CACjB,IAAI,CAAC9S,MAAM,EACXoC,MAAM,CAAC,IAAI,CAAC4W,YAAY,CAC1B,CAAC,CAAA;YACH,CAAA;QAAC,CAAA;QAAA;YAAAtW,GAAA,EAAA,QAAA;YAAA4B,KAAA,EAED,SAAApC,MAAMA,CAAC+O,SAAwB,EAAW;gBACxC,IAAIA,SAAS,KAAK,IAAI,EAAE;oBACtB,OAAO,KAAK,CAAA;gBACd,CAAA;gBACA,IAAI,CAAC+H,YAAY,GAAG3G,0BAA0B,CAC5C,IAAI,CAAC9B,MAAM,CAACS,cAAc,EAC1BC,SAAS,EACT,IAAI,CAACV,MACP,CAAC,CAAA;gBACD,OAAO,IAAI,CAACyI,YAAY,KAAK,IAAI,CAAA;YACnC,CAAA;QAAC,CAAA;QAAA;YAAAtW,GAAA,EAAA,cAAA;YAAA4B,KAAA,EAED,SAAA2U,YAAYA,GAAuB;gBACjC,OAAO,IAAI,CAACP,mBAAmB,CAAA;YACjC,CAAA;QAAC,CAAA;QAAA;YAAAhW,GAAA,EAAA,cAAA;YAAA4B,KAAA,EACD,SAAA4U,YAAYA,CAACvG,SAAuD,EAAQ;gBAC1E,IAAI,CAAC+F,mBAAmB,GAAG1B,kBAAkB,CAACrE,SAAS,CAAC,CAAA;YAC1D,CAAA;QACA,CAAA;QAAA;YAAAjQ,GAAA,EAAA,mBAAA;YAAA4B,KAAA,EAGA,SAAAjC,iBAAiBA,GAAyB;gBACxC,OAAO,IAAI,CAACwW,cAAc,CAAA;YAC5B,CAAA;QACA,CAAA;QAAA;YAAAnW,GAAA,EAAA,WAAA;YAAA4B,KAAA,EAGA,SAAA6U,SAASA,GAAiB;gBACxB,OAAO,IAAI,CAAC5I,MAAM,CAAA;YACpB,CAAA;QACA,CAAA;QAAA;YAAA7N,GAAA,EAAA,cAAA;YAAA4B,KAAA,EAGA,SAAA8U,YAAYA,CAAC7I,MAA6B,EAAQ;gBAAA,IAAA7M,MAAA,GAAA,IAAA,CAAA;gBAChD0U,MAAM,CAACC,IAAI,CAAC9H,MAAM,IAAI,CAAA,CAAE,CAAC,CAAC8C,OAAO,CAAC,SAACgG,IAAI,EAAK;oBAC1C3V,MAAI,CAAC6M,MAAM,CAAC8I,IAAI,CAAC,GAAG9I,MAAM,CAAC8I,IAAI,CAAC,CAAA;gBAClC,CAAC,CAAC,CAAA;YACJ,CAAA;QAAC,CAAA;KAAA,CAAA,CAAA;AAAA,CAAA;ACxMI,SAASC,iBAAiBA,CAC/BC,aAAyB,EACzBC,cAA0B,EAC1B;IACA,OAAOpX,MAAM,CAACmX,aAAa,CAACxX,EAAE,CAAC,GAAGK,MAAM,CAACoX,cAAc,CAACzX,EAAE,CAAC,CAAA;AAC7D,CAAA;AAEA;;CAEA,GACA,IAAa0X,iBAAiB,GAAA,WAAA,GAAA,YAAA;IAyB5B,SAAAA,iBAAAA,CAAoBC,QAAmB,EAAE;QAAA,IAAAvZ,KAAA,GAAA,IAAA,CAAA;YAAAC,0KAAAA,AAAA,EAAA,IAAA,EAAAqZ,iBAAA,CAAA,CAAA;QAxBzC;;KAEF,GAFE,IAGAzU,CAAAA,UAAU,GAAgB,EAAE,CAAA;QAAA,IAEpB2U,CAAAA,OAAO,GAAG,KAAK,CAAA;QAAA,IAEfC,CAAAA,eAAe,GAAG,KAAK,CAAA;QAAA,IAEvBC,CAAAA,qBAAqB,GAAG,KAAK,CAAA;QAAA,IAErC7W,CAAAA,sBAAsB,GAAgB,EAAE,CAAA;QAAA,IAEhC8W,CAAAA,MAAM,GAAG,KAAK,CAAA;QAAA,IAEdC,CAAAA,cAAc,GAA8B,EAAE,CAAA;QAAA,IAEtD9Z,CAAAA,WAAW,GAAkB,IAAI,CAAA;QAAA,IAEzB+Z,CAAAA,KAAK,GAAG,CAAC,CAAA;QAAA,IACTC,CAAAA,YAAY,GAAoC,EAAE,CAAA;QAAA,IAAA,CAsGlDC,qBAAqB,GAAG,SAAC7Q,CAAS,EAAK;YAC7ClJ,KAAI,CAACF,WAAW,GAAGoJ,CAAC,CAAA;YACpBlJ,KAAI,CAACga,iBAAiB,EAAE,CAAA;YACxB,IAAIha,KAAI,CAAC6E,UAAU,CAACwG,MAAM,KAAK,CAAC,EAAE;gBAChCrL,KAAI,CAACyZ,eAAe,GAAG,KAAK,CAAA;YAC9B,CAAC,MAAM;gBACLzZ,KAAI,CAACia,qBAAqB,CAACja,KAAI,CAAC+Z,qBAAqB,CAAC,CAAA;YACxD,CAAA;SACD,CAAA;QAAA,IAAA,CAEOG,mBAAmB,GAAG,SAAChR,CAAS,EAAK;YAC3C,IAAMiR,UAAU,GAAGna,KAAI,CAAC8Z,YAAY,CAAA;YACpC9Z,KAAI,CAAC8Z,YAAY,GAAG,EAAE,CAAA;YACtB,IAAI5Q,CAAC,GAAGjH,MAAM,CAACjC,KAAI,CAACF,WAAW,CAAC,EAAEoJ,CAAC,GAAGjH,MAAM,CAACjC,KAAI,CAACF,WAAW,CAAC,CAAA;YAC9DE,KAAI,CAAC6E,UAAU,CAACuP,IAAI,CAAC+E,iBAAiB,CAAC,CAAA;YACvCnZ,KAAI,CAAC6E,UAAU,GAAG7E,KAAI,CAAC8F,IAAI,CAACoD,CAAC,EAAE,IAAI,EAAElJ,KAAI,CAAC6E,UAAU,CAAC,CAAC,CAAC,CAAC,CAAA;YACxDsV,UAAU,CAACjH,OAAO,CAAC,SAACkH,KAAK,EAAK;gBAC5BA,KAAK,CAAC,CAAC,CAAC,CAAClR,CAAC,CAAC,CAAA;YACb,CAAC,CAAC,CAAA;YACFlJ,KAAI,CAACqa,mBAAmB,EAAE,CAAA;SAC3B,CAAA;QAAA,IAtHmBd,CAAAA,QAAmB,GAAnBA,QAAmB,CAAA;IAAG,CAAA;IAAC,wKAAA1Y,UAAAA,AAAA,EAAAyY,iBAAA,EAAA;QAAA;YAAA/W,GAAA,EAAA,eAAA;YAAA4B,KAAA,EAE3C,SAAAsB,aAAaA,GAAG;gBACd,IAAI,CAACuU,iBAAiB,EAAE,CAAA;gBACxB,OAAO,IAAI,CAACnV,UAAU,CAAC+K,KAAK,EAAE,CAAA;YAChC,CAAA;QAAC,CAAA;QAAA;YAAArN,GAAA,EAAA,WAAA;YAAA4B,KAAA,EAED,SAAAmW,SAASA,GAAG;gBACV,OAAO,IAAI,CAACX,MAAM,CAAA;YACpB,CAAA;QAAC,CAAA;QAAA;YAAApX,GAAA,EAAA,MAAA;YAAA4B,KAAA,EAED,SAAAQ,IAAIA,CACF9E,MAAgB,EAChB2S,SAAuD,EACvDlM,OAA2C,EAChC;gBACX,IAAMrF,MAAM,GAAG,IAAIoX,cAAc,CAACxY,MAAM,EAAE2S,SAAS,EAAElM,OAAO,CAAC,CAAA;gBAC7D,IAAM3E,SAAS,GAAG,IAAIX,SAAS,CAACC,MAAM,EAAE,IAAI,CAAC,CAAA;gBAC7C,IAAI,CAAC4D,UAAU,CAAC9B,IAAI,CAACpB,SAAS,CAAC,CAAA;gBAC/B,IAAI,CAAC4Y,4BAA4B,EAAE,CAAA;gBACnC5Y,SAAS,CAACW,cAAc,EAAE,CAAA;gBAC1BX,SAAS,CAACgD,IAAI,EAAE,CAAA;gBAChBhD,SAAS,CAACW,cAAc,EAAE,CAAA;gBAC1B,OAAOX,SAAS,CAAA;YAClB,CAAA;QAKA,CAAA;QAAA;YAAAY,GAAA,EAAA,uBAAA;YAAA4B,KAAA,EACA,SAAAD,qBAAqBA,CAACvC,SAAoB,EAAE;gBAAA,IAAA4B,MAAA,GAAA,IAAA,CAAA;gBAC1C,IAAI,IAAI,CAACoW,MAAM,EAAE;oBACf,OAAA;gBACF,CAAA;gBACA,4CAAA;gBACAhY,SAAS,CAAC+D,UAAU,EAAE,CAAA;gBACtB,IAAMb,UAAU,GAAGlD,SAAS,CAAC4D,gBAAgB,EAAE,CAAA;gBAC/CV,UAAU,CAACuP,IAAI,CAAC+E,iBAAiB,CAAC,CAAA;gBAElC,4BAAA;gBACA,IAAMqB,kBAAkB,GAAG,IAAI,CAAC1U,IAAI,CAClC7D,MAAM,CAAC,IAAI,CAACnC,WAAW,CAAC,EACxB,KAAK,EACL+E,UAAU,CAAC+K,KAAK,EAClB,CAAC,CAAC,CAAC,CAAC,CAAA;gBACJ4K,kBAAkB,CAACtH,OAAO,CAAC,SAACvR,SAAS,EAAK;oBACxC,IAAMiE,KAAK,GAAGrC,MAAI,CAACsB,UAAU,CAAC/B,OAAO,CAACnB,SAAS,CAAC,CAAA;oBAChD,IAAIiE,KAAK,KAAK,CAAC,CAAC,EAAE;wBAChBrC,MAAI,CAACsB,UAAU,CAACgB,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC,CAAA;oBAClC,CAAA;gBACF,CAAC,CAAC,CAAA;gBACF,IAAI,CAACyU,mBAAmB,EAAE,CAAA;YAC5B,CAAA;QAAC,CAAA;QAAA;YAAA9X,GAAA,EAAA,SAAA;YAAA4B,KAAA,EAED,SAAAJ,OAAOA,GAAG;gBACR,IAAI,CAAC,IAAI,CAACyV,OAAO,EAAE;oBACjB,IAAI,CAACA,OAAO,GAAG,IAAI,CAAA;oBACnB,IAAI,CAACS,qBAAqB,CAAC,YAAM,CAAE,CAAC,CAAA;oBACpC,IAAI,CAACP,qBAAqB,GAAG,IAAI,CAAA;gBACnC,CAAA;gBACA,OAAO,IAAI,CAACA,qBAAqB,CAAA;YACnC,CAAA;QAAC,CAAA;QAAA;YAAAnX,GAAA,EAAA,SAAA;YAAA4B,KAAA,EAED,SAAAsW,OAAOA,GAAG;gBACR,IAAI,CAAClB,QAAQ,CAACmB,WAAW,CAACC,oBAAoB,CAAC,IAAI,CAACC,OAAO,CAAC,CAAA;YAC9D,CAAA;QAAC,CAAA;QAAA;YAAArY,GAAA,EAAA,qBAAA;YAAA4B,KAAA,EAED,SAAAkW,mBAAmBA,GAAG;gBACpB,IAAI,CAACT,cAAc,CAAC1G,OAAO,CAAC,SAACjS,MAAM,EAAK;oBACtCA,MAAM,KAAA,QAANA,MAAM,KAAA,KAAA,CAAA,IAANA,MAAM,CAAE2X,mBAAmB,EAAE,CAAA;gBAC/B,CAAC,CAAC,CAAA;gBACF,IAAI,CAACgB,cAAc,GAAG,EAAE,CAAA;YAC1B,CAAA;QAAC,CAAA;QAAA;YAAArX,GAAA,EAAA,0BAAA;YAAA4B,KAAA,EAED,SAAQ0W,wBAAwBA,GAAG;gBACjC,IAAI,CAAChY,sBAAsB,GAAG,IAAI,CAACA,sBAAsB,CAACiQ,MAAM,CAC9D,SAACnR,SAAS,EAAK;oBACb,OAAOA,SAAS,CAACW,cAAc,EAAE,CAAA;gBACnC,CACF,CAAC,CAAA;YACH,CAAA;QAAC,CAAA;QAAA;YAAAC,GAAA,EAAA,mBAAA;YAAA4B,KAAA,EAED,SAAQ6V,iBAAiBA,GAAG;gBAC1B,IAAI,CAACa,wBAAwB,EAAE,CAAA;gBAC/B,IAAI,CAAChW,UAAU,GAAG,IAAI,CAACA,UAAU,CAACiO,MAAM,CAAC,SAACnR,SAAS,EAAK;oBACtD,OACEA,SAAS,CAACgC,SAAS,KAAK,UAAU,IAAIhC,SAAS,CAACgC,SAAS,KAAK,MAAM,CAAA;gBAExE,CAAC,CAAC,CAAA;YACJ,CAAA;QAAC,CAAA;QAAA;YAAApB,GAAA,EAAA,8BAAA;YAAA4B,KAAA,EAED,SAAQoW,4BAA4BA,GAAG;gBACrC,IAAI,CAAC,IAAI,CAACd,eAAe,EAAE;oBACzB,IAAI,CAACA,eAAe,GAAG,IAAI,CAAA;oBAC3B,IAAI,CAACQ,qBAAqB,CAAC,IAAI,CAACF,qBAAqB,CAAC,CAAA;gBACxD,CAAA;YACF,CAAA;QAAC,CAAA;QAAA;YAAAxX,GAAA,EAAA,KAAA;YAAA4B,KAAA,EAwBD,SAAQ2W,GAAGA,CAACnG,CAAsB,EAAE;gBAClC,IAAM/S,EAAE,GAAG,IAAI,CAACiY,KAAK,EAAE,CAAA;gBACvB,IAAI,IAAI,CAACC,YAAY,CAACzO,MAAM,KAAK,CAAC,EAAE;oBAClC,IAAI,CAACuP,OAAO,GAAG,IAAI,CAACrB,QAAQ,CAACmB,WAAW,CAACT,qBAAqB,CAC5D,IAAI,CAACC,mBACP,CAAC,CAAA;gBACH,CAAA;gBACA,IAAI,CAACJ,YAAY,CAAC/W,IAAI,CAAC;oBAACnB,EAAE;oBAAE+S,CAAC;iBAAC,CAAC,CAAA;gBAC/B,OAAO/S,EAAE,CAAA;YACX,CAAA;QAAC,CAAA;QAAA;YAAAW,GAAA,EAAA,uBAAA;YAAA4B,KAAA,EAED,SAAQ8V,qBAAqBA,CAACtF,CAAuB,EAAE;gBAAA,IAAA1P,MAAA,GAAA,IAAA,CAAA;gBACrD,OAAO,IAAI,CAAC6V,GAAG,CAAC,SAACrM,CAAS,EAAK;oBAC7BxJ,MAAI,CAAC4V,wBAAwB,EAAE,CAAA;oBAC/BlG,CAAC,CAAClG,CAAC,CAAC,CAAA;oBACJxJ,MAAI,CAAC4V,wBAAwB,EAAE,CAAA;gBACjC,CAAC,CAAC,CAAA;YACJ,CAAA;QAAC,CAAA;QAAA;YAAAtY,GAAA,EAAA,MAAA;YAAA4B,KAAA,EAED,SAAA2B,IAAIA,CAACoD,CAAS,EAAEnD,gBAAyB,EAAEgV,kBAAgC,EAAE;gBAAA,IAAAjU,MAAA,GAAA,IAAA,EAAAkU,oBAAA,EAAAC,qBAAA,CAAA;gBAC3E,IAAI,CAACtB,MAAM,GAAG,IAAI,CAAA;gBAClB,IAAI,CAACD,qBAAqB,GAAG,KAAK,CAAA;gBAElC,IAAI,CAAC5Z,WAAW,GAAGoJ,CAAC,CAAA;gBACpB,IAAI,CAACsQ,OAAO,GAAG,KAAK,CAAA;gBAEpB,IAAM0B,gBAA2C,GAAG,EAAE,CAAA;gBACtD,IAAMC,iBAA4C,GAAG,EAAE,CAAA;gBACvD,IAAMC,gBAA6B,GAAG,EAAE,CAAA;gBACxC,IAAMZ,kBAA+B,GAAG,EAAE,CAAA;gBAEzCO,kBAAkB,CAA4B7H,OAAO,CAAC,SAACvR,SAAS,EAAK;oBACpEA,SAAS,CAACmE,IAAI,CAACoD,CAAC,EAAEnD,gBAAgB,CAAC,CAAA;oBAEnC,IAAI,CAACpE,SAAS,CAACG,SAAS,EAAE;wBACxBoZ,gBAAgB,CAACnY,IAAI,CAACpB,SAAS,CAACV,MAAM,CAAC,CAAA;wBACvCU,SAAS,CAACgE,YAAY,EAAE,CAAA;oBAC1B,CAAC,MAAM;wBACLwV,iBAAiB,CAACpY,IAAI,CAACpB,SAAS,CAACV,MAAM,CAAC,CAAA;wBACxCU,SAAS,CAAC+D,UAAU,EAAE,CAAA;oBACxB,CAAA;oBAEA,IAAI/D,SAAS,CAAC0Z,UAAU,EAAEvU,MAAI,CAAC0S,OAAO,GAAG,IAAI,CAAA;oBAE7C,IAAM8B,KAAK,GAAG3Z,SAAS,CAACG,SAAS,IAAIH,SAAS,CAAC0Z,UAAU,CAAA;oBACzD1Z,SAAS,CAACD,WAAW,GAAG4Z,KAAK,CAAA;oBAC7B,IAAIA,KAAK,EAAE;wBACTF,gBAAgB,CAACrY,IAAI,CAACpB,SAAS,CAAC,CAAA;oBAClC,CAAC,MAAM;wBACL6Y,kBAAkB,CAACzX,IAAI,CAACpB,SAAS,CAAC,CAAA;oBACpC,CAAA;gBACF,CAAC,CAAC,CAAA;gBAEF,CAAAqZ,oBAAA,GAAA,IAAI,CAACpB,cAAc,EAAC7W,IAAI,CAAA2M,KAAA,CAAAsL,oBAAA,EAAIE,gBAAgB,CAAC,CAAA;gBAC7C,CAAAD,qBAAA,GAAA,IAAI,CAACrB,cAAc,EAAC7W,IAAI,CAAA2M,KAAA,CAAAuL,qBAAA,EAAIE,iBAAiB,CAAC,CAAA;gBAE9C,IAAI,IAAI,CAAC3B,OAAO,EAAE,IAAI,CAACS,qBAAqB,CAAC,YAAM,CAAE,CAAC,CAAA;gBAEtD,IAAI,CAACN,MAAM,GAAG,KAAK,CAAA;gBACnB,OAAO;oBAACyB,gBAAgB;oBAAEZ,kBAAkB;iBAAC,CAAA;YAC/C,CAAA;QAAC,CAAA;KAAA,CAAA,CAAA;AAAA,CAAA;4JCzNHnF,UAAO,CAACkG,cAAc,GAAGjM,mBAAmB,CAAA;4JAC5C+F,UAAO,CAACiE,iBAAiB,GAAGA,iBAAiB","ignoreList":[0,1,2,3,4,5,6,7,8,9,10]}},
    {"offset": {"line": 4444, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4450, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 4463, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4481, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-path-generator/src/paths/Circle.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-path-generator/src/paths/Ellipse.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-path-generator/src/paths/Line.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-path-generator/src/paths/Path.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-path-generator/src/paths/Polygon.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-path-generator/src/paths/Polyline.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-path-generator/src/paths/Rect.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-path-generator/src/index.ts"],"sourcesContent":["import type { ParsedCircleStyleProps } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedCircleStyleProps,\n) {\n  const { cx = 0, cy = 0, r } = parsedStyle;\n  context.arc(cx, cy, r, 0, Math.PI * 2, false);\n}\n","import type { ParsedEllipseStyleProps } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedEllipseStyleProps,\n) {\n  const { cx = 0, cy = 0, rx, ry } = parsedStyle;\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n  if (context.ellipse) {\n    context.ellipse(cx, cy, rx, ry, 0, 0, Math.PI * 2, false);\n  } else {\n    // 如果不支持，则使用圆来绘制，进行变形\n    const r = rx > ry ? rx : ry;\n    const scaleX = rx > ry ? 1 : rx / ry;\n    const scaleY = rx > ry ? ry / rx : 1;\n    context.save();\n    context.scale(scaleX, scaleY);\n    context.arc(cx, cy, r, 0, Math.PI * 2);\n  }\n}\n","import type { ParsedLineStyleProps } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedLineStyleProps,\n) {\n  const {\n    x1,\n    y1,\n    x2,\n    y2,\n    markerStart,\n    markerEnd,\n    markerStartOffset,\n    markerEndOffset,\n  } = parsedStyle;\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = x2 - x1;\n    y = y2 - y1;\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = x1 - x2;\n    y = y1 - y2;\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\n","import type { ParsedPathStyleProps, Path } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedPathStyleProps,\n) {\n  const { markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n    parsedStyle;\n  const { absolutePath, segments } = parsedStyle.d;\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    const [p1, p2] = (markerStart.parentNode as Path).getStartTangent();\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    const [p1, p2] = (markerEnd.parentNode as Path).getEndTangent();\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  for (let i = 0; i < absolutePath.length; i++) {\n    const params = absolutePath[i];\n    const command = params[0];\n    const nextSegment = absolutePath[i + 1];\n    const useStartOffset =\n      i === 0 && (startOffsetX !== 0 || startOffsetY !== 0);\n    const useEndOffset =\n      (i === absolutePath.length - 1 ||\n        (nextSegment && (nextSegment[0] === 'M' || nextSegment[0] === 'Z'))) &&\n      endOffsetX !== 0 &&\n      endOffsetY !== 0;\n    const [startOffsetXTemp, startOffsetYTemp] = useStartOffset\n      ? [startOffsetX, startOffsetY]\n      : [0, 0];\n    const [endOffsetXTemp, endOffsetYTemp] = useEndOffset\n      ? [endOffsetX, endOffsetY]\n      : [0, 0];\n\n    switch (command) {\n      case 'M':\n        // Use start marker offset\n        context.moveTo(\n          params[1] + startOffsetXTemp,\n          params[2] + startOffsetYTemp,\n        );\n        break;\n      case 'L':\n        context.lineTo(params[1] + endOffsetXTemp, params[2] + endOffsetYTemp);\n        break;\n      case 'Q':\n        context.quadraticCurveTo(\n          params[1],\n          params[2],\n          params[3] + endOffsetXTemp,\n          params[4] + endOffsetYTemp,\n        );\n        break;\n      case 'C':\n        context.bezierCurveTo(\n          params[1],\n          params[2],\n          params[3],\n          params[4],\n          params[5] + endOffsetXTemp,\n          params[6] + endOffsetYTemp,\n        );\n        break;\n      case 'A': {\n        // FIXME startOffset / endOffset\n        const { arcParams } = segments[i];\n        const { cx, cy, rx, ry, startAngle, endAngle, xRotation, sweepFlag } =\n          arcParams;\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n        if (context.ellipse) {\n          context.ellipse(\n            cx,\n            cy,\n            rx,\n            ry,\n            xRotation,\n            startAngle,\n            endAngle,\n            !!(1 - sweepFlag),\n          );\n        } else {\n          // @see https://stackoverflow.com/a/47494351\n          const r = rx > ry ? rx : ry;\n          const scaleX = rx > ry ? 1 : rx / ry;\n          const scaleY = rx > ry ? ry / rx : 1;\n          context.translate(cx, cy);\n          context.rotate(xRotation);\n          context.scale(scaleX, scaleY);\n          context.arc(0, 0, r, startAngle, endAngle, !!(1 - sweepFlag));\n          context.scale(1 / scaleX, 1 / scaleY);\n          context.rotate(-xRotation);\n          context.translate(-cx, -cy);\n        }\n\n        if (useEndOffset) {\n          context.lineTo(params[6] + endOffsetX, params[7] + endOffsetY);\n        }\n        break;\n      }\n      case 'Z':\n        context.closePath();\n        break;\n      default:\n        break;\n    }\n  }\n}\n","import type { ParsedPolygonStyleProps } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedPolygonStyleProps,\n) {\n  const { markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n    parsedStyle;\n  const { points } = parsedStyle.points;\n  const { length } = points;\n\n  const x1 = points[0][0];\n  const y1 = points[0][1];\n  const x2 = points[length - 1][0];\n  const y2 = points[length - 1][1];\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 1][0] - points[0][0];\n    y = points[length - 1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  context.moveTo(\n    x1 + (startOffsetX || endOffsetX),\n    y1 + (startOffsetY || endOffsetY),\n  );\n  for (let i = 1; i < length - 1; i++) {\n    const point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2, y2);\n}\n","import type { ParsedPolylineStyleProps } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedPolylineStyleProps,\n) {\n  const { markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n    parsedStyle;\n  const { points } = parsedStyle.points;\n  const { length } = points;\n\n  const x1 = points[0][0];\n  const y1 = points[0][1];\n  const x2 = points[length - 1][0];\n  const y2 = points[length - 1][1];\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 2][0] - points[length - 1][0];\n    y = points[length - 2][1] - points[length - 1][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  for (let i = 1; i < length - 1; i++) {\n    const point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\n","import type { ParsedRectStyleProps } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedRectStyleProps,\n) {\n  const { x = 0, y = 0, radius, width, height } = parsedStyle;\n\n  const w = width;\n  const h = height;\n  const hasRadius = radius && radius.some((r) => r !== 0);\n\n  if (!hasRadius) {\n    // Canvas support negative width/height of rect\n    context.rect(x, y, w, h);\n  } else {\n    const signX = width > 0 ? 1 : -1;\n    const signY = height > 0 ? 1 : -1;\n    const sweepFlag = signX + signY === 0;\n    const [tlr, trr, brr, blr] = radius.map((r) =>\n      clamp(r, 0, Math.min(Math.abs(w) / 2, Math.abs(h) / 2)),\n    );\n\n    context.moveTo(signX * tlr + x, y);\n    context.lineTo(w - signX * trr + x, y);\n    if (trr !== 0) {\n      context.arc(\n        w - signX * trr + x,\n        signY * trr + y,\n        trr,\n        (-signY * Math.PI) / 2,\n        signX > 0 ? 0 : Math.PI,\n        sweepFlag,\n      );\n    }\n    context.lineTo(w + x, h - signY * brr + y);\n    if (brr !== 0) {\n      context.arc(\n        w - signX * brr + x,\n        h - signY * brr + y,\n        brr,\n        signX > 0 ? 0 : Math.PI,\n        signY > 0 ? Math.PI / 2 : 1.5 * Math.PI,\n        sweepFlag,\n      );\n    }\n    context.lineTo(signX * blr + x, h + y);\n    if (blr !== 0) {\n      context.arc(\n        signX * blr + x,\n        h - signY * blr + y,\n        blr,\n        signY > 0 ? Math.PI / 2 : -Math.PI / 2,\n        signX > 0 ? Math.PI : 0,\n        sweepFlag,\n      );\n    }\n    context.lineTo(x, signY * tlr + y);\n    if (tlr !== 0) {\n      context.arc(\n        signX * tlr + x,\n        signY * tlr + y,\n        tlr,\n        signX > 0 ? Math.PI : 0,\n        signY > 0 ? Math.PI * 1.5 : Math.PI / 2,\n        sweepFlag,\n      );\n    }\n  }\n}\n","import { AbstractRendererPlugin, Shape } from '@antv/g-lite';\nimport type { PathGenerator } from './interfaces';\nimport {\n  CirclePath,\n  EllipsePath,\n  LinePath,\n  PathPath,\n  PolygonPath,\n  PolylinePath,\n  RectPath,\n} from './paths';\n\nexport class Plugin extends AbstractRendererPlugin<{\n  pathGeneratorFactory: Record<Shape, PathGenerator<any>>;\n}> {\n  name = 'canvas-path-generator';\n  init(): void {\n    const pathGeneratorFactory: Record<Shape, PathGenerator<any>> = {\n      [Shape.CIRCLE]: CirclePath,\n      [Shape.ELLIPSE]: EllipsePath,\n      [Shape.RECT]: RectPath,\n      [Shape.LINE]: LinePath,\n      [Shape.POLYLINE]: PolylinePath,\n      [Shape.POLYGON]: PolygonPath,\n      [Shape.PATH]: PathPath,\n      [Shape.TEXT]: undefined,\n      [Shape.GROUP]: undefined,\n      [Shape.IMAGE]: undefined,\n      [Shape.HTML]: undefined,\n      [Shape.MESH]: undefined,\n      [Shape.FRAGMENT]: undefined,\n    };\n\n    // @ts-ignore\n    this.context.pathGeneratorFactory = pathGeneratorFactory;\n  }\n  destroy(): void {\n    // @ts-ignore\n    delete this.context.pathGeneratorFactory;\n  }\n}\n\nexport * from './interfaces';\n"],"names":["generatePath","context","parsedStyle","_parsedStyle$cx","cx","_parsedStyle$cy","cy","r","arc","Math","PI","rx","ry","ellipse","scaleX","scaleY","save","scale","x1","y1","x2","y2","markerStart","markerEnd","markerStartOffset","markerEndOffset","startOffsetX","startOffsetY","endOffsetX","endOffsetY","rad","x","y","isDisplayObject","atan2","cos","sin","moveTo","lineTo","_parsedStyle$d","d","absolutePath","segments","_getStartTangent","parentNode","getStartTangent","_getStartTangent2","_slicedToArray","p1","p2","_getEndTangent","getEndTangent","_getEndTangent2","i","length","params","command","nextSegment","useStartOffset","useEndOffset","_ref","_ref2","startOffsetXTemp","startOffsetYTemp","_ref3","_ref4","endOffsetXTemp","endOffsetYTemp","quadraticCurveTo","bezierCurveTo","arcParams","startAngle","endAngle","xRotation","sweepFlag","translate","rotate","closePath","points","point","_parsedStyle$x","_parsedStyle$y","radius","width","height","w","h","hasRadius","some","rect","signX","signY","_radius$map","map","clamp","min","abs","_radius$map2","tlr","trr","brr","blr","Plugin","_AbstractRendererPlug","_this","_classCallCheck","_len","arguments","args","Array","_key","_callSuper","concat","name","_inherits","_createClass","key","value","init","_pathGeneratorFactory","pathGeneratorFactory","_defineProperty","Shape","CIRCLE","CirclePath","ELLIPSE","EllipsePath","RECT","RectPath","LINE","LinePath","POLYLINE","PolylinePath","POLYGON","PolygonPath","PATH","PathPath","TEXT","undefined","GROUP","IMAGE","HTML","MESH","FRAGMENT","destroy","AbstractRendererPlugin"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7]}},
    {"offset": {"line": 4785, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4791, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/CanvasPickerPlugin.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/Circle.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/Ellipse.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/utils/math.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/Line.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/Path.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/Polygon.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/Polyline.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/Rect.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/Image.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/Text.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-picker/src/index.ts"],"sourcesContent":["import type {\n  BaseStyleProps,\n  DisplayObject,\n  PickingResult,\n  RenderingPlugin,\n  Shape,\n  IDocument,\n  RenderingPluginContext,\n  GlobalRuntime,\n} from '@antv/g-lite';\nimport { findClosestClipPathTarget, Point } from '@antv/g-lite';\nimport type { PathGenerator } from '@antv/g-plugin-canvas-path-generator';\nimport { mat4, vec3 } from 'gl-matrix';\n\nexport type PointInPathPicker<T extends BaseStyleProps> = (\n  displayObject: DisplayObject<T>,\n  point: Point,\n  isClipPath: boolean,\n  isPointInPath: (displayObject: DisplayObject<T>, point: Point) => boolean,\n  context: RenderingPluginContext,\n  runtime: GlobalRuntime,\n) => boolean;\n\nconst tmpVec3a = vec3.create();\nconst tmpVec3b = vec3.create();\nconst tmpVec3c = vec3.create();\nconst tmpMat4 = mat4.create();\n\ninterface Extended {\n  pathGeneratorFactory: Record<Shape, PathGenerator<any>>;\n  pointInPathPickerFactory: Record<Shape, PointInPathPicker<any>>;\n}\n\n/**\n * pick shape(s) with Mouse/Touch event\n *\n * 1. find AABB with r-tree\n * 2. do math calculation with geometry in an accurate way\n */\nexport class CanvasPickerPlugin implements RenderingPlugin {\n  static tag = 'CanvasPicker';\n\n  private context: RenderingPluginContext & Extended;\n  private runtime: GlobalRuntime;\n\n  apply(context: RenderingPluginContext, runtime: GlobalRuntime) {\n    const { renderingService, renderingContext } = context;\n    this.context = context as RenderingPluginContext & Extended;\n    this.runtime = runtime;\n\n    const document = renderingContext.root?.ownerDocument;\n\n    renderingService.hooks.pick.tapPromise(\n      CanvasPickerPlugin.tag,\n      async (result: PickingResult) => {\n        return this.pick(document, result);\n      },\n    );\n\n    renderingService.hooks.pickSync.tap(\n      CanvasPickerPlugin.tag,\n      (result: PickingResult) => {\n        return this.pick(document, result);\n      },\n    );\n  }\n\n  private pick(document: IDocument, result: PickingResult) {\n    const {\n      topmost,\n      position: { x, y },\n    } = result;\n\n    // position in world space\n    const position = vec3.set(tmpVec3a, x, y, 0);\n\n    // query by AABB first with spatial index(r-tree)\n    const hitTestList = document.elementsFromBBox(\n      position[0],\n      position[1],\n      position[0],\n      position[1],\n    );\n\n    // test with clip path & origin shape\n    // @see https://github.com/antvis/g/issues/1064\n    const pickedDisplayObjects: DisplayObject[] = [];\n    for (const displayObject of hitTestList) {\n      const worldTransform = displayObject.getWorldTransform();\n      const isHitOriginShape = this.isHit(\n        displayObject,\n        position,\n        worldTransform,\n        false,\n      );\n      if (isHitOriginShape) {\n        // should look up in the ancestor node\n        const clipped = findClosestClipPathTarget(displayObject);\n        if (clipped) {\n          const { clipPath } = clipped.parsedStyle;\n          const isHitClipPath = this.isHit(\n            clipPath,\n            position,\n            clipPath.getWorldTransform(),\n            true,\n          );\n          if (isHitClipPath) {\n            if (topmost) {\n              result.picked = [displayObject];\n              return result;\n            }\n            pickedDisplayObjects.push(displayObject);\n          }\n        } else {\n          if (topmost) {\n            result.picked = [displayObject];\n            return result;\n          }\n          pickedDisplayObjects.push(displayObject);\n        }\n      }\n    }\n\n    result.picked = pickedDisplayObjects;\n    return result;\n  }\n\n  private isHit = (\n    displayObject: DisplayObject,\n    position: vec3,\n    worldTransform: mat4,\n    isClipPath: boolean,\n  ) => {\n    // use picker for current shape's type\n    const pick =\n      this.context.pointInPathPickerFactory[displayObject.nodeName as Shape];\n    if (pick) {\n      // invert with world matrix\n      const invertWorldMat = mat4.invert(tmpMat4, worldTransform);\n\n      // transform client position to local space, do picking in local space\n      const localPosition = vec3.transformMat4(\n        tmpVec3b,\n        vec3.set(tmpVec3c, position[0], position[1], 0),\n        invertWorldMat,\n      );\n\n      if (\n        pick(\n          displayObject,\n          new Point(localPosition[0], localPosition[1]),\n          isClipPath,\n          this.isPointInPath,\n          this.context,\n          this.runtime,\n        )\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  /**\n   * use native picking method\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/isPointInPath\n   */\n  private isPointInPath = (displayObject: DisplayObject, position: Point) => {\n    const context = this.runtime.offscreenCanvasCreator.getOrCreateContext(\n      this.context.config.offscreenCanvas,\n    ) as CanvasRenderingContext2D;\n\n    const generatePath =\n      this.context.pathGeneratorFactory[displayObject.nodeName];\n    if (generatePath) {\n      context.beginPath();\n      generatePath(context, displayObject.parsedStyle);\n      context.closePath();\n    }\n\n    return context.isPointInPath(position.x, position.y);\n  };\n}\n","import type {\n  CircleStyleProps,\n  DisplayObject,\n  ParsedCircleStyleProps,\n  Point,\n} from '@antv/g-lite';\nimport { isFillOrStrokeAffected } from '@antv/g-lite';\nimport { distance } from '@antv/g-math';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<CircleStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n): boolean {\n  const {\n    cx = 0,\n    cy = 0,\n    r,\n    fill,\n    stroke,\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    pointerEvents = 'auto',\n  } = displayObject.parsedStyle as ParsedCircleStyleProps;\n  const halfLineWidth = (lineWidth + increasedLineWidthForHitTesting) / 2;\n  const absDistance = distance(cx, cy, position.x, position.y);\n\n  const [hasFill, hasStroke] = isFillOrStrokeAffected(\n    pointerEvents,\n    fill,\n    stroke,\n  );\n\n  if ((hasFill && hasStroke) || isClipPath) {\n    return absDistance <= r + halfLineWidth;\n  }\n  if (hasFill) {\n    return absDistance <= r;\n  }\n  if (hasStroke) {\n    return absDistance >= r - halfLineWidth && absDistance <= r + halfLineWidth;\n  }\n  return false;\n}\n","import type {\n  DisplayObject,\n  EllipseStyleProps,\n  ParsedEllipseStyleProps,\n  Point,\n} from '@antv/g-lite';\nimport { isFillOrStrokeAffected } from '@antv/g-lite';\n\nfunction ellipseDistance(\n  squareX: number,\n  squareY: number,\n  rx: number,\n  ry: number,\n) {\n  return squareX / (rx * rx) + squareY / (ry * ry);\n}\n\nexport function isPointInPath(\n  displayObject: DisplayObject<EllipseStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n): boolean {\n  const {\n    cx = 0,\n    cy = 0,\n    rx,\n    ry,\n    fill,\n    stroke,\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    pointerEvents = 'auto',\n  } = displayObject.parsedStyle as ParsedEllipseStyleProps;\n\n  const { x, y } = position;\n  const [hasFill, hasStroke] = isFillOrStrokeAffected(\n    pointerEvents,\n    fill,\n    stroke,\n  );\n\n  const halfLineWith = (lineWidth + increasedLineWidthForHitTesting) / 2;\n  const squareX = (x - cx) * (x - cx);\n  const squareY = (y - cy) * (y - cy);\n  // 使用椭圆的公式： x*x/rx*rx + y*y/ry*ry = 1;\n  if ((hasFill && hasStroke) || isClipPath) {\n    return (\n      ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <=\n      1\n    );\n  }\n  if (hasFill) {\n    return ellipseDistance(squareX, squareY, rx, ry) <= 1;\n  }\n  if (hasStroke) {\n    return (\n      ellipseDistance(squareX, squareY, rx - halfLineWith, ry - halfLineWith) >=\n        1 &&\n      ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <=\n        1\n    );\n  }\n  return false;\n}\n","import { distance, linePointToLine } from '@antv/g-math';\n\nexport function inBox(\n  minX: number,\n  minY: number,\n  width: number,\n  height: number,\n  x: number,\n  y: number,\n) {\n  return x >= minX && x <= minX + width && y >= minY && y <= minY + height;\n}\n\nexport function inRect(\n  minX: number,\n  minY: number,\n  width: number,\n  height: number,\n  lineWidth: number,\n  x: number,\n  y: number,\n) {\n  const halfWidth = lineWidth / 2;\n  // 将四个边看做矩形来检测，比边的检测算法要快\n  return (\n    inBox(minX - halfWidth, minY - halfWidth, width, lineWidth, x, y) || // 上边\n    inBox(\n      minX + width - halfWidth,\n      minY - halfWidth,\n      lineWidth,\n      height,\n      x,\n      y,\n    ) || // 右边\n    inBox(\n      minX + halfWidth,\n      minY + height - halfWidth,\n      width,\n      lineWidth,\n      x,\n      y,\n    ) || // 下边\n    inBox(minX - halfWidth, minY + halfWidth, lineWidth, height, x, y)\n  ); // 左边\n}\n\nexport function inArc(\n  cx: number,\n  cy: number,\n  r: number,\n  startAngle: number,\n  endAngle: number,\n  lineWidth: number,\n  x: number,\n  y: number,\n) {\n  const angle = (Math.atan2(y - cy, x - cx) + Math.PI * 2) % (Math.PI * 2); // 转换到 0 - 2 * Math.PI 之间\n  // if (angle < startAngle || angle > endAngle) {\n  //   return false;\n  // }\n  const point = {\n    x: cx + r * Math.cos(angle),\n    y: cy + r * Math.sin(angle),\n  };\n\n  return distance(point.x, point.y, x, y) <= lineWidth / 2;\n}\n\nexport function inLine(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  lineWidth: number,\n  x: number,\n  y: number,\n) {\n  const minX = Math.min(x1, x2);\n  const maxX = Math.max(x1, x2);\n  const minY = Math.min(y1, y2);\n  const maxY = Math.max(y1, y2);\n  const halfWidth = lineWidth / 2;\n  // 因为目前的方案是计算点到直线的距离，而有可能会在延长线上，所以要先判断是否在包围盒内\n  // 这种方案会在水平或者竖直的情况下载线的延长线上有半 lineWidth 的误差\n  if (\n    !(\n      x >= minX - halfWidth &&\n      x <= maxX + halfWidth &&\n      y >= minY - halfWidth &&\n      y <= maxY + halfWidth\n    )\n  ) {\n    return false;\n  }\n  // 因为已经计算了包围盒，所以仅需要计算到直线的距离即可，可以显著提升性能\n  return linePointToLine(x1, y1, x2, y2, x, y) <= lineWidth / 2;\n}\n\nexport function inPolyline(\n  points: any[],\n  lineWidth: number,\n  x: number,\n  y: number,\n  isClose: boolean,\n) {\n  const count = points.length;\n  if (count < 2) {\n    return false;\n  }\n  for (let i = 0; i < count - 1; i++) {\n    const x1 = points[i][0];\n    const y1 = points[i][1];\n    const x2 = points[i + 1][0];\n    const y2 = points[i + 1][1];\n\n    if (inLine(x1, y1, x2, y2, lineWidth, x, y)) {\n      return true;\n    }\n  }\n\n  // 如果封闭，则计算起始点和结束点的边\n  if (isClose) {\n    const first = points[0];\n    const last = points[count - 1];\n    if (inLine(first[0], first[1], last[0], last[1], lineWidth, x, y)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// 多边形的射线检测，参考：https://blog.csdn.net/WilliamSun0122/article/details/77994526\nconst tolerance = 1e-6;\n// 三态函数，判断两个double在eps精度下的大小关系\nfunction dcmp(x: number) {\n  if (Math.abs(x) < tolerance) {\n    return 0;\n  }\n\n  return x < 0 ? -1 : 1;\n}\n\n// 判断点Q是否在p1和p2的线段上\nfunction onSegment(p1: any, p2: any, q: any) {\n  if (\n    (q[0] - p1[0]) * (p2[1] - p1[1]) === (p2[0] - p1[0]) * (q[1] - p1[1]) &&\n    Math.min(p1[0], p2[0]) <= q[0] &&\n    q[0] <= Math.max(p1[0], p2[0]) &&\n    Math.min(p1[1], p2[1]) <= q[1] &&\n    q[1] <= Math.max(p1[1], p2[1])\n  ) {\n    return true;\n  }\n  return false;\n}\n\n// 判断点P在多边形内-射线法\nexport function inPolygon(points: any[], x: number, y: number) {\n  let isHit = false;\n  const n = points.length;\n  if (n <= 2) {\n    // svg 中点小于 3 个时，不显示，也无法被拾取\n    return false;\n  }\n  for (let i = 0; i < n; i++) {\n    const p1 = points[i];\n    const p2 = points[(i + 1) % n];\n    if (onSegment(p1, p2, [x, y])) {\n      // 点在多边形一条边上\n      return true;\n    }\n    // 前一个判断min(p1[1],p2[1])<P.y<=max(p1[1],p2[1])\n    // 后一个判断被测点 在 射线与边交点 的左边\n    if (\n      dcmp(p1[1] - y) > 0 !== dcmp(p2[1] - y) > 0 &&\n      dcmp(x - ((y - p1[1]) * (p1[0] - p2[0])) / (p1[1] - p2[1]) - p1[0]) < 0\n    ) {\n      isHit = !isHit;\n    }\n  }\n  return isHit;\n}\nexport function inPolygons(polygons: any[], x: number, y: number): boolean {\n  let isHit = false;\n  for (let i = 0; i < polygons.length; i++) {\n    const points = polygons[i];\n    isHit = inPolygon(points, x, y);\n    if (isHit) {\n      break;\n    }\n  }\n  return isHit;\n}\n","import type {\n  DisplayObject,\n  LineStyleProps,\n  ParsedLineStyleProps,\n  Point,\n} from '@antv/g-lite';\nimport { isFillOrStrokeAffected } from '@antv/g-lite';\nimport { inLine } from './utils/math';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<LineStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n): boolean {\n  const {\n    x1,\n    y1,\n    x2,\n    y2,\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    pointerEvents = 'auto',\n    fill,\n    stroke,\n  } = displayObject.parsedStyle as ParsedLineStyleProps;\n\n  const [, hasStroke] = isFillOrStrokeAffected(pointerEvents, fill, stroke);\n\n  if ((!hasStroke && !isClipPath) || !lineWidth) {\n    return false;\n  }\n\n  return inLine(\n    x1,\n    y1,\n    x2,\n    y2,\n    lineWidth + increasedLineWidthForHitTesting,\n    position.x,\n    position.y,\n  );\n}\n","import type {\n  DisplayObject,\n  GlobalRuntime,\n  ParsedPathStyleProps,\n  Path,\n  PathSegment,\n  PathStyleProps,\n  Point,\n  RenderingPluginContext,\n} from '@antv/g-lite';\nimport {\n  getOrCalculatePathTotalLength,\n  isFillOrStrokeAffected,\n} from '@antv/g-lite';\nimport { cubicPointDistance, quadPointDistance } from '@antv/g-math';\nimport { arcToCubic } from '@antv/util';\nimport { inBox, inLine, inPolygons } from './utils/math';\n\n// TODO: replace it with method in @antv/util\nfunction isPointInStroke(\n  segments: PathSegment[],\n  lineWidth: number,\n  px: number,\n  py: number,\n  length: number,\n) {\n  let isHit = false;\n  const halfWidth = lineWidth / 2;\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    const { currentPoint, params, prePoint, box } = segment;\n    // 如果在前面已经生成过包围盒，直接按照包围盒计算\n    if (\n      box &&\n      !inBox(\n        box.x - halfWidth,\n        box.y - halfWidth,\n        box.width + lineWidth,\n        box.height + lineWidth,\n        px,\n        py,\n      )\n    ) {\n      continue;\n    }\n    switch (segment.command) {\n      // L 和 Z 都是直线， M 不进行拾取\n      case 'L':\n      case 'Z':\n        isHit = inLine(\n          prePoint[0],\n          prePoint[1],\n          currentPoint[0],\n          currentPoint[1],\n          lineWidth,\n          px,\n          py,\n        );\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'Q':\n        const qDistance = quadPointDistance(\n          prePoint[0],\n          prePoint[1],\n          params[1],\n          params[2],\n          params[3],\n          params[4],\n          px,\n          py,\n        );\n        isHit = qDistance <= lineWidth / 2;\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'C':\n        const cDistance = cubicPointDistance(\n          prePoint[0], // 上一段结束位置, 即 C 的起始点\n          prePoint[1],\n          params[1], // 'C' 的参数，1、2 为第一个控制点，3、4 为第二个控制点，5、6 为结束点\n          params[2],\n          params[3],\n          params[4],\n          params[5],\n          params[6],\n          px,\n          py,\n          length,\n        );\n        isHit = cDistance <= lineWidth / 2;\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'A':\n        // cache conversion result\n        if (!segment.cubicParams) {\n          segment.cubicParams = arcToCubic(\n            prePoint[0],\n            prePoint[1],\n            params[1],\n            params[2],\n            params[3],\n            params[4],\n            params[5],\n            params[6],\n            params[7],\n            undefined,\n          ) as [number, number, number, number, number, number];\n        }\n\n        const args = segment.cubicParams;\n\n        // fixArc\n        let prePointInCubic = prePoint;\n        for (let i = 0; i < args.length; i += 6) {\n          const cDistance = cubicPointDistance(\n            prePointInCubic[0], // 上一段结束位置, 即 C 的起始点\n            prePointInCubic[1],\n            args[i],\n            args[i + 1],\n            args[i + 2],\n            args[i + 3],\n            args[i + 4],\n            args[i + 5],\n            px,\n            py,\n            length,\n          );\n          prePointInCubic = [args[i + 4], args[i + 5]];\n          isHit = cDistance <= lineWidth / 2;\n\n          if (isHit) {\n            return true;\n          }\n        }\n        break;\n      default:\n        break;\n    }\n  }\n  return isHit;\n}\n\nexport function isPointInPath(\n  displayObject: DisplayObject<PathStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n  isPointInPath: (\n    displayObject: DisplayObject<PathStyleProps>,\n    position: Point,\n  ) => boolean,\n  renderingPluginContext: RenderingPluginContext,\n  runtime: GlobalRuntime,\n): boolean {\n  const {\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    stroke,\n    fill,\n    d,\n    pointerEvents = 'auto',\n  } = displayObject.parsedStyle as ParsedPathStyleProps;\n\n  const { segments, hasArc, polylines, polygons } = d;\n  const [hasFill, hasStroke] = isFillOrStrokeAffected(\n    pointerEvents,\n    // Only a closed path can be filled.\n    polygons?.length && fill,\n    stroke,\n  );\n\n  const totalLength = getOrCalculatePathTotalLength(displayObject as Path);\n\n  let isHit = false;\n\n  if (hasFill || isClipPath) {\n    if (hasArc) {\n      // 存在曲线时，暂时使用 canvas 的 api 计算，后续可以进行多边形切割\n      isHit = isPointInPath(displayObject, position);\n    } else {\n      // 提取出来的多边形包含闭合的和非闭合的，在这里统一按照多边形处理\n      isHit =\n        inPolygons(polygons, position.x, position.y) ||\n        inPolygons(polylines, position.x, position.y);\n    }\n    return isHit;\n  }\n  if (hasStroke || isClipPath) {\n    isHit = isPointInStroke(\n      segments,\n      lineWidth + increasedLineWidthForHitTesting,\n      position.x,\n      position.y,\n      totalLength,\n    );\n  }\n\n  return isHit;\n}\n","import type {\n  DisplayObject,\n  ParsedPolygonStyleProps,\n  Point,\n  PolylineStyleProps,\n} from '@antv/g-lite';\nimport { isFillOrStrokeAffected } from '@antv/g-lite';\nimport { inPolygon, inPolyline } from './utils/math';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<PolylineStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n): boolean {\n  const {\n    stroke,\n    fill,\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    points,\n    pointerEvents = 'auto',\n  } = displayObject.parsedStyle as ParsedPolygonStyleProps;\n  const [hasFill, hasStroke] = isFillOrStrokeAffected(\n    pointerEvents,\n    fill,\n    stroke,\n  );\n\n  let isHit = false;\n  if (hasStroke || isClipPath) {\n    isHit = inPolyline(\n      points.points,\n      lineWidth + increasedLineWidthForHitTesting,\n      position.x,\n      position.y,\n      true,\n    );\n  }\n  if (!isHit && (hasFill || isClipPath)) {\n    isHit = inPolygon(points.points, position.x, position.y);\n  }\n  return isHit;\n}\n","import type {\n  DisplayObject,\n  ParsedPolylineStyleProps,\n  Point,\n  PolylineStyleProps,\n} from '@antv/g-lite';\nimport { isFillOrStrokeAffected } from '@antv/g-lite';\nimport { inPolyline } from './utils/math';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<PolylineStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n): boolean {\n  const {\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    points,\n    pointerEvents = 'auto',\n    fill,\n    stroke,\n  } = displayObject.parsedStyle as ParsedPolylineStyleProps;\n  const [, hasStroke] = isFillOrStrokeAffected(pointerEvents, fill, stroke);\n\n  if ((!hasStroke && !isClipPath) || !lineWidth) {\n    return false;\n  }\n\n  return inPolyline(\n    points.points,\n    lineWidth + increasedLineWidthForHitTesting,\n    position.x,\n    position.y,\n    false,\n  );\n}\n","import type {\n  DisplayObject,\n  ParsedRectStyleProps,\n  Point,\n  RectStyleProps,\n} from '@antv/g-lite';\nimport { GlobalRuntime, isFillOrStrokeAffected } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\nimport { inArc, inBox, inLine, inRect } from './utils/math';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<RectStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n  isPointInPath: (\n    displayObject: DisplayObject<RectStyleProps>,\n    position: Point,\n  ) => boolean,\n  runtime: GlobalRuntime,\n): boolean {\n  const {\n    radius,\n    fill,\n    stroke,\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    x = 0,\n    y = 0,\n    width,\n    height,\n    pointerEvents = 'auto',\n  } = displayObject.parsedStyle as ParsedRectStyleProps;\n\n  const [hasFill, hasStroke] = isFillOrStrokeAffected(\n    pointerEvents,\n    fill,\n    stroke,\n  );\n\n  const hasRadius = radius && radius.some((r) => r !== 0);\n\n  const lineWidthForHitTesting = lineWidth + increasedLineWidthForHitTesting;\n\n  // 无圆角时的策略\n  if (!hasRadius) {\n    const halfWidth = lineWidthForHitTesting / 2;\n    // 同时填充和带有边框\n    if ((hasFill && hasStroke) || isClipPath) {\n      return inBox(\n        x - halfWidth,\n        y - halfWidth,\n        width + halfWidth,\n        height + halfWidth,\n        position.x,\n        position.y,\n      );\n    }\n    // 仅填充\n    if (hasFill) {\n      return inBox(x, y, width, height, position.x, position.y);\n    }\n    if (hasStroke) {\n      return inRect(\n        x,\n        y,\n        width,\n        height,\n        lineWidthForHitTesting,\n        position.x,\n        position.y,\n      );\n    }\n  } else {\n    let isHit = false;\n    if (hasStroke || isClipPath) {\n      isHit = inRectWithRadius(\n        x,\n        y,\n        width,\n        height,\n        radius.map((r) =>\n          clamp(r, 0, Math.min(Math.abs(width) / 2, Math.abs(height) / 2)),\n        ) as [number, number, number, number],\n        lineWidthForHitTesting,\n        position.x,\n        position.y,\n      );\n    }\n    // 仅填充时带有圆角的矩形直接通过图形拾取\n    // 以后可以改成纯数学的近似拾取，将圆弧切割成多边形\n    if (!isHit && (hasFill || isClipPath)) {\n      isHit = isPointInPath(displayObject, position);\n    }\n    return isHit;\n  }\n\n  return false;\n}\n\nfunction inRectWithRadius(\n  minX: number,\n  minY: number,\n  width: number,\n  height: number,\n  radiusArray: [number, number, number, number],\n  lineWidth: number,\n  x: number,\n  y: number,\n) {\n  const [tlr, trr, brr, blr] = radiusArray;\n  return (\n    inLine(minX + tlr, minY, minX + width - trr, minY, lineWidth, x, y) ||\n    inLine(\n      minX + width,\n      minY + trr,\n      minX + width,\n      minY + height - brr,\n      lineWidth,\n      x,\n      y,\n    ) ||\n    inLine(\n      minX + width - brr,\n      minY + height,\n      minX + blr,\n      minY + height,\n      lineWidth,\n      x,\n      y,\n    ) ||\n    inLine(minX, minY + height - blr, minX, minY + tlr, lineWidth, x, y) ||\n    inArc(\n      minX + width - trr,\n      minY + trr,\n      trr,\n      1.5 * Math.PI,\n      2 * Math.PI,\n      lineWidth,\n      x,\n      y,\n    ) ||\n    inArc(\n      minX + width - brr,\n      minY + height - brr,\n      brr,\n      0,\n      0.5 * Math.PI,\n      lineWidth,\n      x,\n      y,\n    ) ||\n    inArc(\n      minX + blr,\n      minY + height - blr,\n      blr,\n      0.5 * Math.PI,\n      Math.PI,\n      lineWidth,\n      x,\n      y,\n    ) ||\n    inArc(minX + tlr, minY + tlr, tlr, Math.PI, 1.5 * Math.PI, lineWidth, x, y)\n  );\n}\n","import {\n  DisplayObject,\n  ParsedImageStyleProps,\n  Point,\n  ImageStyleProps,\n  Shape,\n  RenderingPluginContext,\n  GlobalRuntime,\n} from '@antv/g-lite';\nimport { StyleRenderer } from '@antv/g-plugin-canvas-renderer';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<ImageStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n  isPointInPath: (\n    displayObject: DisplayObject<ImageStyleProps>,\n    position: Point,\n  ) => boolean,\n  renderingPluginContext: RenderingPluginContext,\n  runtime: GlobalRuntime,\n): boolean {\n  const {\n    pointerEvents = 'auto',\n    x = 0,\n    y = 0,\n    width,\n    height,\n  } = displayObject.parsedStyle as ParsedImageStyleProps;\n\n  if (pointerEvents === 'non-transparent-pixel') {\n    const { offscreenCanvas } = renderingPluginContext.config;\n    const canvas =\n      runtime.offscreenCanvasCreator.getOrCreateCanvas(offscreenCanvas);\n    const context = runtime.offscreenCanvasCreator.getOrCreateContext(\n      offscreenCanvas,\n      {\n        willReadFrequently: true,\n      },\n    ) as CanvasRenderingContext2D;\n    canvas.width = width;\n    canvas.height = height;\n\n    (\n      (renderingPluginContext as any).defaultStyleRendererFactory as Record<\n        Shape,\n        StyleRenderer\n      >\n    )[Shape.IMAGE].render(\n      context,\n      { ...displayObject.parsedStyle, x: 0, y: 0 },\n      displayObject,\n      undefined,\n      undefined,\n      undefined,\n    );\n\n    const imagedata = context.getImageData(\n      position.x - x,\n      position.y - y,\n      1,\n      1,\n    ).data;\n    return imagedata.every((component) => component !== 0);\n  }\n\n  return true;\n}\n","import type { DisplayObject, Point, TextStyleProps } from '@antv/g-lite';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<TextStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n  isPointInPath: (\n    displayObject: DisplayObject<TextStyleProps>,\n    position: Point,\n  ) => boolean,\n): boolean {\n  const bounds = displayObject.getGeometryBounds();\n\n  // @see https://stackoverflow.com/questions/28706989/how-do-i-check-if-a-mouse-click-is-inside-a-rotated-text-on-the-html5-canvas-in\n  return (\n    position.x >= bounds.min[0] &&\n    position.y >= bounds.min[1] &&\n    position.x <= bounds.max[0] &&\n    position.y <= bounds.max[1]\n  );\n}\n","import { AbstractRendererPlugin, Shape } from '@antv/g-lite';\nimport type { PointInPathPicker } from './CanvasPickerPlugin';\nimport { CanvasPickerPlugin } from './CanvasPickerPlugin';\nimport { isPointInPath as CirclePicker } from './Circle';\nimport { isPointInPath as EllipsePicker } from './Ellipse';\nimport { isPointInPath as LinePicker } from './Line';\nimport { isPointInPath as PathPicker } from './Path';\nimport { isPointInPath as PolygonPicker } from './Polygon';\nimport { isPointInPath as PolylinePicker } from './Polyline';\nimport { isPointInPath as RectPicker } from './Rect';\nimport { isPointInPath as ImagePicker } from './Image';\nimport { isPointInPath as TextPicker } from './Text';\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'canvas-picker';\n  init(): void {\n    const pointInPathPickerFactory: Record<Shape, PointInPathPicker<any>> = {\n      [Shape.CIRCLE]: CirclePicker,\n      [Shape.ELLIPSE]: EllipsePicker,\n      [Shape.RECT]: RectPicker,\n      [Shape.LINE]: LinePicker,\n      [Shape.POLYLINE]: PolylinePicker,\n      [Shape.POLYGON]: PolygonPicker,\n      [Shape.PATH]: PathPicker,\n      [Shape.TEXT]: TextPicker,\n      [Shape.GROUP]: null,\n      [Shape.IMAGE]: ImagePicker,\n      [Shape.HTML]: null,\n      [Shape.MESH]: null,\n    };\n\n    // @ts-ignore\n    this.context.pointInPathPickerFactory = pointInPathPickerFactory;\n\n    this.addRenderingPlugin(new CanvasPickerPlugin());\n  }\n  destroy(): void {\n    // @ts-ignore\n    delete this.context.pointInPathPickerFactory;\n    this.removeAllRenderingPlugins();\n  }\n}\n"],"names":["tmpVec3a","vec3","create","tmpVec3b","tmpVec3c","tmpMat4","mat4","CanvasPickerPlugin","_this","_classCallCheck","isHit","displayObject","position","worldTransform","isClipPath","pick","context","pointInPathPickerFactory","nodeName","invertWorldMat","invert","localPosition","transformMat4","set","Point","isPointInPath","runtime","offscreenCanvasCreator","getOrCreateContext","config","offscreenCanvas","generatePath","pathGeneratorFactory","beginPath","parsedStyle","closePath","x","y","_createClass","key","value","apply","_renderingContext$roo","_this2","renderingService","renderingContext","document","root","ownerDocument","hooks","tapPromise","tag","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_context","prev","next","abrupt","stop","_x","arguments","pickSync","tap","topmost","_result$position","hitTestList","elementsFromBBox","pickedDisplayObjects","_iterator","_createForOfIteratorHelper","_step","s","n","done","getWorldTransform","isHitOriginShape","clipped","findClosestClipPathTarget","clipPath","isHitClipPath","picked","push","err","e","f","_ref$cx","cx","_ref$cy","cy","r","fill","stroke","_ref$lineWidth","lineWidth","_ref$increasedLineWid","increasedLineWidthForHitTesting","_ref$pointerEvents","pointerEvents","halfLineWidth","absDistance","distance","_isFillOrStrokeAffect","isFillOrStrokeAffected","_isFillOrStrokeAffect2","_slicedToArray","hasFill","hasStroke","ellipseDistance","squareX","squareY","rx","ry","halfLineWith","inBox","minX","minY","width","height","inRect","halfWidth","inArc","startAngle","endAngle","angle","Math","atan2","PI","point","cos","sin","inLine","x1","y1","x2","y2","min","maxX","max","maxY","linePointToLine","inPolyline","points","isClose","count","length","i","first","last","tolerance","dcmp","abs","onSegment","p1","p2","q","inPolygon","inPolygons","polygons","isPointInStroke","segments","px","py","segment","currentPoint","params","prePoint","box","command","qDistance","quadPointDistance","cDistance","cubicPointDistance","cubicParams","arcToCubic","undefined","args","prePointInCubic","renderingPluginContext","d","hasArc","polylines","totalLength","getOrCalculatePathTotalLength","radius","_ref$x","_ref$y","hasRadius","some","lineWidthForHitTesting","inRectWithRadius","map","clamp","radiusArray","_radiusArray","tlr","trr","brr","blr","canvas","getOrCreateCanvas","willReadFrequently","defaultStyleRendererFactory","Shape","IMAGE","render","_objectSpread","imagedata","getImageData","data","every","component","bounds","getGeometryBounds","Plugin","_AbstractRendererPlug","_len","Array","_key","_callSuper","concat","name","_inherits","init","_pointInPathPickerFac","_defineProperty","CIRCLE","CirclePicker","ELLIPSE","EllipsePicker","RECT","RectPicker","LINE","LinePicker","POLYLINE","PolylinePicker","POLYGON","PolygonPicker","PATH","PathPicker","TEXT","TextPicker","GROUP","ImagePicker","HTML","MESH","addRenderingPlugin","destroy","removeAllRenderingPlugins","AbstractRendererPlugin"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11]}},
    {"offset": {"line": 5321, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5327, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-image-loader/src/RefCountCache.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-image-loader/src/ImageSlicer.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-image-loader/src/ImagePool.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-image-loader/src/LoadImagePlugin.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-image-loader/src/index.ts"],"sourcesContent":["import { DisplayObject } from '@antv/g-lite';\n\nexport class RefCountCache<CacheValue> {\n  private cacheStore = new Map<\n    string,\n    { value: CacheValue; counter: Set<number> }\n  >();\n\n  onRefAdded(ref: DisplayObject) {}\n\n  has(key: string) {\n    return this.cacheStore.has(key);\n  }\n\n  put(key: string, item: CacheValue, ref: DisplayObject) {\n    if (this.cacheStore.has(key)) {\n      return false;\n    }\n\n    this.cacheStore.set(key, {\n      value: item,\n      counter: new Set([ref.entity]),\n    });\n    this.onRefAdded(ref);\n\n    return true;\n  }\n\n  get(key: string, ref: DisplayObject) {\n    const cacheItem = this.cacheStore.get(key);\n    if (!cacheItem) {\n      return null;\n    }\n\n    if (!cacheItem.counter.has(ref.entity)) {\n      cacheItem.counter.add(ref.entity);\n      this.onRefAdded(ref);\n    }\n\n    return cacheItem.value;\n  }\n\n  update(key: string, value: CacheValue, ref: DisplayObject) {\n    const cacheItem = this.cacheStore.get(key);\n    if (!cacheItem) {\n      return false;\n    }\n\n    cacheItem.value = { ...cacheItem.value, ...value };\n    if (!cacheItem.counter.has(ref.entity)) {\n      cacheItem.counter.add(ref.entity);\n      this.onRefAdded(ref);\n    }\n\n    return true;\n  }\n\n  release(key: string, ref: DisplayObject) {\n    const cacheItem = this.cacheStore.get(key);\n    if (!cacheItem) {\n      return false;\n    }\n\n    cacheItem.counter.delete(ref.entity);\n\n    if (cacheItem.counter.size <= 0) {\n      this.cacheStore.delete(key);\n    }\n\n    return true;\n  }\n\n  releaseRef(ref: DisplayObject) {\n    Array.from(this.cacheStore.keys()).forEach((key) => {\n      this.release(key, ref);\n    });\n  }\n\n  getSize() {\n    return this.cacheStore.size;\n  }\n\n  clear() {\n    this.cacheStore.clear();\n  }\n}\n","const tasks: (() => void)[] = [];\nlet nextFrameTasks: (() => void)[] = [];\n\ninterface API {\n  requestAnimationFrame: typeof requestAnimationFrame;\n  cancelAnimationFrame: typeof cancelAnimationFrame;\n  createCanvas: () => HTMLCanvasElement | OffscreenCanvas;\n}\n\nexport interface SliceResult {\n  tileSize: [number, number];\n  /** [rows, cols] */\n  gridSize: [number, number];\n  /**\n   * @example\n   * ```\n   * [\n   *  // tileY=0\n   *  [tileX=0, tileX=1, ...],\n   *  // tileY=1\n   *  [tileX=0, tileX=1, ...],\n   * ]\n   * ```\n   */\n  tiles: (null | {\n    x: number;\n    y: number;\n    tileX: number;\n    tileY: number;\n    data: HTMLCanvasElement | OffscreenCanvas;\n  })[][];\n}\n\nexport class ImageSlicer {\n  static api: API;\n  static TASK_NUM_PER_FRAME = 10;\n  static rafId: ReturnType<typeof requestAnimationFrame>;\n\n  static stop(api = ImageSlicer.api) {\n    if (ImageSlicer.rafId) {\n      api.cancelAnimationFrame(ImageSlicer.rafId);\n      ImageSlicer.rafId = null;\n    }\n  }\n\n  static executeTask(api = ImageSlicer.api) {\n    if (tasks.length <= 0 && nextFrameTasks.length <= 0) {\n      return;\n    }\n\n    nextFrameTasks.forEach((task) => task());\n    nextFrameTasks = tasks.splice(0, ImageSlicer.TASK_NUM_PER_FRAME);\n\n    ImageSlicer.rafId = api.requestAnimationFrame(() => {\n      ImageSlicer.executeTask(api);\n    });\n  }\n\n  static sliceImage(\n    image: HTMLImageElement,\n    sliceWidth: number,\n    sliceHeight: number,\n    rerender: () => void,\n    overlap = 0,\n    api = ImageSlicer.api,\n  ) {\n    const imageWidth = image.naturalWidth || image.width;\n    const imageHeight = image.naturalHeight || image.height;\n\n    // 计算步长(考虑重叠区域)\n    const strideW = sliceWidth - overlap;\n    const strideH = sliceHeight - overlap;\n\n    // 计算网格尺寸\n    const gridCols = Math.ceil(imageWidth / strideW);\n    const gridRows = Math.ceil(imageHeight / strideH);\n\n    const result: SliceResult = {\n      tileSize: [sliceWidth, sliceHeight],\n      gridSize: [gridRows, gridCols],\n      tiles: Array(gridRows)\n        .fill(null)\n        .map(() => Array(gridCols).fill(null) as SliceResult['tiles'][number]),\n    };\n\n    // 遍历网格创建切片\n    for (let row = 0; row < gridRows; row++) {\n      for (let col = 0; col < gridCols; col++) {\n        tasks.push(() => {\n          // 计算当前切片的坐标\n          const startX = col * strideW;\n          const startY = row * strideH;\n\n          // 处理最后一列/行的特殊情况\n          const [tempSliceWidth, tempSliceHeight] = [\n            Math.min(sliceWidth, imageWidth - startX),\n            Math.min(sliceHeight, imageHeight - startY),\n          ];\n\n          // 创建切片canvas\n          const sliceCanvas = api.createCanvas();\n          sliceCanvas.width = sliceWidth;\n          sliceCanvas.height = sliceHeight;\n          const sliceCtx = sliceCanvas.getContext('2d');\n\n          // 将图像部分绘制到切片canvas上\n          sliceCtx.drawImage(\n            image,\n            startX,\n            startY,\n            tempSliceWidth,\n            tempSliceHeight,\n            0,\n            0,\n            tempSliceWidth,\n            tempSliceHeight,\n          );\n\n          // 存储切片信息\n          result.tiles[row][col] = {\n            x: startX,\n            y: startY,\n            tileX: col,\n            tileY: row,\n            data: sliceCanvas,\n          };\n\n          rerender();\n        });\n      }\n    }\n\n    ImageSlicer.stop();\n    ImageSlicer.executeTask();\n\n    return result;\n  }\n}\n","import {\n  DisplayObject,\n  GradientType,\n  LinearGradient,\n  Pattern,\n  RadialGradient,\n  Rect,\n  Tuple3Number,\n  UnitType,\n  computeLinearGradient,\n  computeRadialGradient,\n  parseTransform,\n  parsedTransformToMat4,\n  Image,\n  OffscreenCanvasCreator,\n  ElementEvent,\n  type CanvasContext,\n  type GlobalRuntime,\n} from '@antv/g-lite';\nimport { isString } from '@antv/util';\nimport { mat4 } from 'gl-matrix';\nimport { RefCountCache } from './RefCountCache';\nimport { type SliceResult, ImageSlicer } from './ImageSlicer';\n\nexport interface ImageCache extends Partial<SliceResult> {\n  img: HTMLImageElement;\n  /** [width, height] */\n  size: [number, number];\n  downSampled?: ImageBitmap | HTMLImageElement;\n  downSamplingRate?: number;\n}\n\nconst IMAGE_CACHE = new RefCountCache<ImageCache>();\nIMAGE_CACHE.onRefAdded = function onRefAdded(\n  this: RefCountCache<ImageCache>,\n  ref,\n) {\n  ref.addEventListener(\n    ElementEvent.DESTROY,\n    () => {\n      this.releaseRef(ref);\n    },\n    { once: true },\n  );\n};\n\nexport type GradientParams = (LinearGradient & RadialGradient) & {\n  width: number;\n  height: number;\n  /**\n   * Top-left corner\n   */\n  min: [number, number];\n  type: GradientType;\n};\n\nexport class ImagePool {\n  static isSupportTile = !!OffscreenCanvasCreator.createCanvas();\n  private gradientCache: Record<string, CanvasGradient> = {};\n  private patternCache: Record<string, CanvasPattern> = {};\n\n  constructor(\n    public context: CanvasContext,\n    private runtime: GlobalRuntime,\n  ) {}\n\n  getImageSync(\n    src: Image['attributes']['src'],\n    ref: DisplayObject,\n    callback?: (cache: ImageCache) => void,\n  ): ImageCache | null {\n    const imageSource = isString(src) ? src : src.src;\n\n    if (IMAGE_CACHE.has(imageSource)) {\n      const imageCache = IMAGE_CACHE.get(imageSource, ref);\n\n      if (imageCache.img.complete) {\n        callback?.(imageCache);\n\n        return imageCache;\n      }\n    }\n\n    this.getOrCreateImage(src, ref)\n      .then((cache) => {\n        callback?.(cache);\n      })\n      .catch((reason) => {\n        console.error(reason);\n      });\n\n    return null;\n  }\n\n  getOrCreateImage(\n    src: Image['attributes']['src'],\n    ref: DisplayObject,\n  ): Promise<ImageCache> {\n    const imageSource = isString(src) ? src : src.src;\n\n    if (!isString(src) && !IMAGE_CACHE.has(imageSource)) {\n      const imageCache: ImageCache = {\n        img: src,\n        size: [src.naturalWidth || src.width, src.naturalHeight || src.height],\n        tileSize: calculateImageTileSize(src),\n      };\n\n      IMAGE_CACHE.put(imageSource, imageCache, ref);\n    }\n\n    if (IMAGE_CACHE.has(imageSource)) {\n      const imageCache = IMAGE_CACHE.get(imageSource, ref);\n\n      if (imageCache.img.complete) {\n        return Promise.resolve(imageCache);\n      }\n\n      return new Promise((resolve, reject) => {\n        imageCache.img.addEventListener('load', () => {\n          imageCache.size = [\n            imageCache.img.naturalWidth || imageCache.img.width,\n            imageCache.img.naturalHeight || imageCache.img.height,\n          ];\n          imageCache.tileSize = calculateImageTileSize(imageCache.img);\n          resolve(imageCache);\n        });\n\n        imageCache.img.addEventListener('error', (ev) => {\n          reject(ev);\n        });\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      // @see https://github.com/antvis/g/issues/938\n      const image = this.context.config.createImage();\n\n      if (image) {\n        const imageCache: ImageCache = {\n          img: image,\n          size: [0, 0],\n          tileSize: calculateImageTileSize(image),\n        };\n\n        IMAGE_CACHE.put(imageSource, imageCache, ref);\n\n        image.onload = () => {\n          imageCache.size = [\n            image.naturalWidth || image.width,\n            image.naturalHeight || image.height,\n          ];\n          imageCache.tileSize = calculateImageTileSize(imageCache.img);\n          resolve(imageCache);\n        };\n        image.onerror = (ev) => {\n          reject(ev);\n        };\n        image.crossOrigin = 'Anonymous';\n        image.src = imageSource;\n      }\n    });\n  }\n\n  async createDownSampledImage(\n    src: Image['attributes']['src'],\n    ref: DisplayObject,\n  ): Promise<ImageCache> {\n    const imageCache = await this.getOrCreateImage(src, ref);\n    if (typeof imageCache.downSamplingRate !== 'undefined') {\n      return imageCache;\n    }\n\n    const { enableLargeImageOptimization } = this.context.config;\n    const { maxDownSampledImageSize = 2048, downSamplingRateThreshold = 0.5 } =\n      typeof enableLargeImageOptimization === 'boolean'\n        ? {}\n        : enableLargeImageOptimization;\n    const createImageBitmapFunc = this.runtime.globalThis\n      .createImageBitmap as typeof createImageBitmap;\n    const [originWidth, originHeight] = imageCache.size;\n    let resizedImage: ImageCache['downSampled'] = imageCache.img;\n    let downSamplingRate = Math.min(\n      (maxDownSampledImageSize + maxDownSampledImageSize) /\n        (originWidth + originHeight),\n      Math.max(0.01, Math.min(downSamplingRateThreshold, 0.5)),\n    );\n\n    let updateCache: ImageCache = {\n      ...imageCache,\n      downSamplingRate,\n    };\n\n    IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n\n    if (createImageBitmapFunc) {\n      try {\n        resizedImage = await createImageBitmapFunc(imageCache.img, {\n          resizeWidth: originWidth * downSamplingRate,\n          resizeHeight: originHeight * downSamplingRate,\n        });\n      } catch {\n        downSamplingRate = 1;\n      }\n    } else {\n      downSamplingRate = 1;\n    }\n\n    updateCache = {\n      ...this.getImageSync(src, ref),\n      downSampled: resizedImage,\n      downSamplingRate,\n    };\n\n    IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n\n    return updateCache;\n  }\n\n  async createImageTiles(\n    src: Image['attributes']['src'],\n    tiles: [number, number][],\n    rerender: () => void,\n    ref: DisplayObject,\n  ): Promise<ImageCache> {\n    const imageCache = await this.getOrCreateImage(src, ref);\n    const { requestAnimationFrame, cancelAnimationFrame } =\n      ref.ownerDocument.defaultView;\n\n    ImageSlicer.api = {\n      requestAnimationFrame,\n      cancelAnimationFrame,\n      createCanvas: () => OffscreenCanvasCreator.createCanvas(),\n    };\n\n    const updateCache: ImageCache = {\n      ...imageCache,\n      ...ImageSlicer.sliceImage(\n        imageCache.img,\n        imageCache.tileSize[0],\n        imageCache.tileSize[0],\n        rerender,\n      ),\n    };\n\n    IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n\n    return updateCache;\n  }\n\n  releaseImage(src: Image['attributes']['src'], ref: DisplayObject) {\n    IMAGE_CACHE.release(isString(src) ? src : src.src, ref);\n  }\n\n  releaseImageRef(ref: DisplayObject) {\n    IMAGE_CACHE.releaseRef(ref);\n  }\n\n  getOrCreatePatternSync(\n    object: DisplayObject,\n    pattern: Pattern,\n    context: CanvasRenderingContext2D,\n    $offscreenCanvas: HTMLCanvasElement,\n    dpr: number,\n    min: Tuple3Number,\n    callback: () => void,\n  ) {\n    const patternKey = this.generatePatternKey(pattern);\n    if (patternKey && this.patternCache[patternKey]) {\n      return this.patternCache[patternKey];\n    }\n\n    const { image, repetition, transform } = pattern;\n    let src: CanvasImageSource;\n    let needScaleWithDPR = false;\n    // Image URL\n    if (isString(image)) {\n      const imageCache = this.getImageSync(image, object, callback);\n      src = imageCache?.img;\n    } else if ($offscreenCanvas) {\n      src = $offscreenCanvas;\n      needScaleWithDPR = true;\n    } else {\n      src = image as CanvasImageSource;\n    }\n\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createPattern\n    const canvasPattern = src && context.createPattern(src, repetition);\n\n    if (canvasPattern) {\n      let mat: mat4;\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasPattern/setTransform\n      if (transform) {\n        mat = parsedTransformToMat4(\n          parseTransform(transform),\n          new DisplayObject({}),\n        );\n      } else {\n        mat = mat4.identity(mat4.create());\n      }\n\n      if (needScaleWithDPR) {\n        mat4.scale(mat, mat, [1 / dpr, 1 / dpr, 1]);\n      }\n\n      canvasPattern.setTransform({\n        a: mat[0],\n        b: mat[1],\n        c: mat[4],\n        d: mat[5],\n        e: mat[12] + min[0],\n        f: mat[13] + min[1],\n      });\n    }\n\n    if (patternKey && canvasPattern) {\n      this.patternCache[patternKey] = canvasPattern;\n    }\n\n    return canvasPattern;\n  }\n\n  getOrCreateGradient(\n    params: GradientParams,\n    context: CanvasRenderingContext2D,\n  ) {\n    const key = this.generateGradientKey(params);\n    const { type, steps, min, width, height, angle, cx, cy, size } = params;\n\n    if (this.gradientCache[key]) {\n      return this.gradientCache[key];\n    }\n\n    let gradient: CanvasGradient | null = null;\n    if (type === GradientType.LinearGradient) {\n      const { x1, y1, x2, y2 } = computeLinearGradient(\n        min,\n        width,\n        height,\n        angle,\n      );\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createLinearGradient\n      gradient = context.createLinearGradient(x1, y1, x2, y2);\n    } else if (type === GradientType.RadialGradient) {\n      const { x, y, r } = computeRadialGradient(\n        min,\n        width,\n        height,\n        cx,\n        cy,\n        size,\n      );\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createRadialGradient\n      gradient = context.createRadialGradient(x, y, 0, x, y, r);\n    }\n\n    if (gradient) {\n      steps.forEach(({ offset, color }) => {\n        if (offset.unit === UnitType.kPercentage) {\n          gradient?.addColorStop(offset.value / 100, color.toString());\n        }\n      });\n\n      this.gradientCache[key] = gradient;\n    }\n\n    return this.gradientCache[key];\n  }\n\n  private generateGradientKey(params: GradientParams): string {\n    const { type, min, width, height, steps, angle, cx, cy, size } = params;\n    return `gradient-${type}-${angle?.toString() || 0}-${cx?.toString() || 0}-${\n      cy?.toString() || 0\n    }-${size?.toString() || 0}-${min[0]}-${min[1]}-${width}-${height}-${steps\n      .map(({ offset, color }) => `${offset}${color}`)\n      .join('-')}`;\n  }\n\n  private generatePatternKey(pattern: Pattern) {\n    const { image, repetition } = pattern;\n    // only generate cache for Image\n    if (isString(image)) {\n      return `pattern-${image}-${repetition}`;\n    }\n    if ((image as Rect).nodeName === 'rect') {\n      return `pattern-${(image as Rect).entity}-${repetition}`;\n    }\n  }\n}\n\nfunction calculateImageTileSize(img: HTMLImageElement): [number, number] {\n  if (!img.complete) {\n    return [0, 0];\n  }\n\n  const [width, height] = [\n    img.naturalWidth || img.width,\n    img.naturalHeight || img.height,\n  ];\n\n  let tileSize = 256;\n\n  [256, 512].forEach((size) => {\n    const rows = Math.ceil(height / size);\n    const cols = Math.ceil(width / size);\n\n    if (rows * cols < 1e3) {\n      tileSize = size;\n    }\n  });\n\n  return [tileSize, tileSize];\n}\n","import type {\n  FederatedEvent,\n  Image,\n  MutationEvent,\n  RenderingPlugin,\n  RenderingPluginContext,\n  DisplayObject,\n} from '@antv/g-lite';\nimport { ElementEvent, Shape } from '@antv/g-lite';\nimport { isString } from '@antv/util';\nimport { ImagePool } from './ImagePool';\n\nexport class LoadImagePlugin implements RenderingPlugin {\n  static tag = 'LoadImage';\n\n  apply(context: RenderingPluginContext & { imagePool: ImagePool }) {\n    const { renderingService, renderingContext, imagePool } = context;\n    const canvas = renderingContext.root.ownerDocument.defaultView;\n\n    const calculateWithAspectRatio = (\n      object: Image,\n      imageWidth: number,\n      imageHeight: number,\n    ) => {\n      const { width, height } = object.parsedStyle;\n      if (width && !height) {\n        object.setAttribute('height', (imageHeight / imageWidth) * width);\n      } else if (!width && height) {\n        object.setAttribute('width', (imageWidth / imageHeight) * height);\n      }\n    };\n\n    const handleMounted = (e: FederatedEvent) => {\n      const object = e.target as Image;\n      const { nodeName, attributes } = object;\n      if (nodeName === Shape.IMAGE) {\n        const { src, keepAspectRatio } = attributes;\n\n        imagePool.getImageSync(\n          src,\n          object as DisplayObject,\n          ({ img: { width, height } }) => {\n            if (keepAspectRatio) {\n              calculateWithAspectRatio(object, width, height);\n            }\n\n            // set dirty rectangle flag\n            object.renderable.dirty = true;\n            renderingService.dirtify();\n          },\n        );\n      }\n    };\n\n    const handleAttributeChanged = (e: MutationEvent) => {\n      const object = e.target as Image;\n      const { attrName, prevValue, newValue } = e;\n\n      if (object.nodeName !== Shape.IMAGE || attrName !== 'src') {\n        return;\n      }\n\n      if (prevValue !== newValue) {\n        imagePool.releaseImage(\n          prevValue as Image['attributes']['src'],\n          object as DisplayObject,\n        );\n      }\n\n      if (isString(newValue)) {\n        imagePool\n          .getOrCreateImage(newValue, object as DisplayObject)\n          .then(({ img: { width, height } }) => {\n            if (object.attributes.keepAspectRatio) {\n              calculateWithAspectRatio(object, width, height);\n            }\n\n            // set dirty rectangle flag\n            object.renderable.dirty = true;\n            renderingService.dirtify();\n          })\n          .catch(() => {\n            //\n          });\n      }\n    };\n\n    renderingService.hooks.init.tap(LoadImagePlugin.tag, () => {\n      canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.addEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n    });\n\n    renderingService.hooks.destroy.tap(LoadImagePlugin.tag, () => {\n      canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.removeEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n    });\n  }\n}\n","import { AbstractRendererPlugin, type GlobalRuntime } from '@antv/g-lite';\nimport { ImagePool, type ImageCache } from './ImagePool';\nimport { LoadImagePlugin } from './LoadImagePlugin';\n\nexport { ImagePool, type ImageCache };\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'image-loader';\n  init(runtime: GlobalRuntime): void {\n    // @ts-ignore\n    this.context.imagePool = new ImagePool(this.context, runtime);\n    this.addRenderingPlugin(new LoadImagePlugin());\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n  }\n}\n"],"names":["RefCountCache","_classCallCheck","cacheStore","Map","_createClass","key","value","onRefAdded","ref","has","put","item","set","counter","Set","entity","get","cacheItem","add","update","_objectSpread","release","size","releaseRef","_this","Array","from","keys","forEach","getSize","clear","tasks","nextFrameTasks","ImageSlicer","stop","api","arguments","length","undefined","rafId","cancelAnimationFrame","executeTask","task","splice","TASK_NUM_PER_FRAME","requestAnimationFrame","sliceImage","image","sliceWidth","sliceHeight","rerender","overlap","imageWidth","naturalWidth","width","imageHeight","naturalHeight","height","strideW","strideH","gridCols","Math","ceil","gridRows","result","tileSize","gridSize","tiles","fill","map","_loop","row","_loop2","col","push","startX","startY","_ref","min","tempSliceWidth","tempSliceHeight","sliceCanvas","createCanvas","sliceCtx","getContext","drawImage","x","y","tileX","tileY","data","IMAGE_CACHE","addEventListener","ElementEvent","DESTROY","once","ImagePool","context","runtime","gradientCache","patternCache","getImageSync","src","callback","imageSource","isString","imageCache","img","complete","getOrCreateImage","then","cache","reason","console","error","_this2","calculateImageTileSize","Promise","resolve","reject","ev","config","createImage","onload","onerror","crossOrigin","_createDownSampledImage","_asyncToGenerator","_regeneratorRuntime","mark","_callee","enableLargeImageOptimization","_ref$maxDownSampledIm","maxDownSampledImageSize","_ref$downSamplingRate","downSamplingRateThreshold","createImageBitmapFunc","_imageCache$size","originWidth","originHeight","resizedImage","downSamplingRate","updateCache","wrap","_context","prev","next","sent","abrupt","globalThis","createImageBitmap","_slicedToArray","max","resizeWidth","resizeHeight","_t","downSampled","createDownSampledImage","_x","_x2","apply","_createImageTiles","_callee2","_ref$ownerDocument$de","_context2","ownerDocument","defaultView","OffscreenCanvasCreator","createImageTiles","_x3","_x4","_x5","_x6","releaseImage","releaseImageRef","getOrCreatePatternSync","object","pattern","$offscreenCanvas","dpr","patternKey","generatePatternKey","repetition","transform","needScaleWithDPR","canvasPattern","createPattern","mat","parsedTransformToMat4","parseTransform","DisplayObject","mat4","identity","create","scale","setTransform","a","b","c","d","e","f","getOrCreateGradient","params","generateGradientKey","type","steps","angle","cx","cy","gradient","GradientType","LinearGradient","_computeLinearGradien","computeLinearGradient","x1","y1","x2","y2","createLinearGradient","RadialGradient","_computeRadialGradien","computeRadialGradient","r","createRadialGradient","_ref2","offset","color","unit","UnitType","kPercentage","_gradient","addColorStop","toString","concat","_ref3","join","nodeName","isSupportTile","rows","cols","LoadImagePlugin","renderingService","renderingContext","imagePool","canvas","root","calculateWithAspectRatio","_object$parsedStyle","parsedStyle","setAttribute","handleMounted","target","attributes","Shape","IMAGE","keepAspectRatio","_ref$img","renderable","dirty","dirtify","handleAttributeChanged","attrName","prevValue","newValue","_ref2$img","hooks","init","tap","tag","MOUNTED","ATTR_MODIFIED","destroy","removeEventListener","Plugin","_AbstractRendererPlug","_len","args","_key","_callSuper","name","_inherits","addRenderingPlugin","removeAllRenderingPlugins","AbstractRendererPlugin"],"mappings":"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","ignoreList":[0,1,2,3,4]}},
    {"offset": {"line": 6020, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6026, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-renderer/src/CanvasRendererPlugin.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-renderer/src/shapes/styles/helper.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-renderer/src/shapes/styles/OptimizedDefault.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-renderer/src/shapes/styles/Default.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-renderer/src/utils/math.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-renderer/src/shapes/styles/Image.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-renderer/src/shapes/styles/Text.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-canvas-renderer/src/index.ts"],"sourcesContent":["import type {\n  DisplayObject,\n  FederatedEvent,\n  RBushNodeAABB,\n  RenderingPlugin,\n  RBush,\n  RenderingPluginContext,\n  ContextService,\n  CanvasContext,\n  GlobalRuntime,\n  ParsedBaseStyleProps,\n  CSSRGB,\n} from '@antv/g-lite';\nimport {\n  AABB,\n  CanvasEvent,\n  CustomEvent,\n  ElementEvent,\n  Shape,\n  Node,\n} from '@antv/g-lite';\nimport { mat4, vec3 } from 'gl-matrix';\nimport { isNil } from '@antv/util';\nimport type { CanvasRendererPluginOptions } from './interfaces';\nimport type { Plugin } from '.';\n\ninterface Rect {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport interface RenderState {\n  restoreStack: DisplayObject[];\n  prevObject: DisplayObject;\n  currentContext: Map<keyof CanvasRenderingContext2D | 'lineDash', unknown>;\n}\n\n/**\n * support 2 modes in rendering:\n * * immediate\n * * delayed: render at the end of frame with dirty-rectangle\n */\nexport class CanvasRendererPlugin implements RenderingPlugin {\n  static tag = 'CanvasRenderer';\n\n  private context: Plugin['context'];\n\n  private pathGeneratorFactory: Plugin['context']['pathGeneratorFactory'];\n\n  /**\n   * RBush used in dirty rectangle rendering\n   */\n  private rBush: RBush<RBushNodeAABB>;\n\n  constructor(\n    private canvasRendererPluginOptions: CanvasRendererPluginOptions, // private styleRendererFactory: Record<Shape, StyleRenderer>,\n  ) {}\n\n  private removedRBushNodeAABBs: RBushNodeAABB[] = [];\n\n  private renderQueue: DisplayObject[] = [];\n\n  #renderState: RenderState = {\n    restoreStack: [],\n    prevObject: null,\n    currentContext: new Map(),\n  };\n\n  private clearFullScreenLastFrame = false;\n  private clearFullScreen = false;\n\n  /**\n   * view projection matrix\n   */\n  private vpMatrix = mat4.create();\n  private dprMatrix = mat4.create();\n  private tmpMat4 = mat4.create();\n  private vec3a = vec3.create();\n  private vec3b = vec3.create();\n  private vec3c = vec3.create();\n  private vec3d = vec3.create();\n\n  apply(context: RenderingPluginContext, runtime: GlobalRuntime) {\n    this.context = context as unknown as Plugin['context'];\n\n    const {\n      config,\n      camera,\n      renderingService,\n      renderingContext,\n      rBushRoot,\n      // @ts-ignore\n      pathGeneratorFactory,\n    } = this.context;\n    let enableRenderingOptimization =\n      config.renderer.getConfig().enableRenderingOptimization;\n\n    config.renderer.getConfig().enableDirtyCheck = false;\n    config.renderer.getConfig().enableDirtyRectangleRendering = false;\n\n    this.rBush = rBushRoot;\n    this.pathGeneratorFactory = pathGeneratorFactory;\n\n    const contextService =\n      context.contextService as ContextService<CanvasRenderingContext2D>;\n\n    const canvas = renderingContext.root.ownerDocument.defaultView;\n\n    const handleUnmounted = (e: FederatedEvent) => {\n      const object = e.target as DisplayObject;\n\n      // remove r-bush node\n      // @ts-ignore\n      const { rBushNode } = object;\n\n      if (rBushNode?.aabb) {\n        // save removed aabbs for dirty-rectangle rendering later\n        this.removedRBushNodeAABBs.push(rBushNode.aabb);\n      }\n    };\n\n    const handleCulled = (e: FederatedEvent) => {\n      const object = e.target as DisplayObject;\n      // @ts-ignore\n      const { rBushNode } = object;\n\n      if (rBushNode.aabb) {\n        // save removed aabbs for dirty-rectangle rendering later\n        this.removedRBushNodeAABBs.push(rBushNode.aabb);\n      }\n    };\n\n    renderingService.hooks.init.tap(CanvasRendererPlugin.tag, () => {\n      canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.addEventListener(ElementEvent.CULLED, handleCulled);\n\n      // clear fullscreen\n      const dpr = contextService.getDPR();\n      const { width, height } = config;\n      const context = contextService.getContext();\n      this.clearRect(\n        context,\n        0,\n        0,\n        width * dpr,\n        height * dpr,\n        config.background,\n      );\n    });\n\n    renderingService.hooks.destroy.tap(CanvasRendererPlugin.tag, () => {\n      canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.removeEventListener(ElementEvent.CULLED, handleCulled);\n      this.renderQueue = [];\n      this.removedRBushNodeAABBs = [];\n      this.#renderState = {\n        restoreStack: [],\n        prevObject: null,\n        currentContext: null,\n      };\n    });\n\n    const beforeDraw = () => {\n      const context = contextService.getContext();\n      const dpr = contextService.getDPR();\n      const { width, height } = config;\n      const { dirtyObjectNumThreshold, dirtyObjectRatioThreshold } =\n        this.canvasRendererPluginOptions;\n\n      // some heuristic conditions such as 80% object changed\n      const { total, rendered } = renderingService.getStats();\n      const ratio = rendered / total;\n\n      this.clearFullScreen =\n        this.clearFullScreenLastFrame ||\n        // @ts-ignore\n        !canvas.context.renderingPlugins[1]?.isFirstTimeRenderingFinished ||\n        renderingService.disableDirtyRectangleRendering() ||\n        (rendered > dirtyObjectNumThreshold &&\n          ratio > dirtyObjectRatioThreshold);\n\n      if (!context) {\n        return;\n      }\n\n      if (typeof context.resetTransform === 'function') {\n        context.resetTransform();\n      } else {\n        context.setTransform(1, 0, 0, 1, 0, 0);\n      }\n\n      if (this.clearFullScreen) {\n        this.clearRect(\n          context,\n          0,\n          0,\n          width * dpr,\n          height * dpr,\n          config.background,\n        );\n      }\n    };\n\n    /**\n     * render objects by z-index\n     *\n     * - The level of the child node will be affected by the level of the parent node\n     */\n    const renderByZIndex = (\n      object: DisplayObject,\n      context: CanvasRenderingContext2D,\n    ) => {\n      const stack = [object];\n\n      while (stack.length > 0) {\n        const currentObject = stack.pop();\n\n        if (currentObject.isVisible() && !currentObject.isCulled()) {\n          if (enableRenderingOptimization) {\n            this.renderDisplayObjectOptimized(\n              currentObject,\n              context,\n              this.context,\n              this.#renderState,\n              runtime,\n            );\n          } else {\n            this.renderDisplayObject(\n              currentObject,\n              context,\n              this.context,\n              this.#renderState,\n              runtime,\n            );\n          }\n        }\n\n        const objects =\n          currentObject.sortable?.sorted?.length > 0\n            ? currentObject.sortable.sorted\n            : currentObject.childNodes;\n        // should account for z-index\n        for (let i = objects.length - 1; i >= 0; i--) {\n          stack.push(objects[i] as unknown as DisplayObject);\n        }\n      }\n    };\n\n    // render at the end of frame\n    renderingService.hooks.endFrame.tap(CanvasRendererPlugin.tag, () => {\n      beforeDraw();\n\n      // Skip rendering.\n      if (renderingContext.root.childNodes.length === 0) {\n        this.clearFullScreenLastFrame = true;\n        return;\n      }\n\n      enableRenderingOptimization =\n        config.renderer.getConfig().enableRenderingOptimization;\n\n      // init\n      this.#renderState = {\n        restoreStack: [],\n        prevObject: null,\n        currentContext: this.#renderState.currentContext,\n      };\n      this.#renderState.currentContext.clear();\n      this.clearFullScreenLastFrame = false;\n\n      const context = contextService.getContext();\n      // clear & clip dirty rectangle\n      const dpr = contextService.getDPR();\n      mat4.fromScaling(this.dprMatrix, [dpr, dpr, 1]);\n      mat4.multiply(this.vpMatrix, this.dprMatrix, camera.getOrthoMatrix());\n\n      if (this.clearFullScreen) {\n        // console.time('renderByZIndex');\n        if (enableRenderingOptimization) {\n          context.save();\n          renderByZIndex(renderingContext.root, context);\n          context.restore();\n        } else {\n          renderByZIndex(renderingContext.root, context);\n        }\n        // console.timeEnd('renderByZIndex');\n\n        this.removedRBushNodeAABBs = [];\n      } else {\n        // console.log('canvas renderer next...', this.renderQueue);\n        // merge removed AABB\n        const dirtyRenderBounds = this.safeMergeAABB(\n          this.mergeDirtyAABBs(this.renderQueue),\n          ...this.removedRBushNodeAABBs.map(({ minX, minY, maxX, maxY }) => {\n            const aabb = new AABB();\n            aabb.setMinMax(\n              // vec3.fromValues(minX, minY, 0),\n              // vec3.fromValues(maxX, maxY, 0),\n              [minX, minY, 0],\n              [maxX, maxY, 0],\n            );\n            return aabb;\n          }),\n        );\n        this.removedRBushNodeAABBs = [];\n\n        if (AABB.isEmpty(dirtyRenderBounds)) {\n          this.renderQueue = [];\n          return;\n        }\n\n        const dirtyRect = this.convertAABB2Rect(dirtyRenderBounds);\n        const { x, y, width, height } = dirtyRect;\n\n        const tl = vec3.transformMat4(this.vec3a, [x, y, 0], this.vpMatrix);\n        const tr = vec3.transformMat4(\n          this.vec3b,\n          [x + width, y, 0],\n          this.vpMatrix,\n        );\n        const bl = vec3.transformMat4(\n          this.vec3c,\n          [x, y + height, 0],\n          this.vpMatrix,\n        );\n        const br = vec3.transformMat4(\n          this.vec3d,\n          [x + width, y + height, 0],\n          this.vpMatrix,\n        );\n\n        const minx = Math.min(tl[0], tr[0], br[0], bl[0]);\n        const miny = Math.min(tl[1], tr[1], br[1], bl[1]);\n        const maxx = Math.max(tl[0], tr[0], br[0], bl[0]);\n        const maxy = Math.max(tl[1], tr[1], br[1], bl[1]);\n\n        const ix = Math.floor(minx);\n        const iy = Math.floor(miny);\n        const iwidth = Math.ceil(maxx - minx);\n        const iheight = Math.ceil(maxy - miny);\n\n        context.save();\n        this.clearRect(context, ix, iy, iwidth, iheight, config.background);\n        context.beginPath();\n        context.rect(ix, iy, iwidth, iheight);\n        context.clip();\n\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations\n        context.setTransform(\n          this.vpMatrix[0],\n          this.vpMatrix[1],\n          this.vpMatrix[4],\n          this.vpMatrix[5],\n          this.vpMatrix[12],\n          this.vpMatrix[13],\n        );\n\n        // draw dirty rectangle\n        const { enableDirtyRectangleRenderingDebug } =\n          config.renderer.getConfig();\n        if (enableDirtyRectangleRenderingDebug) {\n          canvas.dispatchEvent(\n            new CustomEvent(CanvasEvent.DIRTY_RECTANGLE, {\n              dirtyRect: {\n                x: ix,\n                y: iy,\n                width: iwidth,\n                height: iheight,\n              },\n            }),\n          );\n        }\n\n        // search objects intersect with dirty rectangle\n        const dirtyObjects = this.searchDirtyObjects(dirtyRenderBounds);\n\n        // do rendering\n        dirtyObjects\n          // sort by z-index\n          .sort((a, b) => a.sortable.renderOrder - b.sortable.renderOrder)\n          .forEach((object) => {\n            // culled object should not be rendered\n            if (object && object.isVisible() && !object.isCulled()) {\n              this.renderDisplayObject(\n                object,\n                context,\n                this.context,\n                this.#renderState,\n                runtime,\n              );\n            }\n          });\n\n        context.restore();\n\n        // save dirty AABBs in last frame\n        this.renderQueue.forEach((object) => {\n          this.saveDirtyAABB(object);\n        });\n\n        // clear queue\n        this.renderQueue = [];\n      }\n\n      // pop restore stack, eg. root -> parent -> child\n      this.#renderState.restoreStack.forEach(() => {\n        context.restore();\n      });\n      // clear restore stack\n      this.#renderState.restoreStack = [];\n    });\n\n    renderingService.hooks.render.tap(\n      CanvasRendererPlugin.tag,\n      (object: DisplayObject) => {\n        if (!this.clearFullScreen) {\n          // render at the end of frame\n          this.renderQueue.push(object);\n        }\n      },\n    );\n  }\n\n  private clearRect(\n    context: CanvasRenderingContext2D,\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    background: string,\n  ) {\n    // clearRect is faster than fillRect @see https://stackoverflow.com/a/30830253\n    context.clearRect(x, y, width, height);\n    if (background) {\n      context.fillStyle = background;\n      context.fillRect(x, y, width, height);\n    }\n  }\n\n  renderDisplayObjectOptimized(\n    object: DisplayObject,\n    context: CanvasRenderingContext2D,\n    canvasContext: CanvasContext,\n    renderState: RenderState,\n    runtime: GlobalRuntime,\n  ) {\n    const nodeName = object.nodeName as Shape;\n    let updateTransform = false;\n    let clipDraw = false;\n\n    // @ts-ignore\n    const styleRenderer = this.context.styleRendererFactory[nodeName];\n    const generatePath = this.pathGeneratorFactory[nodeName];\n\n    // clip path\n    const { clipPath } = object.parsedStyle;\n    if (clipPath) {\n      updateTransform =\n        !renderState.prevObject ||\n        !mat4.exactEquals(\n          clipPath.getWorldTransform(),\n          renderState.prevObject.getWorldTransform(),\n        );\n\n      if (updateTransform) {\n        this.applyWorldTransform(context, clipPath);\n        renderState.prevObject = null;\n      }\n\n      // generate path in local space\n      const generatePath =\n        this.pathGeneratorFactory[clipPath.nodeName as Shape];\n      if (generatePath) {\n        context.save();\n        clipDraw = true;\n\n        context.beginPath();\n        generatePath(context, clipPath.parsedStyle);\n        context.closePath();\n        context.clip();\n      }\n    }\n\n    // fill & stroke\n\n    if (styleRenderer) {\n      updateTransform =\n        !renderState.prevObject ||\n        !mat4.exactEquals(\n          object.getWorldTransform(),\n          renderState.prevObject.getWorldTransform(),\n        );\n\n      if (updateTransform) {\n        this.applyWorldTransform(context, object);\n      }\n\n      let forceUpdateStyle = !renderState.prevObject;\n      if (!forceUpdateStyle) {\n        const prevNodeName = renderState.prevObject.nodeName as Shape;\n\n        if (nodeName === Shape.TEXT) {\n          forceUpdateStyle = prevNodeName !== Shape.TEXT;\n        } else if (nodeName === Shape.IMAGE) {\n          forceUpdateStyle = prevNodeName !== Shape.IMAGE;\n        } else {\n          forceUpdateStyle =\n            prevNodeName === Shape.TEXT || prevNodeName === Shape.IMAGE;\n        }\n      }\n\n      styleRenderer.applyStyleToContext(\n        context,\n        object,\n        forceUpdateStyle,\n        renderState,\n      );\n\n      renderState.prevObject = object;\n    }\n\n    if (generatePath) {\n      context.beginPath();\n      generatePath(context, object.parsedStyle);\n      if (\n        nodeName !== Shape.LINE &&\n        nodeName !== Shape.PATH &&\n        nodeName !== Shape.POLYLINE\n      ) {\n        context.closePath();\n      }\n    }\n\n    // fill & stroke\n    if (styleRenderer) {\n      styleRenderer.drawToContext(\n        context,\n        object,\n        this.#renderState,\n        this,\n        runtime,\n      );\n    }\n\n    if (clipDraw) {\n      context.restore();\n    }\n\n    // finish rendering, clear dirty flag\n    object.dirty(false);\n  }\n\n  renderDisplayObject(\n    object: DisplayObject,\n    context: CanvasRenderingContext2D,\n    canvasContext: CanvasContext,\n    renderState: RenderState,\n    runtime: GlobalRuntime,\n  ) {\n    const nodeName = object.nodeName as Shape;\n\n    // restore to its ancestor\n\n    const parent =\n      renderState.restoreStack[renderState.restoreStack.length - 1];\n    if (\n      parent &&\n      !(\n        object.compareDocumentPosition(parent) & Node.DOCUMENT_POSITION_CONTAINS\n      )\n    ) {\n      context.restore();\n      renderState.restoreStack.pop();\n    }\n\n    // @ts-ignore\n    const styleRenderer = this.context.styleRendererFactory[nodeName];\n    const generatePath = this.pathGeneratorFactory[nodeName];\n\n    // clip path\n    const { clipPath } = object.parsedStyle;\n    if (clipPath) {\n      this.applyWorldTransform(context, clipPath);\n\n      // generate path in local space\n      const generatePath =\n        this.pathGeneratorFactory[clipPath.nodeName as Shape];\n      if (generatePath) {\n        context.save();\n\n        // save clip\n        renderState.restoreStack.push(object);\n\n        context.beginPath();\n        generatePath(context, clipPath.parsedStyle);\n        context.closePath();\n        context.clip();\n      }\n    }\n\n    // fill & stroke\n\n    if (styleRenderer) {\n      this.applyWorldTransform(context, object);\n\n      context.save();\n\n      // apply attributes to context\n      this.applyAttributesToContext(context, object);\n    }\n\n    if (generatePath) {\n      context.beginPath();\n      generatePath(context, object.parsedStyle);\n      if (\n        nodeName !== Shape.LINE &&\n        nodeName !== Shape.PATH &&\n        nodeName !== Shape.POLYLINE\n      ) {\n        context.closePath();\n      }\n    }\n\n    // fill & stroke\n    if (styleRenderer) {\n      styleRenderer.render(\n        context,\n        object.parsedStyle,\n        object,\n        canvasContext,\n        this,\n        runtime,\n      );\n\n      // restore applied attributes, eg. shadowBlur shadowColor...\n      context.restore();\n    }\n\n    // finish rendering, clear dirty flag\n    object.dirty(false);\n  }\n\n  private applyAttributesToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n  ) {\n    const { stroke, fill, opacity, lineDash, lineDashOffset } =\n      object.parsedStyle as ParsedBaseStyleProps;\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/setLineDash\n    if (lineDash) {\n      context.setLineDash(lineDash);\n    }\n\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/lineDashOffset\n    if (!isNil(lineDashOffset)) {\n      context.lineDashOffset = lineDashOffset;\n    }\n\n    if (!isNil(opacity)) {\n      context.globalAlpha *= opacity;\n    }\n\n    if (\n      !isNil(stroke) &&\n      !Array.isArray(stroke) &&\n      !(stroke as CSSRGB).isNone\n    ) {\n      context.strokeStyle = object.attributes.stroke as string;\n    }\n\n    if (!isNil(fill) && !Array.isArray(fill) && !(fill as CSSRGB).isNone) {\n      context.fillStyle = object.attributes.fill as string;\n    }\n  }\n\n  private convertAABB2Rect(aabb: AABB): Rect {\n    const min = aabb.getMin();\n    const max = aabb.getMax();\n    // expand the rectangle a bit to avoid artifacts\n    // @see https://www.yuque.com/antv/ou292n/bi8nix#ExvCu\n    const minX = Math.floor(min[0]);\n    const minY = Math.floor(min[1]);\n    const maxX = Math.ceil(max[0]);\n    const maxY = Math.ceil(max[1]);\n    const width = maxX - minX;\n    const height = maxY - minY;\n\n    return { x: minX, y: minY, width, height };\n  }\n\n  /**\n   * TODO: merge dirty rectangles with some strategies.\n   * For now, we just simply merge all the rectangles into one.\n   * @see https://idom.me/articles/841.html\n   */\n  private mergeDirtyAABBs(dirtyObjects: DisplayObject[]): AABB {\n    // merge into a big AABB\n    // TODO: skip descendant if ancestor is caculated, but compareNodePosition is really slow\n    const aabb = new AABB();\n    dirtyObjects.forEach((object) => {\n      const renderBounds = object.getRenderBounds();\n      aabb.add(renderBounds);\n\n      const { dirtyRenderBounds } = object.renderable;\n      if (dirtyRenderBounds) {\n        aabb.add(dirtyRenderBounds);\n      }\n    });\n\n    return aabb;\n  }\n\n  private searchDirtyObjects(dirtyRectangle: AABB): DisplayObject[] {\n    // search in r-tree, get all affected nodes\n    const [minX, minY] = dirtyRectangle.getMin();\n    const [maxX, maxY] = dirtyRectangle.getMax();\n    const rBushNodes = this.rBush.search({\n      minX,\n      minY,\n      maxX,\n      maxY,\n    });\n\n    return rBushNodes.map(({ displayObject }) => displayObject);\n  }\n\n  private saveDirtyAABB(object: DisplayObject) {\n    const { renderable } = object;\n    if (!renderable.dirtyRenderBounds) {\n      renderable.dirtyRenderBounds = new AABB();\n    }\n    const renderBounds = object.getRenderBounds();\n    if (renderBounds) {\n      // save last dirty aabb\n      renderable.dirtyRenderBounds.update(\n        renderBounds.center,\n        renderBounds.halfExtents,\n      );\n    }\n  }\n\n  private applyWorldTransform(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    matrix?: mat4,\n  ) {\n    // apply clip shape's RTS\n    if (matrix) {\n      mat4.copy(this.tmpMat4, object.getLocalTransform());\n      mat4.multiply(this.tmpMat4, matrix, this.tmpMat4);\n      mat4.multiply(this.tmpMat4, this.vpMatrix, this.tmpMat4);\n    } else {\n      // apply RTS transformation in world space\n      mat4.copy(this.tmpMat4, object.getWorldTransform());\n      mat4.multiply(this.tmpMat4, this.vpMatrix, this.tmpMat4);\n    }\n\n    // @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations\n    context.setTransform(\n      this.tmpMat4[0],\n      this.tmpMat4[1],\n      this.tmpMat4[4],\n      this.tmpMat4[5],\n      this.tmpMat4[12],\n      this.tmpMat4[13],\n    );\n  }\n\n  private safeMergeAABB(...aabbs: AABB[]): AABB {\n    const merged = new AABB();\n    aabbs.forEach((aabb) => {\n      merged.add(aabb);\n    });\n    return merged;\n  }\n}\n","import {\n  CanvasContext,\n  CSSGradientValue,\n  DisplayObject,\n  GlobalRuntime,\n  LinearGradient,\n  Pattern,\n  RadialGradient,\n  Rect,\n  GradientType,\n} from '@antv/g-lite';\nimport type { ImagePool } from '@antv/g-plugin-image-loader';\nimport {\n  CanvasRendererPlugin,\n  type RenderState,\n} from '../../CanvasRendererPlugin';\n\nexport function getPattern(\n  pattern: Pattern,\n  object: DisplayObject,\n  context: CanvasRenderingContext2D,\n  canvasContext: CanvasContext,\n  plugin: CanvasRendererPlugin,\n  runtime: GlobalRuntime,\n  imagePool: ImagePool,\n): CanvasPattern {\n  let $offscreenCanvas: HTMLCanvasElement;\n  let dpr: number;\n  if ((pattern.image as Rect).nodeName === 'rect') {\n    const { width, height } = (pattern.image as Rect).parsedStyle;\n    dpr = canvasContext.contextService.getDPR();\n    const { offscreenCanvas } = canvasContext.config;\n    $offscreenCanvas = runtime.offscreenCanvasCreator.getOrCreateCanvas(\n      offscreenCanvas,\n    ) as HTMLCanvasElement;\n\n    $offscreenCanvas.width = width * dpr;\n    $offscreenCanvas.height = height * dpr;\n\n    const offscreenCanvasContext =\n      runtime.offscreenCanvasCreator.getOrCreateContext(\n        offscreenCanvas,\n      ) as CanvasRenderingContext2D;\n\n    const renderState: RenderState = {\n      restoreStack: [],\n      prevObject: null,\n      currentContext: new Map(),\n    };\n\n    // offscreenCanvasContext.scale(1 / dpr, 1 / dpr);\n\n    (pattern.image as Rect).forEach((object: DisplayObject) => {\n      plugin.renderDisplayObject(\n        object,\n        offscreenCanvasContext,\n        canvasContext,\n        renderState,\n        runtime,\n      );\n    });\n\n    renderState.restoreStack.forEach(() => {\n      offscreenCanvasContext.restore();\n    });\n  }\n\n  const canvasPattern = imagePool.getOrCreatePatternSync(\n    object,\n    pattern,\n    context,\n    $offscreenCanvas,\n    dpr,\n    object.getGeometryBounds().min,\n    () => {\n      // set dirty rectangle flag\n      object.dirty();\n      canvasContext.renderingService.dirtify();\n    },\n  );\n\n  return canvasPattern;\n}\n\nexport function getColor(\n  parsedColor: CSSGradientValue,\n  object: DisplayObject,\n  context: CanvasRenderingContext2D,\n  imagePool: ImagePool,\n) {\n  let color: CanvasGradient | string;\n\n  if (\n    parsedColor.type === GradientType.LinearGradient ||\n    parsedColor.type === GradientType.RadialGradient\n  ) {\n    const bounds = object.getGeometryBounds();\n    const width = (bounds && bounds.halfExtents[0] * 2) || 1;\n    const height = (bounds && bounds.halfExtents[1] * 2) || 1;\n    const min = (bounds && bounds.min) || [0, 0];\n    color = imagePool.getOrCreateGradient(\n      {\n        type: parsedColor.type,\n        ...(parsedColor.value as LinearGradient & RadialGradient),\n        min: min as [number, number],\n        width,\n        height,\n      },\n      context,\n    );\n  }\n\n  return color;\n}\n","import {\n  CanvasContext,\n  CSSRGB,\n  DisplayObject,\n  GlobalRuntime,\n  ParsedBaseStyleProps,\n  isPattern,\n  Shape,\n} from '@antv/g-lite';\nimport type { ImagePool } from '@antv/g-plugin-image-loader';\nimport { isNil } from '@antv/util';\nimport {\n  CanvasRendererPlugin,\n  type RenderState,\n} from '../../CanvasRendererPlugin';\nimport type { StyleRenderer } from './interfaces';\nimport { getColor, getPattern } from './helper';\n\nconst SHADOW_NUMBER_STYLE = [\n  'shadowBlur',\n  'shadowOffsetX',\n  'shadowOffsetY',\n] as const;\nconst STROKE_STYLE = ['lineCap', 'lineJoin', 'miterLimit'] as const;\nexport const DEFAULT_STYLE = {\n  // common\n  globalAlpha: 1,\n  shadowBlur: 0,\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  shadowColor: '#000',\n  filter: 'none' as const,\n  globalCompositeOperation: 'source-over' as const,\n\n  // stroke/fill\n  strokeStyle: '#000',\n  strokeOpacity: 1,\n  lineWidth: 1,\n  lineDash: [],\n  lineDashOffset: 0,\n  lineCap: 'butt' as const,\n  lineJoin: 'miter' as const,\n  miterLimit: 10,\n  fillStyle: '#000',\n  fillOpacity: 1,\n\n  // image\n};\n\nconst defaultParsedStyle = {} as ParsedBaseStyleProps;\n\n/**\n * Updating the canvas context is an expensive operation. The state of the context is cached and the actual update operation is performed only when the cache is not hit.\n *\n * In any case, the previous value is returned, which is convenient for temporarily updating the context and restoring it later.\n */\nfunction updateContextIfNotHitCache<\n  K extends keyof CanvasRenderingContext2D | 'lineDash',\n  V = unknown,\n>(context: CanvasRenderingContext2D, key: K, value: V, cache: Map<K, unknown>) {\n  const prevValue = (\n    cache.has(key)\n      ? cache.get(key)\n      : DEFAULT_STYLE[key as keyof typeof DEFAULT_STYLE]\n  ) as V;\n\n  if (prevValue !== value) {\n    // console.log('not hit cache', key, value, prevValue, cache);\n    if (key === 'lineDash') {\n      context.setLineDash(value as number[]);\n    } else {\n      // @ts-ignore\n      context[key] = value;\n    }\n    cache.set(key, value);\n  }\n\n  return prevValue;\n}\n\nexport class OptimizedDefaultRenderer implements StyleRenderer {\n  constructor(public imagePool: ImagePool) {}\n\n  applyAttributesToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n  ) {}\n\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedBaseStyleProps,\n    object: DisplayObject,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {}\n\n  // #region common style\n  private applyCommonStyleToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    forceUpdate: boolean,\n    renderState: RenderState,\n  ) {\n    // const dpr = object.ownerDocument.defaultView.getContextService().getDPR();\n    const prevStyle = forceUpdate\n      ? defaultParsedStyle\n      : renderState.prevObject.parsedStyle;\n    const style = object.parsedStyle;\n\n    if (forceUpdate || style.opacity !== prevStyle.opacity) {\n      updateContextIfNotHitCache(\n        context,\n        'globalAlpha',\n        !isNil(style.opacity) ? style.opacity : DEFAULT_STYLE.globalAlpha,\n        renderState.currentContext,\n      );\n    }\n\n    // TODO blend prop\n    // @ts-ignore\n    if (forceUpdate || style.blend !== prevStyle.blend) {\n      updateContextIfNotHitCache(\n        context,\n        'globalCompositeOperation',\n        // @ts-ignore\n        !isNil(style.blend)\n          ? // @ts-ignore\n            style.blend\n          : DEFAULT_STYLE.globalCompositeOperation,\n        renderState.currentContext,\n      );\n    }\n  }\n  // #endregion common style\n\n  // #region stroke/fill style\n  private applyStrokeFillStyleToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    forceUpdate: boolean,\n    renderState: RenderState,\n  ) {\n    const prevStyle = forceUpdate\n      ? defaultParsedStyle\n      : renderState.prevObject.parsedStyle;\n    const style = object.parsedStyle;\n    const { lineWidth = DEFAULT_STYLE.lineWidth } = style;\n    const hasFill = style.fill && !(style.fill as CSSRGB).isNone;\n    const hasStroke =\n      style.stroke && !(style.stroke as CSSRGB).isNone && lineWidth > 0;\n\n    if (hasStroke) {\n      if (\n        forceUpdate ||\n        object.attributes.stroke !== renderState.prevObject.attributes.stroke\n      ) {\n        const value =\n          !isNil(style.stroke) &&\n          !Array.isArray(style.stroke) &&\n          !(style.stroke as CSSRGB).isNone\n            ? object.attributes.stroke\n            : DEFAULT_STYLE.strokeStyle;\n\n        updateContextIfNotHitCache(\n          context,\n          'strokeStyle',\n          value,\n          renderState.currentContext,\n        );\n      }\n\n      if (forceUpdate || style.lineWidth !== prevStyle.lineWidth) {\n        updateContextIfNotHitCache(\n          context,\n          'lineWidth',\n          !isNil(style.lineWidth) ? style.lineWidth : DEFAULT_STYLE.lineWidth,\n          renderState.currentContext,\n        );\n      }\n\n      if (forceUpdate || style.lineDash !== prevStyle.lineDash) {\n        updateContextIfNotHitCache(\n          context,\n          'lineDash',\n          style.lineDash || DEFAULT_STYLE.lineDash,\n          renderState.currentContext,\n        );\n      }\n\n      if (forceUpdate || style.lineDashOffset !== prevStyle.lineDashOffset) {\n        updateContextIfNotHitCache(\n          context,\n          'lineDashOffset',\n          !isNil(style.lineDashOffset)\n            ? style.lineDashOffset\n            : DEFAULT_STYLE.lineDashOffset,\n          renderState.currentContext,\n        );\n      }\n\n      for (let i = 0; i < STROKE_STYLE.length; i++) {\n        const styleName = STROKE_STYLE[i];\n        if (forceUpdate || style[styleName] !== prevStyle[styleName]) {\n          updateContextIfNotHitCache(\n            context,\n            styleName,\n            !isNil(style[styleName])\n              ? style[styleName]\n              : DEFAULT_STYLE[styleName],\n            renderState.currentContext,\n          );\n        }\n      }\n    }\n\n    if (\n      hasFill &&\n      (forceUpdate ||\n        object.attributes.fill !== renderState.prevObject.attributes.fill)\n    ) {\n      const value =\n        !isNil(style.fill) &&\n        !Array.isArray(style.fill) &&\n        !(style.fill as CSSRGB).isNone\n          ? object.attributes.fill\n          : DEFAULT_STYLE.fillStyle;\n\n      updateContextIfNotHitCache(\n        context,\n        'fillStyle',\n        value,\n        renderState.currentContext,\n      );\n    }\n  }\n  // #endregion stroke/fill style\n\n  applyStyleToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    forceUpdate: boolean,\n    renderState: RenderState,\n  ) {\n    const nodeName = object.nodeName as Shape;\n\n    this.applyCommonStyleToContext(context, object, forceUpdate, renderState);\n\n    if (nodeName === Shape.IMAGE) {\n      //\n    } else {\n      this.applyStrokeFillStyleToContext(\n        context,\n        object,\n        forceUpdate,\n        renderState,\n      );\n    }\n  }\n\n  applyShadowAndFilterStyleToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    hasShadow: boolean,\n    renderState: RenderState,\n  ) {\n    const style = object.parsedStyle;\n\n    if (hasShadow) {\n      updateContextIfNotHitCache(\n        context,\n        'shadowColor',\n        style.shadowColor.toString(),\n        renderState.currentContext,\n      );\n      for (let i = 0; i < SHADOW_NUMBER_STYLE.length; i++) {\n        const styleName = SHADOW_NUMBER_STYLE[i];\n        updateContextIfNotHitCache(\n          context,\n          styleName,\n          style[styleName] || DEFAULT_STYLE[styleName],\n          renderState.currentContext,\n        );\n      }\n    }\n\n    if (style.filter && style.filter.length) {\n      updateContextIfNotHitCache(\n        context,\n        'filter',\n        // use raw filter string\n        object.attributes.filter,\n        renderState.currentContext,\n      );\n    }\n  }\n\n  clearShadowAndFilterStyleForContext(\n    context: CanvasRenderingContext2D,\n    hasShadow: boolean,\n    hasFilter: boolean,\n    renderState: RenderState,\n    onlyClearShadowFilter = false,\n  ) {\n    if (hasShadow) {\n      updateContextIfNotHitCache(\n        context,\n        'shadowColor',\n        DEFAULT_STYLE.shadowColor,\n        renderState.currentContext,\n      );\n      for (let i = 0; i < SHADOW_NUMBER_STYLE.length; i++) {\n        const styleName = SHADOW_NUMBER_STYLE[i];\n        updateContextIfNotHitCache(\n          context,\n          styleName,\n          DEFAULT_STYLE[styleName],\n          renderState.currentContext,\n        );\n      }\n    }\n\n    if (hasFilter) {\n      if (hasShadow && onlyClearShadowFilter) {\n        // save drop-shadow filter\n        const oldFilter = context.filter;\n        if (!isNil(oldFilter) && oldFilter.indexOf('drop-shadow') > -1) {\n          updateContextIfNotHitCache(\n            context,\n            'filter',\n            oldFilter.replace(/drop-shadow\\([^)]*\\)/, '').trim() ||\n              DEFAULT_STYLE.filter,\n            renderState.currentContext,\n          );\n        }\n      } else {\n        updateContextIfNotHitCache(\n          context,\n          'filter',\n          DEFAULT_STYLE.filter,\n          renderState.currentContext,\n        );\n      }\n    }\n  }\n\n  fillToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    renderState: RenderState,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    const { fill, fillRule } = object.parsedStyle;\n    let resetStyle = null as unknown;\n\n    if (Array.isArray(fill) && fill.length > 0) {\n      fill.forEach((gradient) => {\n        const prevStyle = updateContextIfNotHitCache(\n          context,\n          'fillStyle',\n          getColor(gradient, object, context, this.imagePool),\n          renderState.currentContext,\n        );\n        resetStyle = resetStyle ?? prevStyle;\n\n        if (fillRule) {\n          context.fill(fillRule);\n        } else {\n          context.fill();\n        }\n      });\n    } else {\n      if (isPattern(fill)) {\n        const pattern = getPattern(\n          fill,\n          object,\n          context,\n          object.ownerDocument.defaultView.context,\n          plugin,\n          runtime,\n          this.imagePool,\n        );\n        if (pattern) {\n          context.fillStyle = pattern;\n          resetStyle = true;\n        }\n      }\n\n      if (fillRule) {\n        context.fill(fillRule);\n      } else {\n        context.fill();\n      }\n    }\n\n    if (resetStyle !== null) {\n      updateContextIfNotHitCache(\n        context,\n        'fillStyle',\n        resetStyle,\n        renderState.currentContext,\n      );\n    }\n  }\n\n  strokeToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    renderState: RenderState,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    const { stroke } = object.parsedStyle;\n    let resetStyle = null as unknown;\n\n    if (Array.isArray(stroke) && stroke.length > 0) {\n      stroke.forEach((gradient) => {\n        const prevStyle = updateContextIfNotHitCache(\n          context,\n          'strokeStyle',\n          getColor(gradient, object, context, this.imagePool),\n          renderState.currentContext,\n        );\n        resetStyle = resetStyle ?? prevStyle;\n\n        context.stroke();\n      });\n    } else {\n      if (isPattern(stroke)) {\n        const pattern = getPattern(\n          stroke,\n          object,\n          context,\n          object.ownerDocument.defaultView.context,\n          plugin,\n          runtime,\n          this.imagePool,\n        );\n        if (pattern) {\n          const prevStyle = updateContextIfNotHitCache(\n            context,\n            'strokeStyle',\n            pattern,\n            renderState.currentContext,\n          );\n          resetStyle = resetStyle ?? prevStyle;\n        }\n      }\n\n      context.stroke();\n    }\n\n    if (resetStyle !== null) {\n      updateContextIfNotHitCache(\n        context,\n        'strokeStyle',\n        resetStyle,\n        renderState.currentContext,\n      );\n    }\n  }\n\n  drawToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    renderState: RenderState,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    const nodeName = object.nodeName as Shape;\n    const style = object.parsedStyle;\n    const {\n      opacity = DEFAULT_STYLE.globalAlpha,\n      fillOpacity = DEFAULT_STYLE.fillOpacity,\n      strokeOpacity = DEFAULT_STYLE.strokeOpacity,\n      lineWidth = DEFAULT_STYLE.lineWidth,\n    } = style;\n\n    const hasFill = style.fill && !(style.fill as CSSRGB).isNone;\n    const hasStroke =\n      style.stroke && !(style.stroke as CSSRGB).isNone && lineWidth > 0;\n\n    if (!hasFill && !hasStroke) {\n      return;\n    }\n\n    const hasShadow = !isNil(style.shadowColor) && style.shadowBlur > 0;\n    const isInnerShadow = style.shadowType === 'inner';\n    const isFillTransparent = (style.fill as CSSRGB)?.alpha === 0;\n    const hasFilter = !!(style.filter && style.filter.length);\n    // Shadows can only be applied to fill() or stroke(), the default is fill()\n    const shouldDrawShadowWithStroke =\n      hasShadow &&\n      hasStroke &&\n      (nodeName === Shape.PATH ||\n        nodeName === Shape.LINE ||\n        nodeName === Shape.POLYLINE ||\n        isFillTransparent ||\n        isInnerShadow);\n\n    // TODO https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/paint-order\n\n    let originGlobalAlpha: number | null = null;\n\n    if (hasFill) {\n      if (!shouldDrawShadowWithStroke) {\n        this.applyShadowAndFilterStyleToContext(\n          context,\n          object,\n          hasShadow,\n          renderState,\n        );\n      }\n\n      const updateOpacity = opacity * fillOpacity;\n\n      originGlobalAlpha = updateContextIfNotHitCache(\n        context,\n        'globalAlpha',\n        updateOpacity,\n        renderState.currentContext,\n      );\n\n      this.fillToContext(context, object, renderState, plugin, runtime);\n\n      if (!shouldDrawShadowWithStroke) {\n        this.clearShadowAndFilterStyleForContext(\n          context,\n          hasShadow,\n          hasFilter,\n          renderState,\n        );\n      }\n    }\n    if (hasStroke) {\n      let clearShadowAndFilter = false;\n      const updateOpacity = opacity * strokeOpacity;\n      const prevOpacity = updateContextIfNotHitCache(\n        context,\n        'globalAlpha',\n        updateOpacity,\n        renderState.currentContext,\n      );\n      originGlobalAlpha = hasFill ? originGlobalAlpha : prevOpacity;\n\n      if (shouldDrawShadowWithStroke) {\n        this.applyShadowAndFilterStyleToContext(\n          context,\n          object,\n          hasShadow,\n          renderState,\n        );\n        clearShadowAndFilter = true;\n\n        if (isInnerShadow) {\n          const originBlend = context.globalCompositeOperation;\n          context.globalCompositeOperation = 'source-atop';\n\n          this.strokeToContext(context, object, renderState, plugin, runtime);\n\n          context.globalCompositeOperation = originBlend;\n          this.clearShadowAndFilterStyleForContext(\n            context,\n            hasShadow,\n            hasFilter,\n            renderState,\n            true,\n          );\n        }\n      }\n\n      this.strokeToContext(context, object, renderState, plugin, runtime);\n\n      if (clearShadowAndFilter) {\n        this.clearShadowAndFilterStyleForContext(\n          context,\n          hasShadow,\n          hasFilter,\n          renderState,\n        );\n      }\n    }\n\n    // clear\n    if (originGlobalAlpha !== null) {\n      updateContextIfNotHitCache(\n        context,\n        'globalAlpha',\n        originGlobalAlpha,\n        renderState.currentContext,\n      );\n    }\n  }\n}\n","import {\n  CanvasContext,\n  CSSGradientValue,\n  CSSRGB,\n  DisplayObject,\n  GlobalRuntime,\n  ParsedBaseStyleProps,\n  Pattern,\n  isPattern,\n  Shape,\n} from '@antv/g-lite';\nimport type { ImagePool } from '@antv/g-plugin-image-loader';\nimport { isNil } from '@antv/util';\nimport { CanvasRendererPlugin } from '../../CanvasRendererPlugin';\nimport { OptimizedDefaultRenderer, DEFAULT_STYLE } from './OptimizedDefault';\nimport { getColor, getPattern } from './helper';\n\nexport class DefaultRenderer extends OptimizedDefaultRenderer {\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedBaseStyleProps,\n    object: DisplayObject,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    const {\n      fill,\n      fillRule,\n      opacity = 1,\n      fillOpacity = 1,\n      stroke,\n      strokeOpacity = 1,\n      lineWidth = 1,\n      lineCap,\n      lineJoin,\n      shadowType,\n      shadowColor,\n      shadowBlur,\n      filter,\n      miterLimit,\n    } = parsedStyle;\n    const hasFill = fill && !(fill as CSSRGB).isNone;\n    const hasStroke = stroke && !(stroke as CSSRGB).isNone && lineWidth > 0;\n\n    const isFillTransparent = (fill as CSSRGB)?.alpha === 0;\n    const hasFilter = !!(filter && filter.length);\n    const hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n    const nodeName = object.nodeName as Shape;\n    const isInnerShadow = shadowType === 'inner';\n    const shouldDrawShadowWithStroke =\n      hasStroke &&\n      hasShadow &&\n      (nodeName === Shape.PATH ||\n        nodeName === Shape.LINE ||\n        nodeName === Shape.POLYLINE ||\n        isFillTransparent ||\n        isInnerShadow);\n\n    if (hasFill) {\n      context.globalAlpha = opacity * fillOpacity;\n\n      if (!shouldDrawShadowWithStroke) {\n        setShadowAndFilter(object, context, hasShadow);\n      }\n\n      applyFill(\n        context,\n        object,\n        fill,\n        fillRule,\n        canvasContext,\n        plugin,\n        runtime,\n        this.imagePool,\n      );\n\n      if (!shouldDrawShadowWithStroke) {\n        this.clearShadowAndFilter(context, hasFilter, hasShadow);\n      }\n    }\n\n    if (hasStroke) {\n      context.globalAlpha = opacity * strokeOpacity;\n      context.lineWidth = lineWidth;\n      if (!isNil(miterLimit)) {\n        context.miterLimit = miterLimit;\n      }\n\n      if (!isNil(lineCap)) {\n        context.lineCap = lineCap;\n      }\n\n      if (!isNil(lineJoin)) {\n        context.lineJoin = lineJoin;\n      }\n\n      if (shouldDrawShadowWithStroke) {\n        if (isInnerShadow) {\n          context.globalCompositeOperation = 'source-atop';\n        }\n        setShadowAndFilter(object, context, true);\n\n        if (isInnerShadow) {\n          applyStroke(\n            context,\n            object,\n            stroke,\n            canvasContext,\n            plugin,\n            runtime,\n            this.imagePool,\n          );\n          context.globalCompositeOperation =\n            DEFAULT_STYLE.globalCompositeOperation;\n          this.clearShadowAndFilter(context, hasFilter, true);\n        }\n      }\n\n      applyStroke(\n        context,\n        object,\n        stroke,\n        canvasContext,\n        plugin,\n        runtime,\n        this.imagePool,\n      );\n    }\n  }\n\n  private clearShadowAndFilter(\n    context: CanvasRenderingContext2D,\n    hasFilter: boolean,\n    hasShadow: boolean,\n  ) {\n    if (hasShadow) {\n      context.shadowColor = 'transparent';\n      context.shadowBlur = 0;\n    }\n\n    if (hasFilter) {\n      // save drop-shadow filter\n      const oldFilter = context.filter;\n      if (!isNil(oldFilter) && oldFilter.indexOf('drop-shadow') > -1) {\n        context.filter =\n          oldFilter.replace(/drop-shadow\\([^)]*\\)/, '').trim() || 'none';\n      }\n    }\n  }\n}\n\n/**\n * apply before fill and stroke but only once\n */\nexport function setShadowAndFilter(\n  object: DisplayObject,\n  context: CanvasRenderingContext2D,\n  hasShadow: boolean,\n) {\n  const { filter, shadowColor, shadowBlur, shadowOffsetX, shadowOffsetY } =\n    object.parsedStyle;\n\n  if (filter && filter.length) {\n    // use raw filter string\n    context.filter = object.style.filter;\n  }\n\n  if (hasShadow) {\n    context.shadowColor = shadowColor.toString();\n    context.shadowBlur = shadowBlur || 0;\n    context.shadowOffsetX = shadowOffsetX || 0;\n    context.shadowOffsetY = shadowOffsetY || 0;\n  }\n}\n\nexport function applyFill(\n  context: CanvasRenderingContext2D,\n  object: DisplayObject,\n  fill: CSSRGB | CSSGradientValue[] | Pattern,\n  fillRule: 'nonzero' | 'evenodd',\n  canvasContext: CanvasContext,\n  plugin: CanvasRendererPlugin,\n  runtime: GlobalRuntime,\n  imagePool: ImagePool,\n  skipFill = false,\n) {\n  if (Array.isArray(fill)) {\n    fill.forEach((gradient) => {\n      context.fillStyle = getColor(gradient, object, context, imagePool);\n      if (!skipFill) {\n        fillRule ? context.fill(fillRule) : context.fill();\n      }\n    });\n  } else {\n    if (isPattern(fill)) {\n      context.fillStyle = getPattern(\n        fill,\n        object,\n        context,\n        canvasContext,\n        plugin,\n        runtime,\n        imagePool,\n      );\n    }\n    if (!skipFill) {\n      fillRule ? context.fill(fillRule) : context.fill();\n    }\n  }\n}\n\nexport function applyStroke(\n  context: CanvasRenderingContext2D,\n  object: DisplayObject,\n  stroke: CSSRGB | CSSGradientValue[] | Pattern,\n  canvasContext: CanvasContext,\n  plugin: CanvasRendererPlugin,\n  runtime: GlobalRuntime,\n  imagePool: ImagePool,\n  skipStroke = false,\n) {\n  if (Array.isArray(stroke)) {\n    stroke.forEach((gradient) => {\n      context.strokeStyle = getColor(gradient, object, context, imagePool);\n      if (!skipStroke) {\n        context.stroke();\n      }\n    });\n  } else {\n    if (isPattern(stroke)) {\n      context.strokeStyle = getPattern(\n        stroke,\n        object,\n        context,\n        canvasContext,\n        plugin,\n        runtime,\n        imagePool,\n      );\n    }\n    if (!skipStroke) {\n      context.stroke();\n    }\n  }\n}\n","import { vec3, mat4 } from 'gl-matrix';\n\n/**\n * 判断两个点是否重合，点坐标的格式为 [x, y]\n */\nexport function isSamePoint(\n  point1: [number, number],\n  point2: [number, number],\n) {\n  return point1[0] === point2[0] && point1[1] === point2[1];\n}\n\nexport function calculateOverlapRect<\n  Rect extends [number, number, number, number],\n>(rect1: Rect, rect2: Rect): null | Rect {\n  const [x1, y1, w1, h1] = rect1;\n  const [x2, y2, w2, h2] = rect2;\n\n  // 计算重叠区域的左上角和右下角\n  const overlapLeft = Math.max(x1, x2);\n  const overlapTop = Math.max(y1, y2);\n  const overlapRight = Math.min(x1 + w1, x2 + w2);\n  const overlapBottom = Math.min(y1 + h1, y2 + h2);\n\n  if (overlapRight <= overlapLeft || overlapBottom <= overlapTop) {\n    return null;\n  }\n\n  return [\n    overlapLeft,\n    overlapTop,\n    overlapRight - overlapLeft,\n    overlapBottom - overlapTop,\n  ] as Rect;\n}\n\nexport function transformRect<Rect extends [number, number, number, number]>(\n  rect: Rect,\n  matrix: mat4,\n): Rect {\n  const tl = vec3.transformMat4(vec3.create(), [rect[0], rect[1], 0], matrix);\n  const tr = vec3.transformMat4(\n    vec3.create(),\n    [rect[0] + rect[2], rect[1], 0],\n    matrix,\n  );\n  const bl = vec3.transformMat4(\n    vec3.create(),\n    [rect[0], rect[1] + rect[3], 0],\n    matrix,\n  );\n  const br = vec3.transformMat4(\n    vec3.create(),\n    [rect[0] + rect[2], rect[1] + rect[3], 0],\n    matrix,\n  );\n\n  return [\n    Math.min(tl[0], tr[0], bl[0], br[0]),\n    Math.min(tl[1], tr[1], bl[1], br[1]),\n    Math.max(tl[0], tr[0], bl[0], br[0]) - Math.min(tl[0], tr[0], bl[0], br[0]),\n    Math.max(tl[1], tr[1], bl[1], br[1]) - Math.min(tl[1], tr[1], bl[1], br[1]),\n  ] as Rect;\n}\n","import type {\n  DisplayObject,\n  ParsedImageStyleProps,\n  GlobalRuntime,\n} from '@antv/g-lite';\nimport { ImagePool, type ImageCache } from '@antv/g-plugin-image-loader';\nimport { isNil } from '@antv/util';\nimport { mat4 } from 'gl-matrix';\nimport { transformRect, calculateOverlapRect } from '../../utils/math';\nimport { DefaultRenderer, setShadowAndFilter } from './Default';\nimport {\n  CanvasRendererPlugin,\n  type RenderState,\n} from '../../CanvasRendererPlugin';\n\nexport class ImageRenderer extends DefaultRenderer {\n  static renderFull(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedImageStyleProps,\n    object: DisplayObject,\n    data: {\n      image: HTMLImageElement;\n      drawRect: [number, number, number, number];\n    },\n  ) {\n    context.drawImage(\n      data.image,\n      Math.floor(data.drawRect[0]),\n      Math.floor(data.drawRect[1]),\n      Math.ceil(data.drawRect[2]),\n      Math.ceil(data.drawRect[3]),\n    );\n  }\n\n  private renderDownSampled(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedImageStyleProps,\n    object: DisplayObject,\n    data: {\n      src: string | HTMLImageElement;\n      imageCache: ImageCache;\n      drawRect: [number, number, number, number];\n    },\n  ) {\n    const { src, imageCache } = data;\n\n    if (!imageCache.downSampled) {\n      this.imagePool\n        .createDownSampledImage(src, object)\n        .then(() => {\n          // be removed from dom tree\n          if (!object.ownerDocument) {\n            return;\n          }\n\n          // rerender\n          object.dirty();\n          object.ownerDocument.defaultView.context.renderingService.dirtify();\n        })\n        .catch((reason) => {\n          console.error(reason);\n        });\n\n      return;\n    }\n\n    context.drawImage(\n      imageCache.downSampled,\n      Math.floor(data.drawRect[0]),\n      Math.floor(data.drawRect[1]),\n      Math.ceil(data.drawRect[2]),\n      Math.ceil(data.drawRect[3]),\n    );\n  }\n\n  renderTile(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedImageStyleProps,\n    object: DisplayObject,\n    data: {\n      src: string | HTMLImageElement;\n      imageCache: ImageCache;\n      imageRect: [number, number, number, number];\n      drawRect: [number, number, number, number];\n    },\n  ) {\n    const { src, imageCache, imageRect, drawRect } = data;\n    const { size: originalSize } = imageCache;\n    const { a, b, c, d, e, f } = context.getTransform();\n\n    context.resetTransform();\n\n    if (!imageCache?.gridSize) {\n      this.imagePool\n        .createImageTiles(\n          src,\n          [],\n          () => {\n            // be removed from dom tree\n            if (!object.ownerDocument) {\n              return;\n            }\n\n            // rerender\n            object.dirty();\n            object.ownerDocument.defaultView.context.renderingService.dirtify();\n          },\n          object,\n        )\n        .catch((reason) => {\n          console.error(reason);\n        });\n\n      return;\n    }\n\n    const scaleToOrigin = [\n      originalSize[0] / imageRect[2],\n      originalSize[1] / imageRect[3],\n    ];\n    const scaledTileSize = [\n      imageCache.tileSize[0] / scaleToOrigin[0],\n      imageCache.tileSize[1] / scaleToOrigin[1],\n    ];\n    const [startTileX, endTileX] = [\n      Math.floor((drawRect[0] - imageRect[0]) / scaledTileSize[0]),\n      Math.ceil((drawRect[0] + drawRect[2] - imageRect[0]) / scaledTileSize[0]),\n    ];\n    const [startTileY, endTileY] = [\n      Math.floor((drawRect[1] - imageRect[1]) / scaledTileSize[1]),\n      Math.ceil((drawRect[1] + drawRect[3] - imageRect[1]) / scaledTileSize[1]),\n    ];\n\n    for (let tileY = startTileY; tileY <= endTileY; tileY++) {\n      for (let tileX = startTileX; tileX <= endTileX; tileX++) {\n        const item = imageCache.tiles[tileY][tileX];\n\n        if (item) {\n          const tileRect = [\n            Math.floor(imageRect[0] + item.tileX * scaledTileSize[0]),\n            Math.floor(imageRect[1] + item.tileY * scaledTileSize[1]),\n            Math.ceil(scaledTileSize[0]),\n            Math.ceil(scaledTileSize[1]),\n          ];\n\n          context.drawImage(\n            item.data,\n            tileRect[0],\n            tileRect[1],\n            tileRect[2],\n            tileRect[3],\n          );\n        }\n      }\n    }\n\n    context.setTransform(a, b, c, d, e, f);\n  }\n\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedImageStyleProps,\n    object: DisplayObject,\n  ) {\n    const {\n      x = 0,\n      y = 0,\n      width,\n      height,\n      src,\n      shadowColor,\n      shadowBlur,\n    } = parsedStyle;\n\n    const imageCache = this.imagePool.getImageSync(src, object);\n    const image = imageCache?.img;\n    let iw = width;\n    let ih = height;\n\n    if (!image) {\n      return;\n    }\n\n    iw ||= image.width;\n    ih ||= image.height;\n\n    const hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n    setShadowAndFilter(object, context, hasShadow);\n\n    // node-canvas will throw the following err:\n    // Error: Image given has not completed loading\n    try {\n      const { width: viewWidth, height: viewHeight } =\n        object.ownerDocument.defaultView.getContextService().getDomElement();\n\n      const currentTransform = context.getTransform();\n      const { a, b, c, d, e, f } = currentTransform;\n      // 构建 mat4 矩阵\n      // prettier-ignore\n      const transformMatrix = mat4.fromValues(\n          a, c, 0, 0,\n          b, d, 0, 0,\n          0, 0, 1, 0,\n          e, f, 0, 1,\n        );\n      const imageRect = transformRect([x, y, iw, ih], transformMatrix);\n      const drawRect = calculateOverlapRect(\n        [0, 0, viewWidth, viewHeight],\n        imageRect,\n      );\n\n      if (!drawRect) {\n        return;\n      }\n\n      if (\n        !object.ownerDocument.defaultView.getConfig()\n          .enableLargeImageOptimization\n      ) {\n        ImageRenderer.renderFull(context, parsedStyle, object, {\n          image,\n          drawRect: [x, y, iw, ih],\n        });\n\n        return;\n      }\n\n      const sizeOfOrigin = imageRect[2] / imageCache.size[0];\n\n      if (sizeOfOrigin < (imageCache.downSamplingRate || 0.5)) {\n        this.renderDownSampled(context, parsedStyle, object, {\n          src,\n          imageCache,\n          drawRect: [x, y, iw, ih],\n        });\n\n        return;\n      }\n\n      if (!ImagePool.isSupportTile) {\n        ImageRenderer.renderFull(context, parsedStyle, object, {\n          image,\n          drawRect: [x, y, iw, ih],\n        });\n\n        return;\n      }\n\n      this.renderTile(context, parsedStyle, object, {\n        src,\n        imageCache,\n        imageRect,\n        drawRect,\n      });\n    } catch {\n      // expected error\n    }\n  }\n\n  // ---\n\n  drawToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    renderState: RenderState,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    this.render(context, object.parsedStyle as ParsedImageStyleProps, object);\n  }\n}\n","import {\n  type CSSRGB,\n  type CanvasContext,\n  type DisplayObject,\n  type GlobalRuntime,\n  type ParsedTextStyleProps,\n  type Rectangle,\n  CSSGradientValue,\n  Pattern,\n} from '@antv/g-lite';\nimport { isNil } from '@antv/util';\nimport {\n  DefaultRenderer,\n  applyFill,\n  applyStroke,\n  setShadowAndFilter,\n} from './Default';\nimport {\n  CanvasRendererPlugin,\n  type RenderState,\n} from '../../CanvasRendererPlugin';\n\nexport class TextRenderer extends DefaultRenderer {\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedTextStyleProps,\n    object: DisplayObject,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    // Trigger text geometry calculation.\n    object.getBounds();\n    const {\n      lineWidth = 1,\n      textAlign = 'start',\n      textBaseline = 'alphabetic',\n      lineJoin = 'miter',\n      miterLimit = 10,\n      letterSpacing = 0,\n      stroke,\n      fill,\n      fillRule,\n      fillOpacity = 1,\n      strokeOpacity = 1,\n      opacity = 1,\n      metrics,\n      x = 0,\n      y = 0,\n      dx,\n      dy,\n      shadowColor,\n      shadowBlur,\n    } = parsedStyle;\n\n    const { font, lines, height, lineHeight, lineMetrics } = metrics;\n\n    context.font = font;\n    context.lineWidth = lineWidth;\n    context.textAlign = textAlign === 'middle' ? 'center' : textAlign;\n\n    let formattedTextBaseline = textBaseline;\n    if (formattedTextBaseline === 'alphabetic') {\n      formattedTextBaseline = 'bottom';\n    }\n\n    context.lineJoin = lineJoin;\n    if (!isNil(miterLimit)) {\n      context.miterLimit = miterLimit;\n    }\n\n    let linePositionY = y;\n    // handle vertical text baseline\n    if (textBaseline === 'middle') {\n      linePositionY += -height / 2 - lineHeight / 2;\n    } else if (\n      textBaseline === 'bottom' ||\n      textBaseline === 'alphabetic' ||\n      textBaseline === 'ideographic'\n    ) {\n      linePositionY += -height;\n    } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n      linePositionY += -lineHeight;\n    }\n\n    // account for dx & dy\n    const offsetX = x + (dx || 0);\n    linePositionY += dy || 0;\n\n    if (lines.length === 1) {\n      if (formattedTextBaseline === 'bottom') {\n        formattedTextBaseline = 'middle';\n        linePositionY -= 0.5 * height;\n      } else if (formattedTextBaseline === 'top') {\n        formattedTextBaseline = 'middle';\n        linePositionY += 0.5 * height;\n      }\n    }\n    context.textBaseline = formattedTextBaseline;\n\n    const hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n    setShadowAndFilter(object, context, hasShadow);\n\n    // draw lines line by line\n    for (let i = 0; i < lines.length; i++) {\n      const linePositionX = lineWidth / 2 + offsetX;\n      linePositionY += lineHeight;\n\n      // no need to re-position X, cause we already set text align\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textAlign\n      if (!isNil(stroke) && !(stroke as CSSRGB).isNone && lineWidth) {\n        this.drawLetterSpacing(\n          context,\n          object,\n          lines[i],\n          lineMetrics[i],\n          textAlign,\n          linePositionX,\n          linePositionY,\n          letterSpacing,\n          fill,\n          fillRule,\n          fillOpacity,\n          stroke,\n          strokeOpacity,\n          opacity,\n          true,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      }\n      if (!isNil(fill)) {\n        this.drawLetterSpacing(\n          context,\n          object,\n          lines[i],\n          lineMetrics[i],\n          textAlign,\n          linePositionX,\n          linePositionY,\n          letterSpacing,\n          fill,\n          fillRule,\n          fillOpacity,\n          stroke,\n          strokeOpacity,\n          opacity,\n          false,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      }\n    }\n  }\n\n  private drawLetterSpacing(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    text: string,\n    lineMetrics: Rectangle,\n    textAlign: CanvasTextAlign | 'middle',\n    x: number,\n    y: number,\n    letterSpacing: number,\n    fill: CSSRGB | CSSGradientValue[] | Pattern,\n    fillRule: 'nonzero' | 'evenodd',\n    fillOpacity: number | undefined,\n    stroke: CSSRGB | CSSGradientValue[] | Pattern,\n    strokeOpacity: number | undefined,\n    opacity: number | undefined,\n    isStroke: boolean,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ): void {\n    // letterSpacing of 0 means normal, render all texts directly\n    if (letterSpacing === 0) {\n      if (isStroke) {\n        this.strokeText(\n          context,\n          object,\n          text,\n          x,\n          y,\n          stroke,\n          strokeOpacity,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      } else {\n        this.fillText(\n          context,\n          object,\n          text,\n          x,\n          y,\n          fill,\n          fillRule,\n          fillOpacity,\n          opacity,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      }\n      return;\n    }\n\n    // draw text using left align\n    const currentTextAlign = context.textAlign;\n    context.textAlign = 'left';\n\n    let currentPosition = x;\n    if (textAlign === 'center' || textAlign === 'middle') {\n      currentPosition = x - lineMetrics.width / 2;\n    } else if (textAlign === 'right' || textAlign === 'end') {\n      currentPosition = x - lineMetrics.width;\n    }\n\n    const stringArray = Array.from(text);\n    let previousWidth = context.measureText(text).width;\n    let currentWidth = 0;\n    for (let i = 0; i < stringArray.length; ++i) {\n      const currentChar = stringArray[i];\n      if (isStroke) {\n        this.strokeText(\n          context,\n          object,\n          currentChar,\n          currentPosition,\n          y,\n          stroke,\n          strokeOpacity,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      } else {\n        this.fillText(\n          context,\n          object,\n          currentChar,\n          currentPosition,\n          y,\n          fill,\n          fillRule,\n          fillOpacity,\n          opacity,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      }\n      currentWidth = context.measureText(text.substring(i + 1)).width;\n      currentPosition += previousWidth - currentWidth + letterSpacing;\n      previousWidth = currentWidth;\n    }\n\n    context.textAlign = currentTextAlign;\n  }\n\n  private fillText(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    text: string,\n    x: number,\n    y: number,\n    fill: CSSRGB | CSSGradientValue[] | Pattern,\n    fillRule: 'nonzero' | 'evenodd',\n    fillOpacity: number | undefined,\n    opacity: number | undefined,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    applyFill(\n      context,\n      object,\n      fill,\n      fillRule,\n      canvasContext,\n      plugin,\n      runtime,\n      this.imagePool,\n      true,\n    );\n\n    let currentGlobalAlpha: number;\n    const applyOpacity = !isNil(fillOpacity) && fillOpacity !== 1;\n    if (applyOpacity) {\n      currentGlobalAlpha = context.globalAlpha;\n      context.globalAlpha = fillOpacity * opacity;\n    }\n    context.fillText(text, x, y);\n    if (applyOpacity) {\n      context.globalAlpha = currentGlobalAlpha;\n    }\n  }\n\n  private strokeText(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    text: string,\n    x: number,\n    y: number,\n    stroke: CSSRGB | CSSGradientValue[] | Pattern,\n    strokeOpacity: number | undefined,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    applyStroke(\n      context,\n      object,\n      stroke,\n      canvasContext,\n      plugin,\n      runtime,\n      this.imagePool,\n      true,\n    );\n\n    let currentGlobalAlpha: number;\n    const applyOpacity = !isNil(strokeOpacity) && strokeOpacity !== 1;\n    if (applyOpacity) {\n      currentGlobalAlpha = context.globalAlpha;\n      context.globalAlpha = strokeOpacity!;\n    }\n    context.strokeText(text, x, y);\n    if (applyOpacity) {\n      context.globalAlpha = currentGlobalAlpha;\n    }\n  }\n\n  // ---\n\n  drawToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    renderState: RenderState,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    this.render(\n      context,\n      object.parsedStyle as ParsedTextStyleProps,\n      object,\n      object.ownerDocument.defaultView.context,\n      plugin,\n      runtime,\n    );\n  }\n}\n","import { AbstractRendererPlugin, Shape } from '@antv/g-lite';\nimport type { PathGenerator } from '@antv/g-plugin-canvas-path-generator';\nimport { CanvasRendererPlugin } from './CanvasRendererPlugin';\nimport {\n  type StyleRenderer,\n  DefaultRenderer,\n  TextRenderer,\n  ImageRenderer,\n} from './shapes/styles';\nimport type { CanvasRendererPluginOptions } from './interfaces';\n\nexport * from './shapes/styles';\n\nexport class Plugin extends AbstractRendererPlugin<{\n  defaultStyleRendererFactory: Record<Shape, StyleRenderer>;\n  styleRendererFactory: Record<Shape, StyleRenderer>;\n  pathGeneratorFactory: Record<Shape, PathGenerator<any>>;\n}> {\n  name = 'canvas-renderer';\n\n  constructor(private options: Partial<CanvasRendererPluginOptions> = {}) {\n    super();\n  }\n\n  init(): void {\n    const canvasRendererPluginOptions: CanvasRendererPluginOptions = {\n      dirtyObjectNumThreshold: 500,\n      dirtyObjectRatioThreshold: 0.8,\n      ...this.options,\n    };\n\n    // @ts-ignore\n    const { imagePool } = this.context;\n\n    const defaultRenderer = new DefaultRenderer(imagePool);\n\n    const defaultStyleRendererFactory: Record<Shape, StyleRenderer> = {\n      [Shape.CIRCLE]: defaultRenderer,\n      [Shape.ELLIPSE]: defaultRenderer,\n      [Shape.RECT]: defaultRenderer,\n      [Shape.IMAGE]: new ImageRenderer(imagePool),\n      [Shape.TEXT]: new TextRenderer(imagePool),\n      [Shape.LINE]: defaultRenderer,\n      [Shape.POLYLINE]: defaultRenderer,\n      [Shape.POLYGON]: defaultRenderer,\n      [Shape.PATH]: defaultRenderer,\n      [Shape.GROUP]: undefined,\n      [Shape.HTML]: undefined,\n      [Shape.MESH]: undefined,\n      [Shape.FRAGMENT]: undefined,\n    };\n\n    this.context.defaultStyleRendererFactory = defaultStyleRendererFactory;\n    this.context.styleRendererFactory = defaultStyleRendererFactory;\n\n    this.addRenderingPlugin(\n      new CanvasRendererPlugin(canvasRendererPluginOptions),\n    );\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n\n    delete this.context.defaultStyleRendererFactory;\n    delete this.context.styleRendererFactory;\n  }\n}\n"],"names":["_renderState","_classPrivateFieldLooseKey","CanvasRendererPlugin","canvasRendererPluginOptions","_classCallCheck","removedRBushNodeAABBs","renderQueue","Object","defineProperty","writable","value","restoreStack","prevObject","currentContext","Map","clearFullScreenLastFrame","clearFullScreen","vpMatrix","mat4","create","dprMatrix","tmpMat4","vec3a","vec3","vec3b","vec3c","vec3d","_createClass","key","apply","context","runtime","_this","_this$context","config","camera","renderingService","renderingContext","rBushRoot","pathGeneratorFactory","enableRenderingOptimization","renderer","getConfig","enableDirtyCheck","enableDirtyRectangleRendering","rBush","contextService","canvas","root","ownerDocument","defaultView","handleUnmounted","e","object","target","rBushNode","aabb","push","handleCulled","hooks","init","tap","tag","addEventListener","ElementEvent","UNMOUNTED","CULLED","dpr","getDPR","width","height","getContext","clearRect","background","destroy","removeEventListener","_classPrivateFieldLooseBase","beforeDraw","_canvas$context$rende","_this$canvasRendererP","dirtyObjectNumThreshold","dirtyObjectRatioThreshold","_renderingService$get","getStats","total","rendered","ratio","renderingPlugins","isFirstTimeRenderingFinished","disableDirtyRectangleRendering","resetTransform","setTransform","renderByZIndex","stack","length","_currentObject$sortab","currentObject","pop","isVisible","isCulled","renderDisplayObjectOptimized","renderDisplayObject","objects","sortable","sorted","childNodes","i","endFrame","clear","fromScaling","multiply","getOrthoMatrix","save","restore","dirtyRenderBounds","safeMergeAABB","mergeDirtyAABBs","concat","_toConsumableArray","map","_ref","minX","minY","maxX","maxY","AABB","setMinMax","isEmpty","dirtyRect","convertAABB2Rect","x","y","tl","transformMat4","tr","bl","br","minx","Math","min","miny","maxx","max","maxy","ix","floor","iy","iwidth","ceil","iheight","beginPath","rect","clip","_config$renderer$getC","enableDirtyRectangleRenderingDebug","dispatchEvent","CustomEvent","CanvasEvent","DIRTY_RECTANGLE","dirtyObjects","searchDirtyObjects","sort","a","b","renderOrder","forEach","saveDirtyAABB","render","fillStyle","fillRect","canvasContext","renderState","nodeName","updateTransform","clipDraw","styleRenderer","styleRendererFactory","generatePath","clipPath","parsedStyle","exactEquals","getWorldTransform","applyWorldTransform","closePath","forceUpdateStyle","prevNodeName","Shape","TEXT","IMAGE","applyStyleToContext","LINE","PATH","POLYLINE","drawToContext","dirty","parent","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINS","applyAttributesToContext","_ref2","stroke","fill","opacity","lineDash","lineDashOffset","setLineDash","isNil","globalAlpha","Array","isArray","isNone","strokeStyle","attributes","getMin","getMax","renderBounds","getRenderBounds","add","renderable","dirtyRectangle","_dirtyRectangle$getMi","_dirtyRectangle$getMi2","_slicedToArray","_dirtyRectangle$getMa","_dirtyRectangle$getMa2","rBushNodes","search","_ref3","displayObject","update","center","halfExtents","matrix","copy","getLocalTransform","merged","_len","arguments","aabbs","_key","getPattern","pattern","plugin","imagePool","$offscreenCanvas","image","_parsedStyle","offscreenCanvas","offscreenCanvasCreator","getOrCreateCanvas","offscreenCanvasContext","getOrCreateContext","canvasPattern","getOrCreatePatternSync","getGeometryBounds","dirtify","getColor","parsedColor","color","type","GradientType","LinearGradient","RadialGradient","bounds","getOrCreateGradient","_objectSpread","SHADOW_NUMBER_STYLE","STROKE_STYLE","DEFAULT_STYLE","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","filter","globalCompositeOperation","strokeOpacity","lineWidth","lineCap","lineJoin","miterLimit","fillOpacity","defaultParsedStyle","updateContextIfNotHitCache","cache","prevValue","has","get","set","OptimizedDefaultRenderer","applyCommonStyleToContext","forceUpdate","prevStyle","style","blend","applyStrokeFillStyleToContext","_style$lineWidth","hasFill","hasStroke","styleName","applyShadowAndFilterStyleToContext","hasShadow","toString","clearShadowAndFilterStyleForContext","hasFilter","onlyClearShadowFilter","undefined","oldFilter","indexOf","replace","trim","fillToContext","_object$parsedStyle","fillRule","resetStyle","gradient","isPattern","strokeToContext","_this2","_style$fill","_style$opacity","_style$fillOpacity","_style$strokeOpacity","_style$lineWidth2","isInnerShadow","shadowType","isFillTransparent","alpha","shouldDrawShadowWithStroke","originGlobalAlpha","updateOpacity","clearShadowAndFilter","prevOpacity","originBlend","DefaultRenderer","_OptimizedDefaultRend","_callSuper","_inherits","_parsedStyle$opacity","_parsedStyle$fillOpac","_parsedStyle$strokeOp","_parsedStyle$lineWidt","setShadowAndFilter","applyFill","applyStroke","skipFill","skipStroke","calculateOverlapRect","rect1","rect2","_rect","x1","y1","w1","h1","_rect2","x2","y2","w2","h2","overlapLeft","overlapTop","overlapRight","overlapBottom","transformRect","ImageRenderer","_DefaultRenderer","renderDownSampled","data","src","imageCache","downSampled","createDownSampledImage","then","reason","console","error","drawImage","drawRect","renderTile","imageRect","originalSize","size","_context$getTransform","getTransform","c","d","f","gridSize","createImageTiles","scaleToOrigin","scaledTileSize","tileSize","startTileX","endTileX","startTileY","endTileY","tileY","tileX","item","tiles","tileRect","_parsedStyle$x","_parsedStyle$y","getImageSync","img","iw","ih","_object$ownerDocument","getContextService","getDomElement","viewWidth","viewHeight","currentTransform","transformMatrix","fromValues","enableLargeImageOptimization","renderFull","sizeOfOrigin","downSamplingRate","ImagePool","isSupportTile","_unused","TextRenderer","getBounds","_parsedStyle$textAlig","textAlign","_parsedStyle$textBase","textBaseline","_parsedStyle$lineJoin","_parsedStyle$miterLim","_parsedStyle$letterSp","letterSpacing","metrics","dx","dy","font","lines","lineHeight","lineMetrics","formattedTextBaseline","linePositionY","offsetX","linePositionX","drawLetterSpacing","text","isStroke","strokeText","fillText","currentTextAlign","currentPosition","stringArray","from","previousWidth","measureText","currentWidth","currentChar","substring","currentGlobalAlpha","applyOpacity","Plugin","_AbstractRendererPlug","options","name","_defaultStyleRenderer","defaultRenderer","defaultStyleRendererFactory","_defineProperty","CIRCLE","ELLIPSE","RECT","POLYGON","GROUP","HTML","MESH","FRAGMENT","addRenderingPlugin","removeAllRenderingPlugins","AbstractRendererPlugin"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7]}},
    {"offset": {"line": 7494, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7500, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-dom-interaction/src/DOMInteractionPlugin.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-dom-interaction/src/index.ts"],"sourcesContent":["import type {\n  GlobalRuntime,\n  InteractivePointerEvent,\n  RenderingPlugin,\n  RenderingPluginContext,\n} from '@antv/g-lite';\n\n// const MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\n/**\n * listen to mouse/touch/pointer events on DOM wrapper, trigger pointer events\n */\nexport class DOMInteractionPlugin implements RenderingPlugin {\n  static tag = 'DOMInteraction';\n\n  private context: RenderingPluginContext;\n\n  apply(context: RenderingPluginContext, runtime: GlobalRuntime) {\n    const { renderingService, renderingContext, config } = context;\n    this.context = context;\n\n    const canvas = renderingContext.root.ownerDocument.defaultView;\n    // const SUPPORT_ONLY_TOUCH = canvas.supportsTouchEvents && MOBILE_REGEX.test(navigator.userAgent);\n\n    const onPointerMove = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerMove.call(ev);\n    };\n\n    const onPointerUp = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerUp.call(ev);\n    };\n\n    const onPointerDown = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerDown.call(ev);\n    };\n\n    const onPointerOver = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerOver.call(ev);\n    };\n\n    const onPointerOut = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerOut.call(ev);\n    };\n\n    const onPointerCancel = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerCancel.call(ev);\n    };\n\n    const onPointerWheel = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerWheel.call(ev);\n    };\n\n    const onClick = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.click.call(ev);\n    };\n\n    const addPointerEventListener = ($el: HTMLElement) => {\n      runtime.globalThis.document.addEventListener(\n        'pointermove',\n        onPointerMove,\n        true,\n      );\n      $el.addEventListener('pointerdown', onPointerDown, true);\n      $el.addEventListener('pointerleave', onPointerOut, true);\n      $el.addEventListener('pointerover', onPointerOver, true);\n      runtime.globalThis.addEventListener('pointerup', onPointerUp, true);\n      runtime.globalThis.addEventListener(\n        'pointercancel',\n        onPointerCancel,\n        true,\n      );\n    };\n\n    const addTouchEventListener = ($el: HTMLElement) => {\n      $el.addEventListener('touchstart', onPointerDown, true);\n      $el.addEventListener('touchend', onPointerUp, true);\n      $el.addEventListener('touchmove', onPointerMove, true);\n      $el.addEventListener('touchcancel', onPointerCancel, true);\n    };\n\n    const addMouseEventListener = ($el: HTMLElement) => {\n      runtime.globalThis.document.addEventListener(\n        'mousemove',\n        onPointerMove,\n        true,\n      );\n      $el.addEventListener('mousedown', onPointerDown, true);\n      $el.addEventListener('mouseout', onPointerOut, true);\n      $el.addEventListener('mouseover', onPointerOver, true);\n      runtime.globalThis.addEventListener('mouseup', onPointerUp, true);\n    };\n\n    const removePointerEventListener = ($el: HTMLElement) => {\n      runtime.globalThis.document.removeEventListener(\n        'pointermove',\n        onPointerMove,\n        true,\n      );\n      $el.removeEventListener('pointerdown', onPointerDown, true);\n      $el.removeEventListener('pointerleave', onPointerOut, true);\n      $el.removeEventListener('pointerover', onPointerOver, true);\n      runtime.globalThis.removeEventListener('pointerup', onPointerUp, true);\n      runtime.globalThis.removeEventListener(\n        'pointercancel',\n        onPointerCancel,\n        true,\n      );\n    };\n\n    const removeTouchEventListener = ($el: HTMLElement) => {\n      $el.removeEventListener('touchstart', onPointerDown, true);\n      $el.removeEventListener('touchend', onPointerUp, true);\n      $el.removeEventListener('touchmove', onPointerMove, true);\n      $el.removeEventListener('touchcancel', onPointerCancel, true);\n    };\n\n    const removeMouseEventListener = ($el: HTMLElement) => {\n      runtime.globalThis.document.removeEventListener(\n        'mousemove',\n        onPointerMove,\n        true,\n      );\n      $el.removeEventListener('mousedown', onPointerDown, true);\n      $el.removeEventListener('mouseout', onPointerOut, true);\n      $el.removeEventListener('mouseover', onPointerOver, true);\n      runtime.globalThis.removeEventListener('mouseup', onPointerUp, true);\n    };\n\n    renderingService.hooks.init.tap(DOMInteractionPlugin.tag, () => {\n      const $el =\n        this.context.contextService.getDomElement() as unknown as HTMLElement;\n\n      // @ts-ignore\n      if (runtime.globalThis.navigator.msPointerEnabled) {\n        // @ts-ignore\n        $el.style.msContentZooming = 'none';\n        // @ts-ignore\n        $el.style.msTouchAction = 'none';\n      } else if (canvas.supportsPointerEvents) {\n        $el.style.touchAction = 'none';\n      }\n\n      if (canvas.supportsPointerEvents) {\n        addPointerEventListener($el);\n      } else {\n        addMouseEventListener($el);\n      }\n\n      if (canvas.supportsTouchEvents) {\n        addTouchEventListener($el);\n      }\n\n      if (config.useNativeClickEvent) {\n        $el.addEventListener('click', onClick, true);\n      }\n\n      // use passive event listeners\n      // @see https://zhuanlan.zhihu.com/p/24555031\n      $el.addEventListener('wheel', onPointerWheel, {\n        passive: true,\n        capture: true,\n      });\n    });\n\n    renderingService.hooks.destroy.tap(DOMInteractionPlugin.tag, () => {\n      const $el =\n        this.context.contextService.getDomElement() as unknown as HTMLElement;\n\n      // @ts-ignore\n      if (runtime.globalThis.navigator.msPointerEnabled) {\n        // @ts-ignore\n        $el.style.msContentZooming = '';\n        // @ts-ignore\n        $el.style.msTouchAction = '';\n      } else if (canvas.supportsPointerEvents) {\n        $el.style.touchAction = '';\n      }\n\n      if (canvas.supportsPointerEvents) {\n        removePointerEventListener($el);\n      } else {\n        removeMouseEventListener($el);\n      }\n\n      if (canvas.supportsTouchEvents) {\n        removeTouchEventListener($el);\n      }\n\n      if (config.useNativeClickEvent) {\n        $el.removeEventListener('click', onClick, true);\n      }\n\n      $el.removeEventListener('wheel', onPointerWheel, true);\n    });\n  }\n}\n","import { AbstractRendererPlugin } from '@antv/g-lite';\nimport { DOMInteractionPlugin } from './DOMInteractionPlugin';\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'dom-interaction';\n\n  init(): void {\n    this.addRenderingPlugin(new DOMInteractionPlugin());\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n  }\n}\n"],"names":["DOMInteractionPlugin","_classCallCheck","_createClass","key","value","apply","context","runtime","_this","renderingService","renderingContext","config","canvas","root","ownerDocument","defaultView","onPointerMove","ev","hooks","pointerMove","call","onPointerUp","pointerUp","onPointerDown","pointerDown","onPointerOver","pointerOver","onPointerOut","pointerOut","onPointerCancel","pointerCancel","onPointerWheel","pointerWheel","onClick","click","addPointerEventListener","$el","globalThis","document","addEventListener","addTouchEventListener","addMouseEventListener","removePointerEventListener","removeEventListener","removeTouchEventListener","removeMouseEventListener","init","tap","tag","contextService","getDomElement","navigator","msPointerEnabled","style","msContentZooming","msTouchAction","supportsPointerEvents","touchAction","supportsTouchEvents","useNativeClickEvent","passive","capture","destroy","Plugin","_AbstractRendererPlug","_len","arguments","length","args","Array","_key","_callSuper","concat","name","_inherits","addRenderingPlugin","removeAllRenderingPlugins","AbstractRendererPlugin"],"mappings":"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","ignoreList":[0,1]}},
    {"offset": {"line": 7689, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7695, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-html-renderer/src/HTMLRenderingPlugin.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-html-renderer/src/index.ts"],"sourcesContent":["import {\n  DisplayObject,\n  FederatedEvent,\n  GlobalRuntime,\n  HTML,\n  ICamera,\n  MutationEvent,\n  RenderingPlugin,\n  RenderingPluginContext,\n  CanvasEvent,\n  RenderReason,\n  isCSSRGB,\n  ElementEvent,\n  isPattern,\n  Shape,\n} from '@antv/g-lite';\nimport { isNil, isNumber, isString } from '@antv/util';\nimport type { mat4, vec3 } from 'gl-matrix';\n\nconst CANVAS_CAMERA_ID = 'g-canvas-camera';\n\nexport class HTMLRenderingPlugin implements RenderingPlugin {\n  static tag = 'HTMLRendering';\n\n  private context: RenderingPluginContext;\n\n  /**\n   * wrapper for camera\n   */\n  private $camera: HTMLDivElement;\n\n  private displayObjectHTMLElementMap = new WeakMap<\n    DisplayObject,\n    HTMLElement\n  >();\n\n  /**\n   * ! The reason for adding `offset` is that the `transform-origin` coordinate system of DOM is the local coordinate system of the element, while the `transform-origin` coordinate system of canvas drawing is the local coordinate system of the element's parent element. At the same time, the `transform` attribute value of the DOM element does not include `transform-origin`.\n   */\n  private joinTransformMatrix(matrix: mat4, offset: vec3 = [0, 0, 0]) {\n    return `matrix(${[\n      matrix[0],\n      matrix[1],\n      matrix[4],\n      matrix[5],\n      matrix[12] + offset[0],\n      matrix[13] + offset[1],\n    ].join(',')})`;\n  }\n\n  apply(context: RenderingPluginContext, runtime: GlobalRuntime) {\n    const { camera, renderingContext, renderingService } = context;\n    this.context = context;\n    const canvas = renderingContext.root.ownerDocument.defaultView;\n    const { nativeHTMLMap } = canvas.context.eventService;\n\n    const setTransform = (object: HTML, $el: HTMLElement) => {\n      $el.style.transform = this.joinTransformMatrix(\n        object.getWorldTransform(),\n        object.getOrigin(),\n      );\n    };\n\n    const handleMounted = (e: FederatedEvent) => {\n      const object = e.target as HTML;\n      if (object.nodeName === Shape.HTML) {\n        if (!this.$camera) {\n          this.$camera = this.createCamera(camera);\n        }\n\n        // create DOM element\n        const $el = this.getOrCreateEl(object);\n        this.$camera.appendChild($el);\n\n        Object.keys(object.attributes).forEach((name) => {\n          this.updateAttribute(name, object);\n        });\n\n        setTransform(object, $el);\n\n        nativeHTMLMap.set($el, object);\n      }\n    };\n\n    const handleUnmounted = (e: FederatedEvent) => {\n      const object = e.target as HTML;\n      if (object.nodeName === Shape.HTML && this.$camera) {\n        const $el = this.getOrCreateEl(object);\n        if ($el) {\n          $el.remove();\n          nativeHTMLMap.delete($el);\n        }\n      }\n    };\n\n    const handleAttributeChanged = (e: MutationEvent) => {\n      const object = e.target as HTML;\n      if (object.nodeName === Shape.HTML) {\n        const { attrName } = e;\n        this.updateAttribute(attrName, object);\n      }\n    };\n\n    const handleBoundsChanged = (e: MutationEvent) => {\n      const object = e.target as HTML;\n      const nodes =\n        object.nodeName === Shape.FRAGMENT ? object.childNodes : [object];\n\n      nodes.forEach((node: HTML) => {\n        if (node.nodeName === Shape.HTML) {\n          const $el = this.getOrCreateEl(node);\n          setTransform(node, $el);\n        }\n      });\n    };\n\n    const handleCanvasResize = () => {\n      if (this.$camera) {\n        const { width, height } = this.context.config;\n        this.$camera.parentElement.style.width = `${width || 0}px`;\n        this.$camera.parentElement.style.height = `${height || 0}px`;\n      }\n    };\n\n    renderingService.hooks.init.tap(HTMLRenderingPlugin.tag, () => {\n      canvas.addEventListener(CanvasEvent.RESIZE, handleCanvasResize);\n      canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.addEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n      canvas.addEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n    });\n\n    renderingService.hooks.endFrame.tap(HTMLRenderingPlugin.tag, () => {\n      if (\n        this.$camera &&\n        renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED)\n      ) {\n        this.$camera.style.transform = this.joinTransformMatrix(\n          camera.getOrthoMatrix(),\n        );\n      }\n    });\n\n    renderingService.hooks.destroy.tap(HTMLRenderingPlugin.tag, () => {\n      // remove camera\n      if (this.$camera) {\n        this.$camera.remove();\n      }\n\n      canvas.removeEventListener(CanvasEvent.RESIZE, handleCanvasResize);\n      canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.removeEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n      canvas.removeEventListener(\n        ElementEvent.BOUNDS_CHANGED,\n        handleBoundsChanged,\n      );\n    });\n  }\n\n  private createCamera(camera: ICamera) {\n    const { document: doc, width, height } = this.context.config;\n    const $canvas =\n      this.context.contextService.getDomElement() as unknown as HTMLElement;\n    const $container = $canvas.parentNode;\n    if ($container) {\n      const cameraId = CANVAS_CAMERA_ID;\n      let $existedCamera = $container.querySelector<HTMLDivElement>(\n        `#${cameraId}`,\n      );\n      if (!$existedCamera) {\n        // fix @see https://github.com/antvis/G/issues/1702\n        const $cameraContainer = (doc || document).createElement('div');\n        // HTML elements should not overflow with canvas @see https://github.com/antvis/G/issues/1163\n        $cameraContainer.style.overflow = 'hidden';\n        $cameraContainer.style.pointerEvents = 'none';\n        $cameraContainer.style.position = 'absolute';\n        $cameraContainer.style.left = `0px`;\n        $cameraContainer.style.top = `0px`;\n        $cameraContainer.style.width = `${width || 0}px`;\n        $cameraContainer.style.height = `${height || 0}px`;\n\n        const $camera = (doc || document).createElement('div');\n        $existedCamera = $camera;\n        $camera.id = cameraId;\n        // use absolute position\n        $camera.style.position = 'absolute';\n        // account for DOM element's offset @see https://github.com/antvis/G/issues/1150\n        $camera.style.left = `${$canvas.offsetLeft || 0}px`;\n        $camera.style.top = `${$canvas.offsetTop || 0}px`;\n        $camera.style.transformOrigin = 'left top';\n        $camera.style.transform = this.joinTransformMatrix(\n          camera.getOrthoMatrix(),\n        );\n        $camera.style.pointerEvents = 'none';\n        $camera.style.width = `100%`;\n        $camera.style.height = `100%`;\n\n        $cameraContainer.appendChild($camera);\n        $container.appendChild($cameraContainer);\n      }\n\n      return $existedCamera;\n    }\n    return null;\n  }\n\n  private getOrCreateEl(object: DisplayObject) {\n    const { document: doc } = this.context.config;\n    let $existedElement: HTMLElement | null =\n      this.displayObjectHTMLElementMap.get(object);\n\n    if (!$existedElement) {\n      $existedElement = (doc || document).createElement('div');\n      object.parsedStyle.$el = $existedElement;\n      this.displayObjectHTMLElementMap.set(object, $existedElement);\n      if (object.id) {\n        $existedElement.id = object.id;\n      }\n      if (object.name) {\n        $existedElement.setAttribute('name', object.name);\n      }\n      if (object.className) {\n        $existedElement.className = object.className;\n      }\n\n      // use absolute position\n      $existedElement.style.position = 'absolute';\n      // @see https://github.com/antvis/G/issues/1150\n      $existedElement.style['will-change'] = 'transform';\n      $existedElement.style.transform = this.joinTransformMatrix(\n        object.getWorldTransform(),\n        object.getOrigin(),\n      );\n    }\n\n    return $existedElement;\n  }\n\n  private updateAttribute(name: string, object: HTML) {\n    const $el = this.getOrCreateEl(object);\n    switch (name) {\n      case 'innerHTML':\n        const { innerHTML } = object.parsedStyle;\n        if (isString(innerHTML)) {\n          $el.innerHTML = innerHTML;\n        } else {\n          $el.innerHTML = '';\n          $el.appendChild(innerHTML);\n        }\n        break;\n      case 'x':\n        $el.style.left = `${object.parsedStyle.x}px`;\n        break;\n      case 'y':\n        $el.style.top = `${object.parsedStyle.y}px`;\n        break;\n      case 'transformOrigin':\n        const { transformOrigin } = object.parsedStyle;\n        $el.style['transform-origin'] = `${transformOrigin[0].buildCSSText(\n          null,\n          null,\n          '',\n        )} ${transformOrigin[1].buildCSSText(null, null, '')}`;\n        break;\n      case 'width':\n        const { width } = object.parsedStyle;\n        $el.style.width = isNumber(width)\n          ? `${width}px`\n          : (width as string).toString();\n        break;\n      case 'height':\n        const { height } = object.parsedStyle;\n        $el.style.height = isNumber(height)\n          ? `${height}px`\n          : (height as string).toString();\n        break;\n      case 'zIndex':\n        const { zIndex } = object.parsedStyle;\n        $el.style['z-index'] = `${zIndex}`;\n        break;\n      case 'visibility':\n        const { visibility } = object.parsedStyle;\n        $el.style.visibility = visibility;\n        break;\n      case 'pointerEvents':\n        const { pointerEvents = 'auto' } = object.parsedStyle;\n        $el.style.pointerEvents = pointerEvents;\n        break;\n      case 'opacity':\n        const { opacity } = object.parsedStyle;\n        $el.style.opacity = `${opacity}`;\n        break;\n      case 'fill':\n        const { fill } = object.parsedStyle;\n        let color = '';\n        if (isCSSRGB(fill)) {\n          if (fill.isNone) {\n            color = 'transparent';\n          } else {\n            color = object.getAttribute('fill') as string;\n          }\n        } else if (Array.isArray(fill)) {\n          color = object.getAttribute('fill') as string;\n        } else if (isPattern(fill)) {\n          // TODO: pattern, use background?\n        }\n        $el.style.background = color;\n        break;\n      case 'stroke':\n        const { stroke } = object.parsedStyle;\n        let borderColor = '';\n        if (isCSSRGB(stroke)) {\n          if (stroke.isNone) {\n            borderColor = 'transparent';\n          } else {\n            borderColor = object.getAttribute('stroke') as string;\n          }\n        } else if (Array.isArray(stroke)) {\n          borderColor = object.getAttribute('stroke') as string;\n        } else if (isPattern(stroke)) {\n          // TODO: pattern, use background?\n        }\n\n        $el.style['border-color'] = borderColor;\n        $el.style['border-style'] = 'solid';\n        break;\n      case 'lineWidth':\n        const { lineWidth } = object.parsedStyle;\n        $el.style['border-width'] = `${lineWidth || 0}px`;\n        break;\n      case 'lineDash':\n        $el.style['border-style'] = 'dashed';\n        break;\n      case 'filter':\n        const { filter } = object.style;\n        $el.style.filter = filter;\n        break;\n      default:\n        if (!isNil(object.style[name]) && object.style[name] !== '') {\n          $el.style[name] = object.style[name];\n        }\n    }\n  }\n}\n","import { AbstractRendererPlugin } from '@antv/g-lite';\nimport { HTMLRenderingPlugin } from './HTMLRenderingPlugin';\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'html-renderer';\n  init(): void {\n    this.addRenderingPlugin(new HTMLRenderingPlugin());\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n  }\n}\n"],"names":["CANVAS_CAMERA_ID","HTMLRenderingPlugin","_classCallCheck","displayObjectHTMLElementMap","WeakMap","_createClass","key","value","joinTransformMatrix","matrix","offset","arguments","length","undefined","concat","join","apply","context","runtime","_this","camera","renderingContext","renderingService","canvas","root","ownerDocument","defaultView","nativeHTMLMap","eventService","setTransform","object","$el","style","transform","getWorldTransform","getOrigin","handleMounted","e","target","nodeName","Shape","HTML","$camera","createCamera","getOrCreateEl","appendChild","Object","keys","attributes","forEach","name","updateAttribute","set","handleUnmounted","remove","handleAttributeChanged","attrName","handleBoundsChanged","nodes","FRAGMENT","childNodes","node","handleCanvasResize","_this$context$config","config","width","height","parentElement","hooks","init","tap","tag","addEventListener","CanvasEvent","RESIZE","ElementEvent","MOUNTED","UNMOUNTED","ATTR_MODIFIED","BOUNDS_CHANGED","endFrame","renderReasons","has","RenderReason","CAMERA_CHANGED","getOrthoMatrix","destroy","removeEventListener","_this$context$config2","doc","document","$canvas","contextService","getDomElement","$container","parentNode","cameraId","$existedCamera","querySelector","$cameraContainer","createElement","overflow","pointerEvents","position","left","top","id","offsetLeft","offsetTop","transformOrigin","$existedElement","get","parsedStyle","setAttribute","className","innerHTML","isString","x","y","buildCSSText","isNumber","toString","zIndex","visibility","_object$parsedStyle$p","opacity","fill","color","isCSSRGB","isNone","getAttribute","Array","isArray","isPattern","background","stroke","borderColor","lineWidth","filter","isNil","Plugin","_AbstractRendererPlug","_len","args","_key","_callSuper","_inherits","addRenderingPlugin","removeAllRenderingPlugins","AbstractRendererPlugin"],"mappings":"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","ignoreList":[0,1]}},
    {"offset": {"line": 8029, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8035, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-canvas/src/Canvas2DContextService.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-canvas/src/ContextRegisterPlugin.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-canvas/src/index.ts"],"sourcesContent":["import type {\n  RenderingContext,\n  CanvasContext,\n  CanvasLike,\n  DataURLOptions,\n  GlobalRuntime,\n  CanvasConfig,\n  ContextService,\n} from '@antv/g-lite';\nimport { RenderReason, setDOMSize } from '@antv/g-lite';\nimport { isString } from '@antv/util';\n\nexport class Canvas2DContextService\n  implements ContextService<CanvasRenderingContext2D>\n{\n  private $container: HTMLElement | null;\n  private $canvas: CanvasLike | null;\n  private dpr: number;\n  private context:\n    | CanvasRenderingContext2D\n    | OffscreenCanvasRenderingContext2D\n    | null;\n  private canvasConfig: Partial<CanvasConfig>;\n  private renderingContext: RenderingContext;\n\n  constructor(context: GlobalRuntime & CanvasContext) {\n    this.renderingContext = context.renderingContext;\n    this.canvasConfig = context.config;\n  }\n\n  init() {\n    const { container, canvas } = this.canvasConfig;\n\n    if (canvas) {\n      this.$canvas = canvas;\n\n      if (\n        container &&\n        (canvas as HTMLCanvasElement).parentElement !== container\n      ) {\n        (container as HTMLElement).appendChild(canvas as HTMLCanvasElement);\n      }\n\n      this.$container = (canvas as HTMLCanvasElement).parentElement;\n      this.canvasConfig.container = this.$container;\n    } else if (container) {\n      // create container\n      this.$container = isString(container)\n        ? document.getElementById(container)\n        : container;\n      if (this.$container) {\n        // create canvas\n        const $canvas = document.createElement('canvas');\n\n        this.$container.appendChild($canvas);\n        if (!this.$container.style.position) {\n          this.$container.style.position = 'relative';\n        }\n        this.$canvas = $canvas;\n      }\n    }\n\n    this.context = this.$canvas.getContext('2d');\n    this.resize(this.canvasConfig.width, this.canvasConfig.height);\n  }\n\n  getContext() {\n    return this.context as CanvasRenderingContext2D;\n  }\n\n  getDomElement() {\n    return this.$canvas;\n  }\n\n  getDPR() {\n    return this.dpr;\n  }\n\n  getBoundingClientRect() {\n    if ((this.$canvas as HTMLCanvasElement).getBoundingClientRect) {\n      return (this.$canvas as HTMLCanvasElement).getBoundingClientRect();\n    }\n  }\n\n  destroy() {\n    // @ts-ignore\n    if (this.$container && this.$canvas && this.$canvas.parentNode) {\n      // destroy context\n      // @ts-ignore\n      this.$container.removeChild(this.$canvas);\n    }\n  }\n\n  resize(width: number, height: number) {\n    const { devicePixelRatio: dpr } = this.canvasConfig;\n    this.dpr = dpr;\n\n    if (this.$canvas) {\n      // set canvas width & height\n      this.$canvas.width = this.dpr * width;\n      this.$canvas.height = this.dpr * height;\n\n      // set CSS style width & height\n      setDOMSize(this.$canvas, width, height);\n\n      // const dpr = this.getDPR();\n      // scale all drawing operations by the dpr\n      // @see https://www.html5rocks.com/en/tutorials/canvas/hidpi/\n      // this.context.scale(dpr, dpr);\n    }\n\n    this.renderingContext.renderReasons.add(RenderReason.CAMERA_CHANGED);\n  }\n\n  applyCursorStyle(cursor: string) {\n    if (this.$container && this.$container.style) {\n      this.$container.style.cursor = cursor;\n    }\n  }\n\n  async toDataURL(options: Partial<DataURLOptions> = {}) {\n    const { type, encoderOptions } = options;\n    return (this.context.canvas as HTMLCanvasElement).toDataURL(\n      type,\n      encoderOptions,\n    );\n  }\n}\n","import { AbstractRendererPlugin } from '@antv/g-lite';\nimport { Canvas2DContextService } from './Canvas2DContextService';\n\nexport class ContextRegisterPlugin extends AbstractRendererPlugin {\n  name = 'canvas-context-register';\n  init(): void {\n    this.context.ContextService = Canvas2DContextService;\n  }\n  destroy(): void {\n    delete this.context.ContextService;\n  }\n}\n","import type { RendererConfig } from '@antv/g-lite';\nimport { AbstractRenderer } from '@antv/g-lite';\nimport * as CanvasPathGenerator from '@antv/g-plugin-canvas-path-generator';\nimport * as CanvasPicker from '@antv/g-plugin-canvas-picker';\nimport * as CanvasRenderer from '@antv/g-plugin-canvas-renderer';\nimport * as DomInteraction from '@antv/g-plugin-dom-interaction';\nimport * as HTMLRenderer from '@antv/g-plugin-html-renderer';\nimport * as ImageLoader from '@antv/g-plugin-image-loader';\nimport { ContextRegisterPlugin } from './ContextRegisterPlugin';\n\nexport {\n  CanvasPathGenerator,\n  CanvasPicker,\n  CanvasRenderer,\n  DomInteraction,\n  HTMLRenderer,\n  ImageLoader,\n};\n\nexport class Renderer extends AbstractRenderer {\n  constructor(config?: Partial<RendererConfig>) {\n    super(config);\n\n    // register Canvas2DContext\n    this.registerPlugin(new ContextRegisterPlugin());\n    this.registerPlugin(new ImageLoader.Plugin());\n    this.registerPlugin(new CanvasPathGenerator.Plugin());\n    // enable rendering with Canvas2D API\n    this.registerPlugin(new CanvasRenderer.Plugin());\n    this.registerPlugin(new DomInteraction.Plugin());\n    // enable picking with Canvas2D API\n    this.registerPlugin(new CanvasPicker.Plugin());\n\n    // render HTML component\n    this.registerPlugin(new HTMLRenderer.Plugin());\n  }\n}\n"],"names":["Canvas2DContextService","context","_classCallCheck","renderingContext","canvasConfig","config","_createClass","key","value","init","_this$canvasConfig","container","canvas","$canvas","parentElement","appendChild","$container","isString","document","getElementById","createElement","style","position","getContext","resize","width","height","getDomElement","getDPR","dpr","getBoundingClientRect","destroy","parentNode","removeChild","devicePixelRatio","setDOMSize","renderReasons","add","RenderReason","CAMERA_CHANGED","applyCursorStyle","cursor","_toDataURL","_asyncToGenerator","_regeneratorRuntime","mark","_callee","options","type","encoderOptions","_args","arguments","wrap","_context","prev","next","length","undefined","abrupt","toDataURL","stop","apply","ContextRegisterPlugin","_AbstractRendererPlug","_this","_len","args","Array","_key","_callSuper","concat","name","_inherits","ContextService","AbstractRendererPlugin","Renderer","_AbstractRenderer","registerPlugin","ImageLoader","Plugin","CanvasPathGenerator","CanvasRenderer","DomInteraction","CanvasPicker","HTMLRenderer","AbstractRenderer"],"mappings":"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","ignoreList":[0,1,2]}},
    {"offset": {"line": 8255, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8282, "column": 0}, "map": {"version":3,"file":"index.esm.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-dragndrop/src/DragndropPlugin.ts","file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/g-plugin-dragndrop/src/index.ts"],"sourcesContent":["import type {\n  DisplayObject,\n  FederatedPointerEvent,\n  IDocument,\n  RenderingPlugin,\n  RenderingPluginContext,\n} from '@antv/g-lite';\nimport { distanceSquareRoot } from '@antv/util';\nimport type { DragndropPluginOptions } from './interfaces';\n\nexport class DragndropPlugin implements RenderingPlugin {\n  static tag = 'Dragndrop';\n\n  constructor(public dragndropPluginOptions: DragndropPluginOptions) {}\n\n  apply(context: RenderingPluginContext) {\n    const { renderingService, renderingContext } = context;\n    const document = renderingContext.root.ownerDocument;\n\n    // TODO: should we add an option like `draggable` to Canvas\n    const canvas = document.defaultView;\n\n    const handlePointerdown = (event: FederatedPointerEvent) => {\n      const target = event.target as DisplayObject;\n      const isDocument = (target as unknown as IDocument) === document;\n\n      const draggableEventTarget =\n        isDocument && this.dragndropPluginOptions.isDocumentDraggable\n          ? document\n          : target.closest && target.closest('[draggable=true]');\n\n      // `draggable` may be set on ancestor nodes:\n      // @see https://github.com/antvis/G/issues/1088\n      if (draggableEventTarget) {\n        // delay triggering dragstart event\n        let dragstartTriggered = false;\n        const dragstartTimeStamp = event.timeStamp;\n        const dragstartClientCoordinates: [number, number] = [\n          event.clientX,\n          event.clientY,\n        ];\n\n        let currentDroppable = null;\n        let lastDragClientCoordinates = [event.clientX, event.clientY];\n        // @ts-ignore\n        // eslint-disable-next-line no-inner-declarations\n        const handlePointermove = async (event: FederatedPointerEvent) => {\n          if (!dragstartTriggered) {\n            const timeElapsed = event.timeStamp - dragstartTimeStamp;\n            const distanceMoved = distanceSquareRoot(\n              [event.clientX, event.clientY],\n              dragstartClientCoordinates,\n            );\n            // check thresholds\n            if (\n              timeElapsed <=\n                this.dragndropPluginOptions.dragstartTimeThreshold ||\n              distanceMoved <=\n                this.dragndropPluginOptions.dragstartDistanceThreshold\n            ) {\n              return;\n            }\n\n            // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragstart_event\n            event.type = 'dragstart';\n\n            draggableEventTarget.dispatchEvent(event);\n            dragstartTriggered = true;\n          }\n\n          // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/drag_event\n          event.type = 'drag';\n          // @ts-ignore\n          event.dx = event.clientX - lastDragClientCoordinates[0];\n          // @ts-ignore\n          event.dy = event.clientY - lastDragClientCoordinates[1];\n          draggableEventTarget.dispatchEvent(event);\n          lastDragClientCoordinates = [event.clientX, event.clientY];\n\n          if (!isDocument) {\n            const point =\n              this.dragndropPluginOptions.overlap === 'pointer'\n                ? [event.canvasX, event.canvasY]\n                : target.getBounds().center;\n            const elementsBelow = await document.elementsFromPoint(\n              point[0],\n              point[1],\n            );\n\n            // prevent from picking the dragging element\n            const elementBelow =\n              elementsBelow[elementsBelow.indexOf(target) + 1];\n\n            const droppableBelow =\n              elementBelow?.closest('[droppable=true]') ||\n              (this.dragndropPluginOptions.isDocumentDroppable\n                ? document\n                : null);\n            if (currentDroppable !== droppableBelow) {\n              if (currentDroppable) {\n                // null when we were not over a droppable before this event\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragleave_event\n                event.type = 'dragleave';\n                event.target = currentDroppable;\n                currentDroppable.dispatchEvent(event);\n              }\n\n              if (droppableBelow) {\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragleave_event\n                event.type = 'dragenter';\n                event.target = droppableBelow;\n                droppableBelow.dispatchEvent(event);\n              }\n\n              currentDroppable = droppableBelow;\n              if (currentDroppable) {\n                // null if we're not coming over a droppable now\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragover_event\n                event.type = 'dragover';\n                event.target = currentDroppable;\n                currentDroppable.dispatchEvent(event);\n              }\n            }\n          }\n        };\n\n        canvas.addEventListener('pointermove', handlePointermove);\n\n        const stopDragging = function (\n          originalPointerUpEvent: FederatedPointerEvent,\n        ) {\n          if (dragstartTriggered) {\n            // prevent click event being triggerd\n            // @see https://github.com/antvis/G/issues/1091\n            originalPointerUpEvent.detail = {\n              preventClick: true,\n            };\n\n            // clone event first\n            const event = originalPointerUpEvent.clone();\n\n            // drop should fire before dragend\n            // @see https://javascript.tutorialink.com/is-there-a-defined-ordering-between-dragend-and-drop-events/\n\n            if (currentDroppable) {\n              // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/drop_event\n              event.type = 'drop';\n              event.target = currentDroppable;\n              currentDroppable.dispatchEvent(event);\n            }\n\n            // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragend_event\n            event.type = 'dragend';\n            draggableEventTarget.dispatchEvent(event);\n\n            dragstartTriggered = false;\n          }\n\n          canvas.removeEventListener('pointermove', handlePointermove);\n        };\n\n        target.addEventListener('pointerup', stopDragging, { once: true });\n        target.addEventListener('pointerupoutside', stopDragging, {\n          once: true,\n        });\n      }\n    };\n\n    renderingService.hooks.init.tap(DragndropPlugin.tag, () => {\n      canvas.addEventListener('pointerdown', handlePointerdown);\n    });\n\n    renderingService.hooks.destroy.tap(DragndropPlugin.tag, () => {\n      canvas.removeEventListener('pointerdown', handlePointerdown);\n    });\n  }\n}\n","import { AbstractRendererPlugin } from '@antv/g-lite';\nimport { DragndropPlugin } from './DragndropPlugin';\nimport type { DragndropPluginOptions } from './interfaces';\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'dragndrop';\n\n  constructor(private options: Partial<DragndropPluginOptions> = {}) {\n    super();\n  }\n\n  init(): void {\n    this.addRenderingPlugin(\n      new DragndropPlugin({\n        overlap: 'pointer',\n        isDocumentDraggable: false,\n        isDocumentDroppable: false,\n        dragstartDistanceThreshold: 0,\n        dragstartTimeThreshold: 0,\n        ...this.options,\n      }),\n    );\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n  }\n  setOptions(options: Partial<DragndropPluginOptions>): void {\n    Object.assign(\n      (this.plugins[0] as DragndropPlugin).dragndropPluginOptions,\n      options,\n    );\n  }\n}\n"],"names":["DragndropPlugin","dragndropPluginOptions","_classCallCheck","_createClass","key","value","apply","context","_this","renderingService","renderingContext","document","root","ownerDocument","canvas","defaultView","handlePointerdown","event","target","isDocument","draggableEventTarget","isDocumentDraggable","closest","dragstartTriggered","dragstartTimeStamp","timeStamp","dragstartClientCoordinates","clientX","clientY","currentDroppable","lastDragClientCoordinates","handlePointermove","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","timeElapsed","distanceMoved","point","elementsBelow","elementBelow","droppableBelow","wrap","_context","prev","next","distanceSquareRoot","dragstartTimeThreshold","dragstartDistanceThreshold","abrupt","type","dispatchEvent","dx","dy","overlap","canvasX","canvasY","getBounds","center","elementsFromPoint","sent","indexOf","isDocumentDroppable","stop","_x","arguments","addEventListener","stopDragging","originalPointerUpEvent","detail","preventClick","clone","removeEventListener","once","hooks","init","tap","tag","destroy","Plugin","_AbstractRendererPlug","options","length","undefined","_callSuper","name","_inherits","addRenderingPlugin","_objectSpread","removeAllRenderingPlugins","setOptions","Object","assign","plugins","AbstractRendererPlugin"],"mappings":"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","ignoreList":[0,1]}},
    {"offset": {"line": 8514, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8520, "column": 0}, "map": {"version":3,"sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/expr/dist/index.esm.js"],"sourcesContent":["const e={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow};function t(t,n){e[t]=n}class n extends Error{constructor(e,t,n){super(e),this.position=t,this.token=n,this.name=\"ExpressionError\"}}var r;!function(e){e[e.STRING=0]=\"STRING\",e[e.NUMBER=1]=\"NUMBER\",e[e.BOOLEAN=2]=\"BOOLEAN\",e[e.NULL=3]=\"NULL\",e[e.IDENTIFIER=4]=\"IDENTIFIER\",e[e.OPERATOR=5]=\"OPERATOR\",e[e.FUNCTION=6]=\"FUNCTION\",e[e.DOT=7]=\"DOT\",e[e.BRACKET_LEFT=8]=\"BRACKET_LEFT\",e[e.BRACKET_RIGHT=9]=\"BRACKET_RIGHT\",e[e.PAREN_LEFT=10]=\"PAREN_LEFT\",e[e.PAREN_RIGHT=11]=\"PAREN_RIGHT\",e[e.COMMA=12]=\"COMMA\",e[e.QUESTION=13]=\"QUESTION\",e[e.COLON=14]=\"COLON\",e[e.DOLLAR=15]=\"DOLLAR\"}(r||(r={}));const o=new Set([32,9,10,13]),a=new Set([43,45,42,47,37,33,38,124,61,60,62]),s=new Map([[\"true\",r.BOOLEAN],[\"false\",r.BOOLEAN],[\"null\",r.NULL]]),i=new Map([[\"===\",!0],[\"!==\",!0],[\"<=\",!0],[\">=\",!0],[\"&&\",!0],[\"||\",!0],[\"+\",!0],[\"-\",!0],[\"*\",!0],[\"/\",!0],[\"%\",!0],[\"!\",!0],[\"<\",!0],[\">\",!0]]),u=new Map([[46,r.DOT],[91,r.BRACKET_LEFT],[93,r.BRACKET_RIGHT],[40,r.PAREN_LEFT],[41,r.PAREN_RIGHT],[44,r.COMMA],[63,r.QUESTION],[58,r.COLON],[36,r.DOLLAR]]),c=new Map;for(const[e,t]of u.entries())c.set(e,{type:t,value:String.fromCharCode(e)});function p(e){return e>=48&&e<=57}function l(e){return e>=97&&e<=122||e>=65&&e<=90||95===e}function f(e){return l(e)||p(e)}function E(e){return a.has(e)}var h;!function(e){e[e.Program=0]=\"Program\",e[e.Literal=1]=\"Literal\",e[e.Identifier=2]=\"Identifier\",e[e.MemberExpression=3]=\"MemberExpression\",e[e.CallExpression=4]=\"CallExpression\",e[e.BinaryExpression=5]=\"BinaryExpression\",e[e.UnaryExpression=6]=\"UnaryExpression\",e[e.ConditionalExpression=7]=\"ConditionalExpression\"}(h||(h={}));const d=new Map([[\"||\",2],[\"&&\",3],[\"===\",4],[\"!==\",4],[\">\",5],[\">=\",5],[\"<\",5],[\"<=\",5],[\"+\",6],[\"-\",6],[\"*\",7],[\"/\",7],[\"%\",7],[\"!\",8]]),R={type:h.Literal,value:null},T={type:h.Literal,value:!0},w={type:h.Literal,value:!1},y=e=>{let t=0;const o=e.length,a=()=>t>=o?null:e[t],s=()=>e[t++],i=e=>{const t=a();return null!==t&&t.type===e},u=e=>e.type===r.OPERATOR?d.get(e.value)||-1:e.type===r.DOT||e.type===r.BRACKET_LEFT?9:e.type===r.QUESTION?1:-1,c=e=>{let o,u;if(s().type===r.DOT){if(!i(r.IDENTIFIER)){const e=a();throw new n(\"Expected property name\",t,e?e.value:\"<end of input>\")}const e=s();o={type:h.Identifier,name:e.value},u=!1}else{if(o=l(0),!i(r.BRACKET_RIGHT)){const e=a();throw new n(\"Expected closing bracket\",t,e?e.value:\"<end of input>\")}s(),u=!0}return{type:h.MemberExpression,object:e,property:o,computed:u}},p=()=>{const e=a();if(!e)throw new n(\"Unexpected end of input\",t,\"<end of input>\");if(e.type===r.OPERATOR&&(\"!\"===e.value||\"-\"===e.value)){s();const t=p();return{type:h.UnaryExpression,operator:e.value,argument:t,prefix:!0}}switch(e.type){case r.NUMBER:return s(),{type:h.Literal,value:Number(e.value)};case r.STRING:return s(),{type:h.Literal,value:e.value};case r.BOOLEAN:return s(),\"true\"===e.value?T:w;case r.NULL:return s(),R;case r.IDENTIFIER:return s(),{type:h.Identifier,name:e.value};case r.FUNCTION:return(()=>{const e=s(),o=[];if(!i(r.PAREN_LEFT)){const e=a();throw new n(\"Expected opening parenthesis after function name\",t,e?e.value:\"<end of input>\")}for(s();;){if(i(r.PAREN_RIGHT)){s();break}if(!a()){const e=a();throw new n(\"Expected closing parenthesis\",t,e?e.value:\"<end of input>\")}if(o.length>0){if(!i(r.COMMA)){const e=a();throw new n(\"Expected comma between function arguments\",t,e?e.value:\"<end of input>\")}s()}const e=l(0);o.push(e)}return{type:h.CallExpression,callee:{type:h.Identifier,name:e.value},arguments:o}})();case r.PAREN_LEFT:{s();const e=l(0);if(!i(r.PAREN_RIGHT)){const e=a();throw new n(\"Expected closing parenthesis\",t,e?e.value:\"<end of input>\")}return s(),e}default:throw new n(`Unexpected token: ${e.type}`,t,e.value)}},l=(f=0)=>{let E=p();for(;t<o;){const o=e[t],p=u(o);if(p<=f)break;if(o.type!==r.QUESTION)if(o.type!==r.OPERATOR){if(o.type!==r.DOT&&o.type!==r.BRACKET_LEFT)break;E=c(E)}else{s();const e=l(p);E={type:h.BinaryExpression,operator:o.value,left:E,right:e}}else{s();const e=l(0);if(!i(r.COLON)){const e=a();throw new n(\"Expected : in conditional expression\",t,e?e.value:\"<end of input>\")}s();const o=l(0);E={type:h.ConditionalExpression,test:E,consequent:e,alternate:o}}}return E},f=l();return{type:h.Program,body:f}},O=(e,t,r)=>{let o=t;r&&(o={...t,context:{...t.context,...r}});const a=e=>{switch(e.type){case h.Literal:return(e=>e.value)(e);case h.Identifier:return(e=>{if(!(e.name in o.context))throw new n(`Undefined variable: ${e.name}`);return o.context[e.name]})(e);case h.MemberExpression:return(e=>{const t=a(e.object);if(null==t)throw new n(\"Cannot access property of null or undefined\");return t[e.computed?a(e.property):e.property.name]})(e);case h.CallExpression:return(e=>{const t=o.functions[e.callee.name];if(!t)throw new n(`Undefined function: ${e.callee.name}`);return t(...e.arguments.map((e=>a(e))))})(e);case h.BinaryExpression:return(e=>{if(\"&&\"===e.operator){const t=a(e.left);return t?a(e.right):t}if(\"||\"===e.operator){return a(e.left)||a(e.right)}const t=a(e.left),r=a(e.right);switch(e.operator){case\"+\":return t+r;case\"-\":return t-r;case\"*\":return t*r;case\"/\":return t/r;case\"%\":return t%r;case\"===\":return t===r;case\"!==\":return t!==r;case\">\":return t>r;case\">=\":return t>=r;case\"<\":return t<r;case\"<=\":return t<=r;default:throw new n(`Unknown operator: ${e.operator}`)}})(e);case h.UnaryExpression:return(e=>{const t=a(e.argument);if(e.prefix)switch(e.operator){case\"!\":return!t;case\"-\":if(\"number\"!=typeof t)throw new n(`Cannot apply unary - to non-number: ${t}`);return-t;default:throw new n(`Unknown operator: ${e.operator}`)}throw new n(`Postfix operators are not supported: ${e.operator}`)})(e);case h.ConditionalExpression:return(e=>{const t=a(e.test);return a(t?e.consequent:e.alternate)})(e);default:throw new n(`Evaluation error: Unsupported node type: ${e.type}`)}};return a(e.body)};function A(t){const a=(e=>{const t=e,a=t.length,u=new Array(Math.ceil(a/3));let h=0,d=0;function R(e){const o=d+1;d++;let s=\"\",i=!1;for(;d<a;){const n=t.charCodeAt(d);if(n===e)return i||(s=t.substring(o,d)),d++,{type:r.STRING,value:s};92===n?(i||(s=t.substring(o,d),i=!0),d++,s+=t[d]):i&&(s+=t[d]),d++}throw new n(`Unterminated string starting with ${String.fromCharCode(e)}`,d,t.substring(Math.max(0,d-10),d))}function T(){const e=d;for(45===t.charCodeAt(d)&&d++;d<a&&p(t.charCodeAt(d));)d++;if(d<a&&46===t.charCodeAt(d))for(d++;d<a&&p(t.charCodeAt(d));)d++;const n=t.slice(e,d);return{type:r.NUMBER,value:n}}function w(){d++;const e=d;if(d<a&&l(t.charCodeAt(d)))for(d++;d<a&&f(t.charCodeAt(d));)d++;const n=t.slice(e,d);return{type:r.FUNCTION,value:n}}function y(){const e=d++;for(;d<a&&f(t.charCodeAt(d));)d++;const n=t.slice(e,d),o=s.get(n);return o?{type:o,value:n}:{type:r.IDENTIFIER,value:n}}function O(){if(d+2<a){const e=t.substring(d,d+3);if(i.has(e))return d+=3,{type:r.OPERATOR,value:e}}if(d+1<a){const e=t.substring(d,d+2);if(i.has(e))return d+=2,{type:r.OPERATOR,value:e}}const e=t[d];if(i.has(e))return d++,{type:r.OPERATOR,value:e};throw new n(`Unknown operator at position ${d}: ${t.substring(d,d+1)}`,d,t.substring(Math.max(0,d-10),d))}for(;d<a;){const e=t.charCodeAt(d);if(A=e,o.has(A)){d++;continue}const r=c.get(e);if(r)u[h++]=r,d++;else if(34!==e&&39!==e)if(p(e)||45===e&&d+1<a&&p(t.charCodeAt(d+1)))u[h++]=T();else if(64!==e)if(l(e))u[h++]=y();else{if(!E(e))throw new n(`Unexpected character: ${t[d]}`,d,t.substring(Math.max(0,d-10),d));u[h++]=O()}else u[h++]=w();else u[h++]=R(e)}var A;return h===u.length?u:u.slice(0,h)})(t),u=y(a),h=((e={},t={})=>({context:e,functions:t}))({},e);return(e={})=>O(u,h,e)}function N(e,t={}){return A(e)(t)}export{n as ExpressionError,A as compile,N as evaluate,t as register};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9104, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9110, "column": 0}, "map": {"version":3,"file":"compose.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/utils/src/utils/compose.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/utils/src/utils/compose.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;;AAEhC,SAAU,OAAO,CAAI,EAAgB;IAAE,IAAA,OAAA,EAAA,CAAwB;QAAxB,IAAA,KAAA,CAAwB,EAAxB,KAAA,UAAA,MAAwB,EAAxB,IAAwB,CAAA;QAAxB,IAAA,CAAA,KAAA,EAAA,GAAA,SAAA,CAAA,GAAA,CAAwB;;IACnE,OAAO,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,SAAC,KAAK,EAAE,OAAO;QAAK,OAAA,SAAC,CAAI;YAAK,OAAA,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAAjB,CAAiB;IAA3B,CAA2B,EAAE,EAAE,CAAC,CAAC,CAAC,6NAAC,WAAQ,CAAC;AAC1F,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9127, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9133, "column": 0}, "map": {"version":3,"file":"isMatrix.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/utils/src/utils/isMatrix.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/utils/src/utils/isMatrix.ts"],"names":[],"mappings":";;;AAEM,SAAU,QAAQ,CAAC,WAAgB;IACvC,OAAO,WAAW,YAAY,YAAY,IAAI,WAAW,YAAY,KAAK,CAAC;AAC7E,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9139, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9145, "column": 0}, "map": {"version":3,"file":"extend.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/utils/src/utils/extend.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/utils/src/utils/extend.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKM,SAAU,MAAM,CAAC,SAAoB;IACzC,OAAO,SAAC,MAAc;QACpB,IAAM,CAAC,GAAG,EAAE,CAAC;QACb,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,CAAE;YAC7C,IAAM,IAAI,GAAG;gBAAC,MAAM,CAAC,CAAC,CAAC;gBAAE,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;aAAC,CAAC;YACxC,IAAM,EAAE,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;YAC3B,CAAC,CAAC,IAAI,CAAA,KAAA,CAAN,CAAC,EAAA,cAAA,EAAA,EAAA,OAAS,EAAE,GAAA,QAAE;SACf;QACD,OAAO,CAAC,CAAC;IACX,CAAC,CAAC;AACJ,CAAC;AAEK,SAAU,QAAQ,CAAC,SAAsB;IAC7C,OAAO,SAAC,MAAc;QACpB,IAAM,CAAC,GAAG,EAAE,CAAC;QACb,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,CAAE;YAC7C,IAAM,IAAI,GAAG;gBAAC,MAAM,CAAC,CAAC,CAAC;gBAAE,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;gBAAE,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;aAAC,CAAC;YACvD,IAAM,EAAE,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;YAC3B,CAAC,CAAC,IAAI,CAAA,KAAA,CAAN,CAAC,EAAA,cAAA,EAAA,EAAA,OAAS,EAAE,GAAA,QAAE;SACf;QACD,OAAO,CAAC,CAAC;IACX,CAAC,CAAC;AACJ,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9206, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9212, "column": 0}, "map": {"version":3,"file":"adjustAngle.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/utils/src/utils/adjustAngle.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/utils/src/utils/adjustAngle.ts"],"names":[],"mappings":";;;AAAM,SAAU,WAAW,CAAC,KAAa,EAAE,GAAW,EAAE,GAAW;IACjE,MAAO,KAAK,GAAG,GAAG,CAAE,KAAK,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;IACzC,MAAO,KAAK,GAAG,GAAG,CAAE,KAAK,IAAI,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;IACzC,OAAO,KAAK,CAAC;AACf,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9220, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9226, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/utils/src/utils/index.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/utils/src/utils/index.ts"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 9232, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9250, "column": 0}, "map": {"version":3,"file":"translate.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/translate.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/translate.ts"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,WAAW,CAAC;;;;;;;;;;;;;;;;;;;;;AAY1B,IAAM,SAAS,GAAsB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM;IAChE,IAAA,KAAA,OAAW,MAAkB,EAAA,EAAA,EAA5B,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAsB,CAAC;IACpC,IAAM,MAAM,+KAAG,OAAI,CAAC,MAAM,EAAE,CAAC;IAC7B,mLAAO,OAAI,CAAC,eAAe,CAAC,MAAM,EAAE;QAAC,EAAE;QAAE,EAAE;KAAC,CAAC,CAAC;AAChD,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9282, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9288, "column": 0}, "map": {"version":3,"file":"cartesian.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/cartesian.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/cartesian.ts"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAC;;;;;;;;;;;;;;;;;;;;;AAY9B,IAAM,SAAS,GAAsB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM;IACtE,IAAM,EAAE,GAAG,kMAAI,SAAM,CAAC;QACpB,KAAK,EAAE;YAAC,CAAC;YAAE,CAAC,GAAG,KAAK;SAAC;KACtB,CAAC,CAAC;IACH,IAAM,EAAE,GAAG,kMAAI,SAAM,CAAC;QACpB,KAAK,EAAE;YAAC,CAAC;YAAE,CAAC,GAAG,MAAM;SAAC;KACvB,CAAC,CAAC;IACH,OAAO;QACL,SAAS,EAAA,SAAC,MAAe;YACjB,IAAA,KAAA,OAAW,MAAM,EAAA,EAAA,EAAhB,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAU,CAAC;YACxB,OAAO;gBAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;gBAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;aAAC,CAAC;QAClC,CAAC;QACD,WAAW,EAAA,SAAC,MAAe;YACnB,IAAA,KAAA,OAAW,MAAM,EAAA,EAAA,EAAhB,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAU,CAAC;YACxB,OAAO;gBAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC;gBAAE,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC;aAAC,CAAC;QACxC,CAAC;KACF,CAAC;AACJ,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9342, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9348, "column": 0}, "map": {"version":3,"file":"custom.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/custom.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/custom.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAWO,IAAM,MAAM,GAAsB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM;IAC7D,IAAA,KAAA,OAAa,MAA6B,EAAA,EAAA,EAAzC,QAAQ,GAAA,EAAA,CAAA,EAAiC,CAAC;IACjD,OAAO,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;AACvC,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9374, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9380, "column": 0}, "map": {"version":3,"file":"matrix.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/matrix.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/matrix.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAYO,IAAM,MAAM,GAAsB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM;IAC7D,IAAA,KAAA,OAAW,MAAmB,EAAA,EAAA,EAA7B,MAAM,GAAA,EAAA,CAAA,EAAuB,CAAC;IACrC,OAAO,MAAM,CAAC;AAChB,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9406, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9412, "column": 0}, "map": {"version":3,"file":"polar.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/polar.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/polar.ts"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9488, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9494, "column": 0}, "map": {"version":3,"file":"transpose.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/transpose.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/transpose.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAYO,IAAM,SAAS,GAAsB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM;IACtE,OAAO;QACL,SAAS,EAAE,SAAC,EAAe;gBAAf,KAAA,OAAA,IAAA,EAAe,EAAd,CAAC,GAAA,EAAA,CAAA,EAAA,EAAE,CAAC,GAAA,EAAA,CAAA,EAAA;YAAe,OAAA;gBAAC,CAAC;gBAAE,CAAC;aAAC;QAAN,CAAM;QACtC,WAAW,EAAE,SAAC,EAAe;gBAAf,KAAA,OAAA,IAAA,EAAe,EAAd,CAAC,GAAA,EAAA,CAAA,EAAA,EAAE,CAAC,GAAA,EAAA,CAAA,EAAA;YAAe,OAAA;gBAAC,CAAC;gBAAE,CAAC;aAAC;QAAN,CAAM;KACzC,CAAC;AACJ,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9534, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9540, "column": 0}, "map": {"version":3,"file":"scale.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/scale.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/scale.ts"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,WAAW,CAAC;;;;;;;;;;;;;;;;;;;;;AAY1B,IAAM,KAAK,GAAsB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM;IAC5D,IAAA,KAAA,OAAW,MAAkB,EAAA,EAAA,EAA5B,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAsB,CAAC;IACpC,IAAM,MAAM,+KAAG,OAAI,CAAC,MAAM,EAAE,CAAC;IAC7B,mLAAO,OAAI,CAAC,WAAW,CAAC,MAAM,EAAE;QAAC,EAAE;QAAE,EAAE;KAAC,CAAC,CAAC;AAC5C,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9572, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9578, "column": 0}, "map": {"version":3,"file":"reflect.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/reflect.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/reflect.ts"],"names":[],"mappings":";;;;;AACA,OAAO,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOzB,IAAM,OAAO,GAAsB,SAAC,MAAM;IAAE,IAAA,OAAA,EAAA,CAAO;QAAP,IAAA,KAAA,CAAO,EAAP,KAAA,UAAA,MAAO,EAAP,IAAO,CAAA;QAAP,IAAA,CAAA,KAAA,EAAA,GAAA,SAAA,CAAA,GAAA,CAAO;;IACxD,qKAAO,QAAK,CAAA,KAAA,CAAA,KAAA,GAAA,cAAA;QAAC;YAAC,CAAC,CAAC;YAAE,CAAC,CAAC;SAAC;KAAA,EAAA,OAAK,IAAI,GAAA,QAAE;AAClC,CAAC,CAAC;AAOK,IAAM,QAAQ,GAAsB,SAAC,MAAM;IAAE,IAAA,OAAA,EAAA,CAAO;QAAP,IAAA,KAAA,CAAO,EAAP,KAAA,UAAA,MAAO,EAAP,IAAO,CAAA;QAAP,IAAA,CAAA,KAAA,EAAA,GAAA,SAAA,CAAA,GAAA,CAAO;;IACzD,OAAO,sKAAK,CAAA,KAAA,CAAA,KAAA,GAAA,cAAA;QAAC;YAAC,CAAC,CAAC;YAAE,CAAC;SAAC;KAAA,EAAA,OAAK,IAAI,GAAA,QAAE;AACjC,CAAC,CAAC;AAOK,IAAM,QAAQ,GAAsB,SAAC,MAAM;IAAE,IAAA,OAAA,EAAA,CAAO;QAAP,IAAA,KAAA,CAAO,EAAP,KAAA,UAAA,MAAO,EAAP,IAAO,CAAA;QAAP,IAAA,CAAA,KAAA,EAAA,GAAA,SAAA,CAAA,GAAA,CAAO;;IACzD,qKAAO,QAAK,CAAA,KAAA,CAAA,KAAA,GAAA,cAAA;QAAC;YAAC,CAAC;YAAE,CAAC,CAAC;SAAC;KAAA,EAAA,OAAK,IAAI,GAAA,QAAE;AACjC,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9649, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9655, "column": 0}, "map": {"version":3,"file":"rotate.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/rotate.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/rotate.ts"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,WAAW,CAAC;;;;;;;;;;;;;;;;;;;;;AAY1B,IAAM,MAAM,GAAsB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM;IAC7D,IAAA,KAAA,OAAU,MAAkB,EAAA,EAAA,EAA3B,KAAK,GAAA,EAAA,CAAA,EAAsB,CAAC;IACnC,IAAM,MAAM,+KAAG,OAAI,CAAC,MAAM,EAAE,CAAC;IAC7B,mLAAO,OAAI,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AAC1C,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9684, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9690, "column": 0}, "map": {"version":3,"file":"helix.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/helix.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/helix.ts"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9775, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9781, "column": 0}, "map": {"version":3,"file":"parallel.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/parallel.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/parallel.ts"],"names":[],"mappings":";;;AAAA,oDAAA,EAAsD,CACtD,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;;;;;;;;;;;;;;;;;;;;;;AAYrC,IAAM,QAAQ,GAAsB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM;IAC/D,IAAA,KAAA,OAAmB,MAAkB,EAAA,EAAA,EAApC,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAsB,CAAC;IAC5C,IAAM,EAAE,GAAG,kMAAI,SAAM,CAAC;QACpB,KAAK,EAAE;YAAC,EAAE;YAAE,EAAE;SAAC;KAChB,CAAC,CAAC;IACH,OAAO;QACL,SAAS,EAAA,SAAC,MAAc;YACtB,IAAM,CAAC,GAAG,EAAE,CAAC;YACb,IAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;YAC1B,IAAM,EAAE,GAAG,iMAAI,QAAK,CAAC;gBACnB,MAAM,EAAE,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,SAAC,CAAC,EAAE,CAAC;oBAAK,OAAA,CAAC;gBAAD,CAAC,CAAC;gBAC/C,KAAK,EAAE;oBAAC,EAAE;oBAAE,EAAE;iBAAC;aAChB,CAAC,CAAC;YACH,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,CAAE;gBAC5B,IAAM,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAM,GAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpB,IAAM,GAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gBACpB,CAAC,CAAC,IAAI,CAAC,GAAC,EAAE,GAAC,CAAC,CAAC;aACd;YACD,OAAO,CAAC,CAAC;QACX,CAAC;QACD,WAAW,EAAA,SAAC,MAAc;YACxB,IAAM,CAAC,GAAG,EAAE,CAAC;YACb,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,CAAE;gBACzC,IAAM,GAAC,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACxB,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,GAAC,CAAC,CAAC,CAAC;aACtB;YACD,OAAO,CAAC,CAAC;QACX,CAAC;KACF,CAAC;AACJ,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9845, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9851, "column": 0}, "map": {"version":3,"file":"shear.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/shear.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/shear.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA,SAAS,GAAG,CAAC,KAAa;IACxB,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAC7B,CAAC;AAWM,IAAM,MAAM,GAAsB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM;IAC7D,IAAA,KAAA,OAAU,MAAkB,EAAA,EAAA,EAA3B,KAAK,GAAA,EAAA,CAAA,EAAsB,CAAC;IACnC,IAAM,EAAE,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;IACtB,OAAO;QACL,SAAS,EAAA,SAAC,MAAe;YACjB,IAAA,KAAA,OAAS,MAAM,EAAA,EAAA,EAAd,CAAC,GAAA,EAAA,CAAA,EAAA,EAAE,CAAC,GAAA,EAAA,CAAA,EAAU,CAAC;YACtB,IAAM,EAAE,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;YACtB,OAAO;gBAAC,EAAE;gBAAE,CAAC;aAAC,CAAC;QACjB,CAAC;QACD,WAAW,EAAA,SAAC,MAAe;YACnB,IAAA,KAAA,OAAU,MAAM,EAAA,EAAA,EAAf,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,CAAC,GAAA,EAAA,CAAA,EAAU,CAAC;YACvB,IAAM,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;YACtB,OAAO;gBAAC,CAAC;gBAAE,CAAC;aAAC,CAAC;QAChB,CAAC;KACF,CAAC;AACJ,CAAC,CAAC;AAWK,IAAM,MAAM,GAAsB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM;IAC7D,IAAA,KAAA,OAAU,MAAkB,EAAA,EAAA,EAA3B,KAAK,GAAA,EAAA,CAAA,EAAsB,CAAC;IACnC,IAAM,EAAE,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;IACtB,OAAO;QACL,SAAS,EAAA,SAAC,MAAe;YACjB,IAAA,KAAA,OAAS,MAAM,EAAA,EAAA,EAAd,CAAC,GAAA,EAAA,CAAA,EAAA,EAAE,CAAC,GAAA,EAAA,CAAA,EAAU,CAAC;YACtB,IAAM,EAAE,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;YACtB,OAAO;gBAAC,CAAC;gBAAE,EAAE;aAAC,CAAC;QACjB,CAAC;QACD,WAAW,EAAA,SAAC,MAAe;YACnB,IAAA,KAAA,OAAU,MAAM,EAAA,EAAA,EAAf,CAAC,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAU,CAAC;YACvB,IAAM,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,CAAC;YACtB,OAAO;gBAAC,CAAC;gBAAE,CAAC;aAAC,CAAC;QAChB,CAAC;KACF,CAAC;AACJ,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9921, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9927, "column": 0}, "map": {"version":3,"file":"fisheye.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/fisheye.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/fisheye.ts"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 10110, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10116, "column": 0}, "map": {"version":3,"file":"cartesian3D.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/cartesian3D.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/cartesian3D.ts"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,aAAa,CAAC;;;;;;;;;;;;;;;;;;;;;AAG9B,IAAM,WAAW,GAAwB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK;IACpF,IAAM,EAAE,GAAG,IAAI,uMAAM,CAAC;QACpB,KAAK,EAAE;YAAC,CAAC;YAAE,CAAC,GAAG,KAAK;SAAC;KACtB,CAAC,CAAC;IACH,IAAM,EAAE,GAAG,iMAAI,UAAM,CAAC;QACpB,KAAK,EAAE;YAAC,CAAC;YAAE,CAAC,GAAG,MAAM;SAAC;KACvB,CAAC,CAAC;IACH,IAAM,EAAE,GAAG,kMAAI,SAAM,CAAC;QACpB,KAAK,EAAE;YAAC,CAAC;YAAE,CAAC,GAAG,KAAK;SAAC;KACtB,CAAC,CAAC;IAEH,OAAO;QACL,SAAS,EAAA,SAAC,MAAe;YACjB,IAAA,KAAA,OAAe,MAAM,EAAA,EAAA,EAApB,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAU,CAAC;YAC5B,OAAO;gBAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;gBAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;gBAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;aAAC,CAAC;QAC9C,CAAC;QACD,WAAW,EAAA,SAAC,MAAe;YACnB,IAAA,KAAA,OAAe,MAAM,EAAA,EAAA,EAApB,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAU,CAAC;YAC5B,OAAO;gBAAC,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC;gBAAE,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC;gBAAE,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC;aAAC,CAAC;QACvD,CAAC;KACF,CAAC;AACJ,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 10178, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10184, "column": 0}, "map": {"version":3,"file":"translate3D.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/translate3D.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/translate3D.ts"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,WAAW,CAAC;;;;;;;;;;;;;;;;;;;;;AAc1B,IAAM,WAAW,GAAwB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK;IAC9E,IAAA,KAAA,OAAe,MAAkB,EAAA,EAAA,EAAhC,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAsB,CAAC;IACxC,mLAAO,OAAI,CAAC,eAAe,6KAAC,OAAI,CAAC,MAAM,EAAE,EAAE;QAAC,EAAE;QAAE,EAAE;QAAE,EAAE;KAAC,CAAC,CAAC;AAC3D,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 10216, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10222, "column": 0}, "map": {"version":3,"file":"transpose3D.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/transpose3D.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/transpose3D.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAYO,IAAM,WAAW,GAAwB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK;IACpF,OAAO;QACL,SAAS,EAAE,SAAC,EAAkB;gBAAlB,KAAA,OAAA,IAAA,EAAkB,EAAjB,CAAC,GAAA,EAAA,CAAA,EAAA,EAAE,CAAC,GAAA,EAAA,CAAA,EAAA,EAAE,CAAC,GAAA,EAAA,CAAA,EAAA;YAAe,OAAA;gBAAC,CAAC;gBAAE,CAAC;gBAAE,CAAC;aAAC;QAAT,CAAS;QAC5C,WAAW,EAAE,SAAC,EAAkB;gBAAlB,KAAA,OAAA,IAAA,EAAkB,EAAjB,CAAC,GAAA,EAAA,CAAA,EAAA,EAAE,CAAC,GAAA,EAAA,CAAA,EAAA,EAAE,CAAC,GAAA,EAAA,CAAA,EAAA;YAAe,OAAA;gBAAC,CAAC;gBAAE,CAAC;gBAAE,CAAC;aAAC;QAAT,CAAS;KAC/C,CAAC;AACJ,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 10264, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10270, "column": 0}, "map": {"version":3,"file":"scale3D.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/scale3D.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/scale3D.ts"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,WAAW,CAAC;;;;;;;;;;;;;;;;;;;;;AAc1B,IAAM,OAAO,GAAwB,SAAC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK;IAC1E,IAAA,KAAA,OAAe,MAAkB,EAAA,EAAA,EAAhC,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAA,EAAE,EAAE,GAAA,EAAA,CAAA,EAAsB,CAAC;IACxC,mLAAO,OAAI,CAAC,WAAW,6KAAC,OAAI,CAAC,MAAM,EAAE,EAAE;QAAC,EAAE;QAAE,EAAE;QAAE,EAAE;KAAC,CAAC,CAAC;AACvD,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 10302, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10308, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/transforms/src/transforms/index.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/transforms/src/transforms/index.ts"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 10327, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10358, "column": 0}, "map": {"version":3,"file":"coordinate.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/src/coordinate.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/src/coordinate.ts"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 10637, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10643, "column": 0}, "map": {"version":3,"file":"coordinate3D.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/src/coordinate3D.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/src/coordinate3D.ts"],"names":[],"mappings":";;;AAAA,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AAG/C,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,SAAS,CAAC;AACtD,OAAO,EAAE,WAAW,EAAE,WAAW,EAAE,OAAO,EAAE,WAAW,EAAE,MAAM,cAAc,CAAC;;;;;;;AAH9E,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,WAAW,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKvC,IAAA,eAAA;IA0BE;;;OAGG,CACH,SAAA,aAAY,OAA4B;QAvBxC,QAAQ;QACA,IAAA,CAAA,OAAO,GAAc;YAC3B,CAAC,EAAE,CAAC;YACJ,CAAC,EAAE,CAAC;YACJ,CAAC,EAAE,CAAC;YACJ,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,GAAG;YACX,KAAK,EAAE,GAAG;YACV,eAAe,EAAE,EAAE;SACpB,CAAC;QAEF,YAAY;QACJ,IAAA,CAAA,YAAY,GAAG;YACrB,WAAW,EAAA,mKAAA,CAAA,cAAA;YACX,WAAW,EAAA,mKAAA,CAAA,cAAA;YACX,OAAO,EAAA,+JAAA,CAAA,UAAA;YACP,WAAW,EAAA,mKAAA,CAAA,cAAA;SACZ,CAAC;QAOA,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IACvB,CAAC;IAED;;;OAGG,CACI,aAAA,SAAA,CAAA,MAAM,GAAb,SAAc,OAA2B;QACvC,IAAI,CAAC,OAAO,qOAAG,UAAO,AAAP,EAAQ,CAAA,CAAE,EAAE,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QAClD,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAED;;;OAGG,CACI,aAAA,SAAA,CAAA,KAAK,GAAZ;QACE,OAAO,IAAI,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACxC,CAAC;IAED;;;OAGG,CACI,aAAA,SAAA,CAAA,UAAU,GAAjB;QACE,OAAO,IAAI,CAAC,OAAO,CAAC;IACtB,CAAC;IAED;;OAEG,CACI,aAAA,SAAA,CAAA,KAAK,GAAZ;QACE,IAAI,CAAC,MAAM,CAAC;YACV,eAAe,EAAE,EAAE;SACpB,CAAC,CAAC;IACL,CAAC;IAED;;;OAGG,CACI,aAAA,SAAA,CAAA,OAAO,GAAd;QACQ,IAAA,KAA2B,IAAI,CAAC,OAAO,EAArC,KAAK,GAAA,GAAA,KAAA,EAAE,MAAM,GAAA,GAAA,MAAA,EAAE,KAAK,GAAA,GAAA,KAAiB,CAAC;QAC9C,OAAO;YAAC,KAAK;YAAE,MAAM;YAAE,KAAK;SAAC,CAAC;IAChC,CAAC;IAED;;;OAGG,CACI,aAAA,SAAA,CAAA,SAAS,GAAhB;QACQ,IAAA,KAAoC,IAAI,CAAC,OAAO,EAA9C,CAAC,GAAA,GAAA,CAAA,EAAE,CAAC,GAAA,GAAA,CAAA,EAAE,CAAC,GAAA,GAAA,CAAA,EAAE,KAAK,GAAA,GAAA,KAAA,EAAE,MAAM,GAAA,GAAA,MAAA,EAAE,KAAK,GAAA,GAAA,KAAiB,CAAC;QACvD,OAAO;YAAC,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC;YAAE,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC;YAAE,CAAC,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC;SAAC,CAAC;IAC1E,CAAC;IAED;;;;OAIG,CACI,aAAA,SAAA,CAAA,SAAS,GAAhB;QAAiB,IAAA,OAAA,EAAA,CAAyB;YAAzB,IAAA,KAAA,CAAyB,EAAzB,KAAA,UAAA,MAAyB,EAAzB,IAAyB,CAAA;YAAzB,IAAA,CAAA,GAAA,GAAA,SAAA,CAAA,GAAA,CAAyB;;QAChC,IAAA,eAAe,GAAK,IAAI,CAAC,OAAO,CAAA,eAAjB,CAAkB;QACzC,IAAI,CAAC,MAAM,CAAC;YACV,eAAe,EAAA,cAAA,cAAA,EAAA,EAAA,OAAM,eAAe,GAAA,QAAA;gBAAA,cAAA,EAAA,EAAA,OAAM,IAAI,GAAA;aAAA,EAAA,MAAE;SACjD,CAAC,CAAC;QACH,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;;;OAIG,CACI,aAAA,SAAA,CAAA,GAAG,GAAV,SAAW,MAAwB;QACjC,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC7B,CAAC;IAED;;;;OAIG,CACI,aAAA,SAAA,CAAA,MAAM,GAAb,SAAc,MAAwB;QACpC,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAC5B,CAAC;IAEO,aAAA,SAAA,CAAA,YAAY,GAApB;QACE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC7B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IAClC,CAAC;IAED,eAAe;IACf,oBAAoB;IACpB,8CAA8C;IACtC,aAAA,SAAA,CAAA,OAAO,GAAf,SAAgB,MAAc;;QAAd,IAAA,WAAA,KAAA,GAAA;YAAA,SAAA,KAAc;QAAA;QAC5B,IAAM,eAAe,GAAG,MAAM,CAAC,CAAC,CAAC,cAAA,EAAA,EAAA,OAAI,IAAI,CAAC,OAAO,CAAC,eAAe,GAAA,OAAE,OAAO,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC;QAC5G,IAAM,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC,SAAC,CAAgB;YAAK,OAAA,CAAC,CAAC,WAAW;QAAb,CAAa,CAAC,CAAC,CAAC,SAAC,CAAgB;YAAK,OAAA,CAAC,CAAC,SAAS;QAAX,CAAW,CAAC;QAChG,IAAM,QAAQ,GAAG,EAAE,CAAC;QACpB,IAAM,UAAU,GAAG,EAAE,CAAC;QACtB,IAAM,GAAG,GAAG,SAAC,SAAsB,EAAE,QAAe;YAAf,IAAA,aAAA,KAAA,GAAA;gBAAA,WAAA,IAAe;YAAA;YAClD,OAAA,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,+JAAC,WAAA,AAAQ,EAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAA3D,CAA2D,CAAC;;YAE9D,IAA8B,IAAA,oBAAA,SAAA,eAAe,CAAA,EAAA,sBAAA,kBAAA,IAAA,EAAA,EAAA,CAAA,oBAAA,IAAA,EAAA,sBAAA,kBAAA,IAAA,GAAE;gBAApC,IAAA,KAAA,OAAA,oBAAA,KAAA,CAAe,EAAd,MAAI,GAAA,EAAA,CAAA,EAAA,EAAK,IAAI,GAAA,GAAA,KAAA,CAAA,EAAA;gBACvB,IAAM,iBAAiB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAI,CAAC,CAAC;gBAClD,IAAI,iBAAiB,EAAE;oBACf,IAAA,KAAoC,IAAI,CAAC,OAAO,EAA9C,CAAC,GAAA,GAAA,CAAA,EAAE,CAAC,GAAA,GAAA,CAAA,EAAE,CAAC,GAAA,GAAA,CAAA,EAAE,KAAK,GAAA,GAAA,KAAA,EAAE,MAAM,GAAA,GAAA,MAAA,EAAE,KAAK,GAAA,GAAA,KAAiB,CAAC;oBACvD,IAAM,WAAW,GAAG,iBAAiB,CAAA,cAAA,EAAA,EAAA,OAAK,IAAI,GAAA,QAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;oBAEhF,oKAAI,WAAA,AAAQ,EAAC,WAAW,CAAC,EAAE;wBACzB,sBAAsB;wBACtB,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;qBAC5B,MAAM;wBACL,2CAA2C;wBAC3C,IAAI,QAAQ,CAAC,MAAM,EAAE;4BACnB,IAAM,WAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;4BAC/D,GAAG,CAAC,WAAS,CAAC,CAAC;4BACf,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;yBACrC;wBACD,IAAM,SAAS,GAAG,MAAM,CAAC,WAA4B,CAAC,gOAAI,WAAQ,CAAC;wBACnE,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;qBACtB;iBACF;aACF;;;;;;;;;;;;QAED,YAAY;QACZ,IAAI,QAAQ,CAAC,MAAM,EAAE;YACnB,IAAM,SAAS,GAAG,IAAI,CAAC,qBAAqB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAC/D,GAAG,CAAC,SAAS,CAAC,CAAC;SAChB;QAED,kKAAO,UAAO,CAAA,KAAA,CAAA,KAAA,GAAA,cAAA,EAAA,EAAA,OAAsB,UAAU,GAAA,QAAE;IAClD,CAAC;IAED,oBAAoB;IACZ,aAAA,SAAA,CAAA,qBAAqB,GAA7B,SAA8B,QAAmB,EAAE,MAAe;QAChE,IAAM,MAAM,+KAAG,OAAI,CAAC,MAAM,EAAE,CAAC;QAC7B,IAAI,MAAM,EAAE,QAAQ,CAAC,OAAO,EAAE,CAAC;QAC/B,QAAQ,CAAC,OAAO,CAAC,SAAC,CAAC;YAAK,mLAAA,OAAI,CAAC,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,CAAC;QAA3B,CAA2B,CAAC,CAAC;QACrD,IAAI,MAAM,EAAE;YACV,mLAAI,CAAC,MAAM,CAAC,MAAM,8KAAE,OAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;SACzC;QACD,OAAO,SAAC,MAAe;YACrB,IAAM,OAAO,GAAY;gBAAC,MAAM,CAAC,CAAC,CAAC;gBAAE,MAAM,CAAC,CAAC,CAAC;gBAAE,MAAM,CAAC,CAAC,CAAC;gBAAE,CAAC;aAAC,CAAC;wLAE9D,OAAI,CAAC,aAAa,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;YAC7C,OAAO;gBAAC,OAAO,CAAC,CAAC,CAAC;gBAAE,OAAO,CAAC,CAAC,CAAC;gBAAE,OAAO,CAAC,CAAC,CAAC;aAAC,CAAC;QAC9C,CAAC,CAAC;IACJ,CAAC;IACH,OAAA,YAAC;AAAD,CAAC,AAnLD,IAmLC","ignoreList":[0]}},
    {"offset": {"line": 10904, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10910, "column": 0}, "map": {"version":3,"file":"index.js","sources":["file:///Users/xiezhendong1/Documents/code/github/zeno/node_modules/%40antv/coord/esm/src/index.ts"],"sourcesContent":["unable to read source [project]/node_modules/@antv/coord/esm/src/index.ts"],"names":[],"mappings":"","ignoreList":[0]}},
    {"offset": {"line": 10914, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}